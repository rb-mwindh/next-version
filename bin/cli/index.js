#!/usr/bin/env node
import{createRequire as e}from"module";var t={7117:(e,t,r)=>{function __export(e){for(var r in e)if(!t.hasOwnProperty(r))t[r]=e[r]}Object.defineProperty(t,"__esModule",{value:true});__export(r(3972))},3972:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const n=r(9896);const i=s(r(2830));const o=i.default("@kwsites/file-exists");function check(e,t,r){o(`checking %s`,e);try{const s=n.statSync(e);if(s.isFile()&&t){o(`[OK] path represents a file`);return true}if(s.isDirectory()&&r){o(`[OK] path represents a directory`);return true}o(`[FAIL] path represents something other than a file or directory`);return false}catch(e){if(e.code==="ENOENT"){o(`[FAIL] path is not accessible: %o`,e);return false}o(`[FATAL] %o`,e);throw e}}function exists(e,r=t.READABLE){return check(e,(r&t.FILE)>0,(r&t.FOLDER)>0)}t.exists=exists;t.FILE=1;t.FOLDER=2;t.READABLE=t.FILE+t.FOLDER},9997:(e,t)=>{var r;r={value:true};t.ud=t.yX=void 0;function deferred(){let e;let t;let r="pending";const s=new Promise(((r,s)=>{e=r;t=s}));return{promise:s,done(t){if(r==="pending"){r="resolved";e(t)}},fail(e){if(r==="pending"){r="rejected";t(e)}},get fulfilled(){return r!=="pending"},get status(){return r}}}t.yX=deferred;t.ud=deferred;r=deferred},6110:(e,t,r)=>{t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage=localstorage();t.destroy=(()=>{let e=false;return()=>{if(!e){e=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}let e;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(t){t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff);if(!this.useColors){return}const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0;let n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{if(e==="%%"){return}s++;if(e==="%c"){n=s}}));t.splice(n,0,r)}t.log=console.debug||console.log||(()=>{});function save(e){try{if(e){t.storage.setItem("debug",e)}else{t.storage.removeItem("debug")}}catch(e){}}function load(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}function localstorage(){try{return localStorage}catch(e){}}e.exports=r(897)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},897:(e,t,r)=>{function setup(e){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=r(744);createDebug.destroy=destroy;Object.keys(e).forEach((t=>{createDebug[t]=e[t]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(e){let t=0;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r);t|=0}return createDebug.colors[Math.abs(t)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(e){let t;let r=null;let s;let n;function debug(...e){if(!debug.enabled){return}const r=debug;const s=Number(new Date);const n=s-(t||s);r.diff=n;r.prev=t;r.curr=s;t=s;e[0]=createDebug.coerce(e[0]);if(typeof e[0]!=="string"){e.unshift("%O")}let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,s)=>{if(t==="%%"){return"%"}i++;const n=createDebug.formatters[s];if(typeof n==="function"){const s=e[i];t=n.call(r,s);e.splice(i,1);i--}return t}));createDebug.formatArgs.call(r,e);const o=r.log||createDebug.log;o.apply(r,e)}debug.namespace=e;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(e);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(r!==null){return r}if(s!==createDebug.namespaces){s=createDebug.namespaces;n=createDebug.enabled(e)}return n},set:e=>{r=e}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(e,t){const r=createDebug(this.namespace+(typeof t==="undefined"?":":t)+e);r.log=this.log;return r}function enable(e){createDebug.save(e);createDebug.namespaces=e;createDebug.names=[];createDebug.skips=[];const t=(typeof e==="string"?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const e of t){if(e[0]==="-"){createDebug.skips.push(e.slice(1))}else{createDebug.names.push(e)}}}function matchesTemplate(e,t){let r=0;let s=0;let n=-1;let i=0;while(r<e.length){if(s<t.length&&(t[s]===e[r]||t[s]==="*")){if(t[s]==="*"){n=s;i=r;s++}else{r++;s++}}else if(n!==-1){s=n+1;i++;r=i}else{return false}}while(s<t.length&&t[s]==="*"){s++}return s===t.length}function disable(){const e=[...createDebug.names,...createDebug.skips.map((e=>"-"+e))].join(",");createDebug.enable("");return e}function enabled(e){for(const t of createDebug.skips){if(matchesTemplate(e,t)){return false}}for(const t of createDebug.names){if(matchesTemplate(e,t)){return true}}return false}function coerce(e){if(e instanceof Error){return e.stack||e.message}return e}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}e.exports=setup},2830:(e,t,r)=>{if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){e.exports=r(6110)}else{e.exports=r(5108)}},5108:(e,t,r)=>{const s=r(2018);const n=r(9023);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.destroy=n.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");t.colors=[6,2,3,4,5,1];try{const e=r(1450);if(e&&(e.stderr||e).level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];if(/^(yes|on|true|enabled)$/i.test(s)){s=true}else if(/^(no|off|false|disabled)$/i.test(s)){s=false}else if(s==="null"){s=null}else{s=Number(s)}e[r]=s;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)}function formatArgs(t){const{namespace:r,useColors:s}=this;if(s){const s=this.color;const n="[3"+(s<8?s:"8;5;"+s);const i=`  ${n};1m${r} [0m`;t[0]=i+t[0].split("\n").join("\n"+i);t.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else{t[0]=getDate()+r+" "+t[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...e){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...e)+"\n")}function save(e){if(e){process.env.DEBUG=e}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++){e.inspectOpts[r[s]]=t.inspectOpts[r[s]]}}e.exports=r(897)(t);const{formatters:i}=e.exports;i.o=function(e){this.inspectOpts.colors=this.useColors;return n.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")};i.O=function(e){this.inspectOpts.colors=this.useColors;return n.inspect(e,this.inspectOpts)}},3813:e=>{e.exports=(e,t=process.argv)=>{const r=e.startsWith("-")?"":e.length===1?"-":"--";const s=t.indexOf(r+e);const n=t.indexOf("--");return s!==-1&&(n===-1||s<n)}},744:e=>{var t=1e3;var r=t*60;var s=r*60;var n=s*24;var i=n*7;var o=n*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return parse(e)}else if(r==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a){return}var c=parseFloat(a[1]);var u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*s;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return undefined}}function fmtShort(e){var i=Math.abs(e);if(i>=n){return Math.round(e/n)+"d"}if(i>=s){return Math.round(e/s)+"h"}if(i>=r){return Math.round(e/r)+"m"}if(i>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var i=Math.abs(e);if(i>=n){return plural(e,i,n,"day")}if(i>=s){return plural(e,i,s,"hour")}if(i>=r){return plural(e,i,r,"minute")}if(i>=t){return plural(e,i,t,"second")}return e+" ms"}function plural(e,t,r,s){var n=t>=r*1.5;return Math.round(e/r)+" "+s+(n?"s":"")}},9379:(e,t,r)=>{const s=Symbol("SemVer ANY");class Comparator{static get ANY(){return s}constructor(e,t){t=n(t);if(e instanceof Comparator){if(e.loose===!!t.loose){return e}else{e=e.value}}e=e.trim().split(/\s+/).join(" ");c("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);if(this.semver===s){this.value=""}else{this.value=this.operator+this.semver.version}c("comp",this)}parse(e){const t=this.options.loose?i[o.COMPARATORLOOSE]:i[o.COMPARATOR];const r=e.match(t);if(!r){throw new TypeError(`Invalid comparator: ${e}`)}this.operator=r[1]!==undefined?r[1]:"";if(this.operator==="="){this.operator=""}if(!r[2]){this.semver=s}else{this.semver=new u(r[2],this.options.loose)}}toString(){return this.value}test(e){c("Comparator.test",e,this.options.loose);if(this.semver===s||e===s){return true}if(typeof e==="string"){try{e=new u(e,this.options)}catch(e){return false}}return a(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Comparator)){throw new TypeError("a Comparator is required")}if(this.operator===""){if(this.value===""){return true}return new l(e.value,t).test(this.value)}else if(e.operator===""){if(e.value===""){return true}return new l(this.value,t).test(e.semver)}t=n(t);if(t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")){return false}if(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))){return false}if(this.operator.startsWith(">")&&e.operator.startsWith(">")){return true}if(this.operator.startsWith("<")&&e.operator.startsWith("<")){return true}if(this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")){return true}if(a(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")){return true}if(a(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")){return true}return false}}e.exports=Comparator;const n=r(356);const{safeRe:i,t:o}=r(5471);const a=r(8646);const c=r(1159);const u=r(7163);const l=r(6782)},6782:(e,t,r)=>{const s=/\s+/g;class Range{constructor(e,t){t=o(t);if(e instanceof Range){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{return new Range(e.raw,t)}}if(e instanceof a){this.raw=e.value;this.set=[[e]];this.formatted=undefined;return this}this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;this.raw=e.trim().replace(s," ");this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length));if(!this.set.length){throw new TypeError(`Invalid SemVer Range: ${this.raw}`)}if(this.set.length>1){const e=this.set[0];this.set=this.set.filter((e=>!isNullSet(e[0])));if(this.set.length===0){this.set=[e]}else if(this.set.length>1){for(const e of this.set){if(e.length===1&&isAny(e[0])){this.set=[e];break}}}}this.formatted=undefined}get range(){if(this.formatted===undefined){this.formatted="";for(let e=0;e<this.set.length;e++){if(e>0){this.formatted+="||"}const t=this.set[e];for(let e=0;e<t.length;e++){if(e>0){this.formatted+=" "}this.formatted+=t[e].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=(this.options.includePrerelease&&g)|(this.options.loose&&b);const r=t+":"+e;const s=i.get(r);if(s){return s}const n=this.options.loose;const o=n?l[h.HYPHENRANGELOOSE]:l[h.HYPHENRANGE];e=e.replace(o,hyphenReplace(this.options.includePrerelease));c("hyphen replace",e);e=e.replace(l[h.COMPARATORTRIM],p);c("comparator trim",e);e=e.replace(l[h.TILDETRIM],f);c("tilde trim",e);e=e.replace(l[h.CARETTRIM],d);c("caret trim",e);let u=e.split(" ").map((e=>parseComparator(e,this.options))).join(" ").split(/\s+/).map((e=>replaceGTE0(e,this.options)));if(n){u=u.filter((e=>{c("loose invalid filter",e,this.options);return!!e.match(l[h.COMPARATORLOOSE])}))}c("range list",u);const y=new Map;const w=u.map((e=>new a(e,this.options)));for(const e of w){if(isNullSet(e)){return[e]}y.set(e.value,e)}if(y.size>1&&y.has("")){y.delete("")}const _=[...y.values()];i.set(r,_);return _}intersects(e,t){if(!(e instanceof Range)){throw new TypeError("a Range is required")}return this.set.some((r=>isSatisfiable(r,t)&&e.set.some((e=>isSatisfiable(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e){return false}if(typeof e==="string"){try{e=new u(e,this.options)}catch(e){return false}}for(let t=0;t<this.set.length;t++){if(testSet(this.set[t],e,this.options)){return true}}return false}}e.exports=Range;const n=r(1383);const i=new n;const o=r(356);const a=r(9379);const c=r(1159);const u=r(7163);const{safeRe:l,t:h,comparatorTrimReplace:p,tildeTrimReplace:f,caretTrimReplace:d}=r(5471);const{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:b}=r(5101);const isNullSet=e=>e.value==="<0.0.0-0";const isAny=e=>e.value==="";const isSatisfiable=(e,t)=>{let r=true;const s=e.slice();let n=s.pop();while(r&&s.length){r=s.every((e=>n.intersects(e,t)));n=s.pop()}return r};const parseComparator=(e,t)=>{e=e.replace(l[h.BUILD],"");c("comp",e,t);e=replaceCarets(e,t);c("caret",e);e=replaceTildes(e,t);c("tildes",e);e=replaceXRanges(e,t);c("xrange",e);e=replaceStars(e,t);c("stars",e);return e};const isX=e=>!e||e.toLowerCase()==="x"||e==="*";const replaceTildes=(e,t)=>e.trim().split(/\s+/).map((e=>replaceTilde(e,t))).join(" ");const replaceTilde=(e,t)=>{const r=t.loose?l[h.TILDELOOSE]:l[h.TILDE];return e.replace(r,((t,r,s,n,i)=>{c("tilde",e,t,r,s,n,i);let o;if(isX(r)){o=""}else if(isX(s)){o=`>=${r}.0.0 <${+r+1}.0.0-0`}else if(isX(n)){o=`>=${r}.${s}.0 <${r}.${+s+1}.0-0`}else if(i){c("replaceTilde pr",i);o=`>=${r}.${s}.${n}-${i} <${r}.${+s+1}.0-0`}else{o=`>=${r}.${s}.${n} <${r}.${+s+1}.0-0`}c("tilde return",o);return o}))};const replaceCarets=(e,t)=>e.trim().split(/\s+/).map((e=>replaceCaret(e,t))).join(" ");const replaceCaret=(e,t)=>{c("caret",e,t);const r=t.loose?l[h.CARETLOOSE]:l[h.CARET];const s=t.includePrerelease?"-0":"";return e.replace(r,((t,r,n,i,o)=>{c("caret",e,t,r,n,i,o);let a;if(isX(r)){a=""}else if(isX(n)){a=`>=${r}.0.0${s} <${+r+1}.0.0-0`}else if(isX(i)){if(r==="0"){a=`>=${r}.${n}.0${s} <${r}.${+n+1}.0-0`}else{a=`>=${r}.${n}.0${s} <${+r+1}.0.0-0`}}else if(o){c("replaceCaret pr",o);if(r==="0"){if(n==="0"){a=`>=${r}.${n}.${i}-${o} <${r}.${n}.${+i+1}-0`}else{a=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`}}else{a=`>=${r}.${n}.${i}-${o} <${+r+1}.0.0-0`}}else{c("no pr");if(r==="0"){if(n==="0"){a=`>=${r}.${n}.${i}${s} <${r}.${n}.${+i+1}-0`}else{a=`>=${r}.${n}.${i}${s} <${r}.${+n+1}.0-0`}}else{a=`>=${r}.${n}.${i} <${+r+1}.0.0-0`}}c("caret return",a);return a}))};const replaceXRanges=(e,t)=>{c("replaceXRanges",e,t);return e.split(/\s+/).map((e=>replaceXRange(e,t))).join(" ")};const replaceXRange=(e,t)=>{e=e.trim();const r=t.loose?l[h.XRANGELOOSE]:l[h.XRANGE];return e.replace(r,((r,s,n,i,o,a)=>{c("xRange",e,r,s,n,i,o,a);const u=isX(n);const l=u||isX(i);const h=l||isX(o);const p=h;if(s==="="&&p){s=""}a=t.includePrerelease?"-0":"";if(u){if(s===">"||s==="<"){r="<0.0.0-0"}else{r="*"}}else if(s&&p){if(l){i=0}o=0;if(s===">"){s=">=";if(l){n=+n+1;i=0;o=0}else{i=+i+1;o=0}}else if(s==="<="){s="<";if(l){n=+n+1}else{i=+i+1}}if(s==="<"){a="-0"}r=`${s+n}.${i}.${o}${a}`}else if(l){r=`>=${n}.0.0${a} <${+n+1}.0.0-0`}else if(h){r=`>=${n}.${i}.0${a} <${n}.${+i+1}.0-0`}c("xRange return",r);return r}))};const replaceStars=(e,t)=>{c("replaceStars",e,t);return e.trim().replace(l[h.STAR],"")};const replaceGTE0=(e,t)=>{c("replaceGTE0",e,t);return e.trim().replace(l[t.includePrerelease?h.GTE0PRE:h.GTE0],"")};const hyphenReplace=e=>(t,r,s,n,i,o,a,c,u,l,h,p)=>{if(isX(s)){r=""}else if(isX(n)){r=`>=${s}.0.0${e?"-0":""}`}else if(isX(i)){r=`>=${s}.${n}.0${e?"-0":""}`}else if(o){r=`>=${r}`}else{r=`>=${r}${e?"-0":""}`}if(isX(u)){c=""}else if(isX(l)){c=`<${+u+1}.0.0-0`}else if(isX(h)){c=`<${u}.${+l+1}.0-0`}else if(p){c=`<=${u}.${l}.${h}-${p}`}else if(e){c=`<${u}.${l}.${+h+1}-0`}else{c=`<=${c}`}return`${r} ${c}`.trim()};const testSet=(e,t,r)=>{for(let r=0;r<e.length;r++){if(!e[r].test(t)){return false}}if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++){c(e[r].semver);if(e[r].semver===a.ANY){continue}if(e[r].semver.prerelease.length>0){const s=e[r].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch){return true}}}return false}return true}},7163:(e,t,r)=>{const s=r(1159);const{MAX_LENGTH:n,MAX_SAFE_INTEGER:i}=r(5101);const{safeRe:o,t:a}=r(5471);const c=r(356);const{compareIdentifiers:u}=r(3348);class SemVer{constructor(e,t){t=c(t);if(e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{e=e.version}}else if(typeof e!=="string"){throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`)}if(e.length>n){throw new TypeError(`version is longer than ${n} characters`)}s("SemVer",e,t);this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!r){throw new TypeError(`Invalid Version: ${e}`)}this.raw=e;this.major=+r[1];this.minor=+r[2];this.patch=+r[3];if(this.major>i||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>i||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>i||this.patch<0){throw new TypeError("Invalid patch version")}if(!r[4]){this.prerelease=[]}else{this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i){return t}}return e}))}this.build=r[5]?r[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;if(this.prerelease.length){this.version+=`-${this.prerelease.join(".")}`}return this.version}toString(){return this.version}compare(e){s("SemVer.compare",this.version,this.options,e);if(!(e instanceof SemVer)){if(typeof e==="string"&&e===this.version){return 0}e=new SemVer(e,this.options)}if(e.version===this.version){return 0}return this.compareMain(e)||this.comparePre(e)}compareMain(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}if(this.major<e.major){return-1}if(this.major>e.major){return 1}if(this.minor<e.minor){return-1}if(this.minor>e.minor){return 1}if(this.patch<e.patch){return-1}if(this.patch>e.patch){return 1}return 0}comparePre(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}if(this.prerelease.length&&!e.prerelease.length){return-1}else if(!this.prerelease.length&&e.prerelease.length){return 1}else if(!this.prerelease.length&&!e.prerelease.length){return 0}let t=0;do{const r=this.prerelease[t];const n=e.prerelease[t];s("prerelease compare",t,r,n);if(r===undefined&&n===undefined){return 0}else if(n===undefined){return 1}else if(r===undefined){return-1}else if(r===n){continue}else{return u(r,n)}}while(++t)}compareBuild(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}let t=0;do{const r=this.build[t];const n=e.build[t];s("build compare",t,r,n);if(r===undefined&&n===undefined){return 0}else if(n===undefined){return 1}else if(r===undefined){return-1}else if(r===n){continue}else{return u(r,n)}}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===false){throw new Error("invalid increment argument: identifier is empty")}if(t){const e=`-${t}`.match(this.options.loose?o[a.PRERELEASELOOSE]:o[a.PRERELEASE]);if(!e||e[1]!==t){throw new Error(`invalid identifier: ${t}`)}}}switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0;this.inc("patch",t,r);this.inc("pre",t,r);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",t,r)}this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0){throw new Error(`version ${this.raw} is not a prerelease`)}this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(this.prerelease.length===0){this.prerelease=[e]}else{let s=this.prerelease.length;while(--s>=0){if(typeof this.prerelease[s]==="number"){this.prerelease[s]++;s=-2}}if(s===-1){if(t===this.prerelease.join(".")&&r===false){throw new Error("invalid increment argument: identifier already exists")}this.prerelease.push(e)}}if(t){let s=[t,e];if(r===false){s=[t]}if(u(this.prerelease[0],t)===0){if(isNaN(this.prerelease[1])){this.prerelease=s}}else{this.prerelease=s}}break}default:throw new Error(`invalid increment argument: ${e}`)}this.raw=this.format();if(this.build.length){this.raw+=`+${this.build.join(".")}`}return this}}e.exports=SemVer},1799:(e,t,r)=>{const s=r(6353);const clean=(e,t)=>{const r=s(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};e.exports=clean},8646:(e,t,r)=>{const s=r(5082);const n=r(4974);const i=r(6599);const o=r(1236);const a=r(3872);const c=r(6717);const cmp=(e,t,r,u)=>{switch(t){case"===":if(typeof e==="object"){e=e.version}if(typeof r==="object"){r=r.version}return e===r;case"!==":if(typeof e==="object"){e=e.version}if(typeof r==="object"){r=r.version}return e!==r;case"":case"=":case"==":return s(e,r,u);case"!=":return n(e,r,u);case">":return i(e,r,u);case">=":return o(e,r,u);case"<":return a(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}};e.exports=cmp},5385:(e,t,r)=>{const s=r(7163);const n=r(6353);const{safeRe:i,t:o}=r(5471);const coerce=(e,t)=>{if(e instanceof s){return e}if(typeof e==="number"){e=String(e)}if(typeof e!=="string"){return null}t=t||{};let r=null;if(!t.rtl){r=e.match(t.includePrerelease?i[o.COERCEFULL]:i[o.COERCE])}else{const s=t.includePrerelease?i[o.COERCERTLFULL]:i[o.COERCERTL];let n;while((n=s.exec(e))&&(!r||r.index+r[0].length!==e.length)){if(!r||n.index+n[0].length!==r.index+r[0].length){r=n}s.lastIndex=n.index+n[1].length+n[2].length}s.lastIndex=-1}if(r===null){return null}const a=r[2];const c=r[3]||"0";const u=r[4]||"0";const l=t.includePrerelease&&r[5]?`-${r[5]}`:"";const h=t.includePrerelease&&r[6]?`+${r[6]}`:"";return n(`${a}.${c}.${u}${l}${h}`,t)};e.exports=coerce},7648:(e,t,r)=>{const s=r(7163);const compareBuild=(e,t,r)=>{const n=new s(e,r);const i=new s(t,r);return n.compare(i)||n.compareBuild(i)};e.exports=compareBuild},6874:(e,t,r)=>{const s=r(8469);const compareLoose=(e,t)=>s(e,t,true);e.exports=compareLoose},8469:(e,t,r)=>{const s=r(7163);const compare=(e,t,r)=>new s(e,r).compare(new s(t,r));e.exports=compare},711:(e,t,r)=>{const s=r(6353);const diff=(e,t)=>{const r=s(e,null,true);const n=s(t,null,true);const i=r.compare(n);if(i===0){return null}const o=i>0;const a=o?r:n;const c=o?n:r;const u=!!a.prerelease.length;const l=!!c.prerelease.length;if(l&&!u){if(!c.patch&&!c.minor){return"major"}if(c.compareMain(a)===0){if(c.minor&&!c.patch){return"minor"}return"patch"}}const h=u?"pre":"";if(r.major!==n.major){return h+"major"}if(r.minor!==n.minor){return h+"minor"}if(r.patch!==n.patch){return h+"patch"}return"prerelease"};e.exports=diff},5082:(e,t,r)=>{const s=r(8469);const eq=(e,t,r)=>s(e,t,r)===0;e.exports=eq},6599:(e,t,r)=>{const s=r(8469);const gt=(e,t,r)=>s(e,t,r)>0;e.exports=gt},1236:(e,t,r)=>{const s=r(8469);const gte=(e,t,r)=>s(e,t,r)>=0;e.exports=gte},2338:(e,t,r)=>{const s=r(7163);const inc=(e,t,r,n,i)=>{if(typeof r==="string"){i=n;n=r;r=undefined}try{return new s(e instanceof s?e.version:e,r).inc(t,n,i).version}catch(e){return null}};e.exports=inc},3872:(e,t,r)=>{const s=r(8469);const lt=(e,t,r)=>s(e,t,r)<0;e.exports=lt},6717:(e,t,r)=>{const s=r(8469);const lte=(e,t,r)=>s(e,t,r)<=0;e.exports=lte},8511:(e,t,r)=>{const s=r(7163);const major=(e,t)=>new s(e,t).major;e.exports=major},2603:(e,t,r)=>{const s=r(7163);const minor=(e,t)=>new s(e,t).minor;e.exports=minor},4974:(e,t,r)=>{const s=r(8469);const neq=(e,t,r)=>s(e,t,r)!==0;e.exports=neq},6353:(e,t,r)=>{const s=r(7163);const parse=(e,t,r=false)=>{if(e instanceof s){return e}try{return new s(e,t)}catch(e){if(!r){return null}throw e}};e.exports=parse},8756:(e,t,r)=>{const s=r(7163);const patch=(e,t)=>new s(e,t).patch;e.exports=patch},5714:(e,t,r)=>{const s=r(6353);const prerelease=(e,t)=>{const r=s(e,t);return r&&r.prerelease.length?r.prerelease:null};e.exports=prerelease},2173:(e,t,r)=>{const s=r(8469);const rcompare=(e,t,r)=>s(t,e,r);e.exports=rcompare},7192:(e,t,r)=>{const s=r(7648);const rsort=(e,t)=>e.sort(((e,r)=>s(r,e,t)));e.exports=rsort},8011:(e,t,r)=>{const s=r(6782);const satisfies=(e,t,r)=>{try{t=new s(t,r)}catch(e){return false}return t.test(e)};e.exports=satisfies},9872:(e,t,r)=>{const s=r(7648);const sort=(e,t)=>e.sort(((e,r)=>s(e,r,t)));e.exports=sort},8780:(e,t,r)=>{const s=r(6353);const valid=(e,t)=>{const r=s(e,t);return r?r.version:null};e.exports=valid},2088:(e,t,r)=>{const s=r(5471);const n=r(5101);const i=r(7163);const o=r(3348);const a=r(6353);const c=r(8780);const u=r(1799);const l=r(2338);const h=r(711);const p=r(8511);const f=r(2603);const d=r(8756);const g=r(5714);const b=r(8469);const y=r(2173);const w=r(6874);const _=r(7648);const v=r(9872);const E=r(7192);const T=r(6599);const O=r(3872);const C=r(5082);const k=r(4974);const A=r(1236);const S=r(6717);const x=r(8646);const $=r(5385);const R=r(9379);const P=r(6782);const N=r(8011);const I=r(4750);const L=r(3193);const F=r(8595);const M=r(1866);const D=r(4737);const G=r(280);const j=r(2276);const B=r(5213);const V=r(3465);const H=r(2028);const W=r(1489);e.exports={parse:a,valid:c,clean:u,inc:l,diff:h,major:p,minor:f,patch:d,prerelease:g,compare:b,rcompare:y,compareLoose:w,compareBuild:_,sort:v,rsort:E,gt:T,lt:O,eq:C,neq:k,gte:A,lte:S,cmp:x,coerce:$,Comparator:R,Range:P,satisfies:N,toComparators:I,maxSatisfying:L,minSatisfying:F,minVersion:M,validRange:D,outside:G,gtr:j,ltr:B,intersects:V,simplifyRange:H,subset:W,SemVer:i,re:s.re,src:s.src,tokens:s.t,SEMVER_SPEC_VERSION:n.SEMVER_SPEC_VERSION,RELEASE_TYPES:n.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},5101:e=>{const t="2.0.0";const r=256;const s=Number.MAX_SAFE_INTEGER||9007199254740991;const n=16;const i=r-6;const o=["major","premajor","minor","preminor","patch","prepatch","prerelease"];e.exports={MAX_LENGTH:r,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:s,RELEASE_TYPES:o,SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},1159:e=>{const t=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},3348:e=>{const t=/^[0-9]+$/;const compareIdentifiers=(e,r)=>{if(typeof e==="number"&&typeof r==="number"){return e===r?0:e<r?-1:1}const s=t.test(e);const n=t.test(r);if(s&&n){e=+e;r=+r}return e===r?0:s&&!n?-1:n&&!s?1:e<r?-1:1};const rcompareIdentifiers=(e,t)=>compareIdentifiers(t,e);e.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:rcompareIdentifiers}},1383:e=>{class LRUCache{constructor(){this.max=1e3;this.map=new Map}get(e){const t=this.map.get(e);if(t===undefined){return undefined}else{this.map.delete(e);this.map.set(e,t);return t}}delete(e){return this.map.delete(e)}set(e,t){const r=this.delete(e);if(!r&&t!==undefined){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=LRUCache},356:e=>{const t=Object.freeze({loose:true});const r=Object.freeze({});const parseOptions=e=>{if(!e){return r}if(typeof e!=="object"){return t}return e};e.exports=parseOptions},5471:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=r(5101);const o=r(1159);t=e.exports={};const a=t.re=[];const c=t.safeRe=[];const u=t.src=[];const l=t.safeSrc=[];const h=t.t={};let p=0;const f="[a-zA-Z0-9-]";const d=[["\\s",1],["\\d",i],[f,n]];const makeSafeRegex=e=>{for(const[t,r]of d){e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`)}return e};const createToken=(e,t,r)=>{const s=makeSafeRegex(t);const n=p++;o(e,n,t);h[e]=n;u[n]=t;l[n]=s;a[n]=new RegExp(t,r?"g":undefined);c[n]=new RegExp(s,r?"g":undefined)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*");createToken("NUMERICIDENTIFIERLOOSE","\\d+");createToken("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`);createToken("MAINVERSION",`(${u[h.NUMERICIDENTIFIER]})\\.`+`(${u[h.NUMERICIDENTIFIER]})\\.`+`(${u[h.NUMERICIDENTIFIER]})`);createToken("MAINVERSIONLOOSE",`(${u[h.NUMERICIDENTIFIERLOOSE]})\\.`+`(${u[h.NUMERICIDENTIFIERLOOSE]})\\.`+`(${u[h.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASEIDENTIFIER",`(?:${u[h.NONNUMERICIDENTIFIER]}|${u[h.NUMERICIDENTIFIER]})`);createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${u[h.NONNUMERICIDENTIFIER]}|${u[h.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASE",`(?:-(${u[h.PRERELEASEIDENTIFIER]}(?:\\.${u[h.PRERELEASEIDENTIFIER]})*))`);createToken("PRERELEASELOOSE",`(?:-?(${u[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[h.PRERELEASEIDENTIFIERLOOSE]})*))`);createToken("BUILDIDENTIFIER",`${f}+`);createToken("BUILD",`(?:\\+(${u[h.BUILDIDENTIFIER]}(?:\\.${u[h.BUILDIDENTIFIER]})*))`);createToken("FULLPLAIN",`v?${u[h.MAINVERSION]}${u[h.PRERELEASE]}?${u[h.BUILD]}?`);createToken("FULL",`^${u[h.FULLPLAIN]}$`);createToken("LOOSEPLAIN",`[v=\\s]*${u[h.MAINVERSIONLOOSE]}${u[h.PRERELEASELOOSE]}?${u[h.BUILD]}?`);createToken("LOOSE",`^${u[h.LOOSEPLAIN]}$`);createToken("GTLT","((?:<|>)?=?)");createToken("XRANGEIDENTIFIERLOOSE",`${u[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);createToken("XRANGEIDENTIFIER",`${u[h.NUMERICIDENTIFIER]}|x|X|\\*`);createToken("XRANGEPLAIN",`[v=\\s]*(${u[h.XRANGEIDENTIFIER]})`+`(?:\\.(${u[h.XRANGEIDENTIFIER]})`+`(?:\\.(${u[h.XRANGEIDENTIFIER]})`+`(?:${u[h.PRERELEASE]})?${u[h.BUILD]}?`+`)?)?`);createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${u[h.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})`+`(?:${u[h.PRERELEASELOOSE]})?${u[h.BUILD]}?`+`)?)?`);createToken("XRANGE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAIN]}$`);createToken("XRANGELOOSE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAINLOOSE]}$`);createToken("COERCEPLAIN",`${"(^|[^\\d])"+"(\\d{1,"}${s}})`+`(?:\\.(\\d{1,${s}}))?`+`(?:\\.(\\d{1,${s}}))?`);createToken("COERCE",`${u[h.COERCEPLAIN]}(?:$|[^\\d])`);createToken("COERCEFULL",u[h.COERCEPLAIN]+`(?:${u[h.PRERELEASE]})?`+`(?:${u[h.BUILD]})?`+`(?:$|[^\\d])`);createToken("COERCERTL",u[h.COERCE],true);createToken("COERCERTLFULL",u[h.COERCEFULL],true);createToken("LONETILDE","(?:~>?)");createToken("TILDETRIM",`(\\s*)${u[h.LONETILDE]}\\s+`,true);t.tildeTrimReplace="$1~";createToken("TILDE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAIN]}$`);createToken("TILDELOOSE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAINLOOSE]}$`);createToken("LONECARET","(?:\\^)");createToken("CARETTRIM",`(\\s*)${u[h.LONECARET]}\\s+`,true);t.caretTrimReplace="$1^";createToken("CARET",`^${u[h.LONECARET]}${u[h.XRANGEPLAIN]}$`);createToken("CARETLOOSE",`^${u[h.LONECARET]}${u[h.XRANGEPLAINLOOSE]}$`);createToken("COMPARATORLOOSE",`^${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]})$|^$`);createToken("COMPARATOR",`^${u[h.GTLT]}\\s*(${u[h.FULLPLAIN]})$|^$`);createToken("COMPARATORTRIM",`(\\s*)${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]}|${u[h.XRANGEPLAIN]})`,true);t.comparatorTrimReplace="$1$2$3";createToken("HYPHENRANGE",`^\\s*(${u[h.XRANGEPLAIN]})`+`\\s+-\\s+`+`(${u[h.XRANGEPLAIN]})`+`\\s*$`);createToken("HYPHENRANGELOOSE",`^\\s*(${u[h.XRANGEPLAINLOOSE]})`+`\\s+-\\s+`+`(${u[h.XRANGEPLAINLOOSE]})`+`\\s*$`);createToken("STAR","(<|>)?=?\\s*\\*");createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},2276:(e,t,r)=>{const s=r(280);const gtr=(e,t,r)=>s(e,t,">",r);e.exports=gtr},3465:(e,t,r)=>{const s=r(6782);const intersects=(e,t,r)=>{e=new s(e,r);t=new s(t,r);return e.intersects(t,r)};e.exports=intersects},5213:(e,t,r)=>{const s=r(280);const ltr=(e,t,r)=>s(e,t,"<",r);e.exports=ltr},3193:(e,t,r)=>{const s=r(7163);const n=r(6782);const maxSatisfying=(e,t,r)=>{let i=null;let o=null;let a=null;try{a=new n(t,r)}catch(e){return null}e.forEach((e=>{if(a.test(e)){if(!i||o.compare(e)===-1){i=e;o=new s(i,r)}}}));return i};e.exports=maxSatisfying},8595:(e,t,r)=>{const s=r(7163);const n=r(6782);const minSatisfying=(e,t,r)=>{let i=null;let o=null;let a=null;try{a=new n(t,r)}catch(e){return null}e.forEach((e=>{if(a.test(e)){if(!i||o.compare(e)===1){i=e;o=new s(i,r)}}}));return i};e.exports=minSatisfying},1866:(e,t,r)=>{const s=r(7163);const n=r(6782);const i=r(6599);const minVersion=(e,t)=>{e=new n(e,t);let r=new s("0.0.0");if(e.test(r)){return r}r=new s("0.0.0-0");if(e.test(r)){return r}r=null;for(let t=0;t<e.set.length;++t){const n=e.set[t];let o=null;n.forEach((e=>{const t=new s(e.semver.version);switch(e.operator){case">":if(t.prerelease.length===0){t.patch++}else{t.prerelease.push(0)}t.raw=t.format();case"":case">=":if(!o||i(t,o)){o=t}break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}));if(o&&(!r||i(r,o))){r=o}}if(r&&e.test(r)){return r}return null};e.exports=minVersion},280:(e,t,r)=>{const s=r(7163);const n=r(9379);const{ANY:i}=n;const o=r(6782);const a=r(8011);const c=r(6599);const u=r(3872);const l=r(6717);const h=r(1236);const outside=(e,t,r,p)=>{e=new s(e,p);t=new o(t,p);let f,d,g,b,y;switch(r){case">":f=c;d=l;g=u;b=">";y=">=";break;case"<":f=u;d=h;g=c;b="<";y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p)){return false}for(let r=0;r<t.set.length;++r){const s=t.set[r];let o=null;let a=null;s.forEach((e=>{if(e.semver===i){e=new n(">=0.0.0")}o=o||e;a=a||e;if(f(e.semver,o.semver,p)){o=e}else if(g(e.semver,a.semver,p)){a=e}}));if(o.operator===b||o.operator===y){return false}if((!a.operator||a.operator===b)&&d(e,a.semver)){return false}else if(a.operator===y&&g(e,a.semver)){return false}}return true};e.exports=outside},2028:(e,t,r)=>{const s=r(8011);const n=r(8469);e.exports=(e,t,r)=>{const i=[];let o=null;let a=null;const c=e.sort(((e,t)=>n(e,t,r)));for(const e of c){const n=s(e,t,r);if(n){a=e;if(!o){o=e}}else{if(a){i.push([o,a])}a=null;o=null}}if(o){i.push([o,null])}const u=[];for(const[e,t]of i){if(e===t){u.push(e)}else if(!t&&e===c[0]){u.push("*")}else if(!t){u.push(`>=${e}`)}else if(e===c[0]){u.push(`<=${t}`)}else{u.push(`${e} - ${t}`)}}const l=u.join(" || ");const h=typeof t.raw==="string"?t.raw:String(t);return l.length<h.length?l:t}},1489:(e,t,r)=>{const s=r(6782);const n=r(9379);const{ANY:i}=n;const o=r(8011);const a=r(8469);const subset=(e,t,r={})=>{if(e===t){return true}e=new s(e,r);t=new s(t,r);let n=false;e:for(const s of e.set){for(const e of t.set){const t=simpleSubset(s,e,r);n=n||t!==null;if(t){continue e}}if(n){return false}}return true};const c=[new n(">=0.0.0-0")];const u=[new n(">=0.0.0")];const simpleSubset=(e,t,r)=>{if(e===t){return true}if(e.length===1&&e[0].semver===i){if(t.length===1&&t[0].semver===i){return true}else if(r.includePrerelease){e=c}else{e=u}}if(t.length===1&&t[0].semver===i){if(r.includePrerelease){return true}else{t=u}}const s=new Set;let n,l;for(const t of e){if(t.operator===">"||t.operator===">="){n=higherGT(n,t,r)}else if(t.operator==="<"||t.operator==="<="){l=lowerLT(l,t,r)}else{s.add(t.semver)}}if(s.size>1){return null}let h;if(n&&l){h=a(n.semver,l.semver,r);if(h>0){return null}else if(h===0&&(n.operator!==">="||l.operator!=="<=")){return null}}for(const e of s){if(n&&!o(e,String(n),r)){return null}if(l&&!o(e,String(l),r)){return null}for(const s of t){if(!o(e,String(s),r)){return false}}return true}let p,f;let d,g;let b=l&&!r.includePrerelease&&l.semver.prerelease.length?l.semver:false;let y=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:false;if(b&&b.prerelease.length===1&&l.operator==="<"&&b.prerelease[0]===0){b=false}for(const e of t){g=g||e.operator===">"||e.operator===">=";d=d||e.operator==="<"||e.operator==="<=";if(n){if(y){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch){y=false}}if(e.operator===">"||e.operator===">="){p=higherGT(n,e,r);if(p===e&&p!==n){return false}}else if(n.operator===">="&&!o(n.semver,String(e),r)){return false}}if(l){if(b){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch){b=false}}if(e.operator==="<"||e.operator==="<="){f=lowerLT(l,e,r);if(f===e&&f!==l){return false}}else if(l.operator==="<="&&!o(l.semver,String(e),r)){return false}}if(!e.operator&&(l||n)&&h!==0){return false}}if(n&&d&&!l&&h!==0){return false}if(l&&g&&!n&&h!==0){return false}if(y||b){return false}return true};const higherGT=(e,t,r)=>{if(!e){return t}const s=a(e.semver,t.semver,r);return s>0?e:s<0?t:t.operator===">"&&e.operator===">="?t:e};const lowerLT=(e,t,r)=>{if(!e){return t}const s=a(e.semver,t.semver,r);return s<0?e:s>0?t:t.operator==="<"&&e.operator==="<="?t:e};e.exports=subset},4750:(e,t,r)=>{const s=r(6782);const toComparators=(e,t)=>new s(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));e.exports=toComparators},4737:(e,t,r)=>{const s=r(6782);const validRange=(e,t)=>{try{return new s(e,t).range||"*"}catch(e){return null}};e.exports=validRange},1450:(e,t,r)=>{const s=r(857);const n=r(2018);const i=r(3813);const{env:o}=process;let a;if(i("no-color")||i("no-colors")||i("color=false")||i("color=never")){a=0}else if(i("color")||i("colors")||i("color=true")||i("color=always")){a=1}if("FORCE_COLOR"in o){if(o.FORCE_COLOR==="true"){a=1}else if(o.FORCE_COLOR==="false"){a=0}else{a=o.FORCE_COLOR.length===0?1:Math.min(parseInt(o.FORCE_COLOR,10),3)}}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e,t){if(a===0){return 0}if(i("color=16m")||i("color=full")||i("color=truecolor")){return 3}if(i("color=256")){return 2}if(e&&!t&&a===undefined){return 0}const r=a||0;if(o.TERM==="dumb"){return r}if(process.platform==="win32"){const e=s.release().split(".");if(Number(e[0])>=10&&Number(e[2])>=10586){return Number(e[2])>=14931?3:2}return 1}if("CI"in o){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||o.CI_NAME==="codeship"){return 1}return r}if("TEAMCITY_VERSION"in o){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0}if(o.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(o.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)){return 1}if("COLORTERM"in o){return 1}return r}function getSupportLevel(e){const t=supportsColor(e,e&&e.isTTY);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(true,n.isatty(1))),stderr:translateLevel(supportsColor(true,n.isatty(2)))}},445:e=>{function webpackEmptyAsyncContext(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}))}webpackEmptyAsyncContext.keys=()=>[];webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext;webpackEmptyAsyncContext.id=445;e.exports=webpackEmptyAsyncContext},9896:t=>{t.exports=e(import.meta.url)("fs")},1421:t=>{t.exports=e(import.meta.url)("node:child_process")},8474:t=>{t.exports=e(import.meta.url)("node:events")},3024:t=>{t.exports=e(import.meta.url)("node:fs")},6760:t=>{t.exports=e(import.meta.url)("node:path")},1708:t=>{t.exports=e(import.meta.url)("node:process")},857:t=>{t.exports=e(import.meta.url)("os")},2203:t=>{t.exports=e(import.meta.url)("stream")},2018:t=>{t.exports=e(import.meta.url)("tty")},9023:t=>{t.exports=e(import.meta.url)("util")},8909:(e,t,r)=>{const{Argument:s}=r(9154);const{Command:n}=r(4348);const{CommanderError:i,InvalidArgumentError:o}=r(1135);const{Help:a}=r(9754);const{Option:c}=r(5240);t.DM=new n;t.gu=e=>new n(e);t.Ww=(e,t)=>new c(e,t);t.er=(e,t)=>new s(e,t);t.uB=n;t.c$=c;t.ef=s;t._V=a;t.b7=i;t.Di=o;t.a2=o},9154:(e,t,r)=>{const{InvalidArgumentError:s}=r(1135);class Argument{constructor(e,t){this.description=t||"";this.variadic=false;this.parseArg=undefined;this.defaultValue=undefined;this.defaultValueDescription=undefined;this.argChoices=undefined;switch(e[0]){case"<":this.required=true;this._name=e.slice(1,-1);break;case"[":this.required=false;this._name=e.slice(1,-1);break;default:this.required=true;this._name=e;break}if(this._name.endsWith("...")){this.variadic=true;this._name=this._name.slice(0,-3)}}name(){return this._name}_collectValue(e,t){if(t===this.defaultValue||!Array.isArray(t)){return[e]}t.push(e);return t}default(e,t){this.defaultValue=e;this.defaultValueDescription=t;return this}argParser(e){this.parseArg=e;return this}choices(e){this.argChoices=e.slice();this.parseArg=(e,t)=>{if(!this.argChoices.includes(e)){throw new s(`Allowed choices are ${this.argChoices.join(", ")}.`)}if(this.variadic){return this._collectValue(e,t)}return e};return this}argRequired(){this.required=true;return this}argOptional(){this.required=false;return this}}function humanReadableArgName(e){const t=e.name()+(e.variadic===true?"...":"");return e.required?"<"+t+">":"["+t+"]"}t.Argument=Argument;t.humanReadableArgName=humanReadableArgName},4348:(e,t,r)=>{const s=r(8474).EventEmitter;const n=r(1421);const i=r(6760);const o=r(3024);const a=r(1708);const{Argument:c,humanReadableArgName:u}=r(9154);const{CommanderError:l}=r(1135);const{Help:h,stripColor:p}=r(9754);const{Option:f,DualOptions:d}=r(5240);const{suggestSimilar:g}=r(5030);class Command extends s{constructor(e){super();this.commands=[];this.options=[];this.parent=null;this._allowUnknownOption=false;this._allowExcessArguments=false;this.registeredArguments=[];this._args=this.registeredArguments;this.args=[];this.rawArgs=[];this.processedArgs=[];this._scriptPath=null;this._name=e||"";this._optionValues={};this._optionValueSources={};this._storeOptionsAsProperties=false;this._actionHandler=null;this._executableHandler=false;this._executableFile=null;this._executableDir=null;this._defaultCommandName=null;this._exitCallback=null;this._aliases=[];this._combineFlagAndOptionalValue=true;this._description="";this._summary="";this._argsDescription=undefined;this._enablePositionalOptions=false;this._passThroughOptions=false;this._lifeCycleHooks={};this._showHelpAfterError=false;this._showSuggestionAfterError=true;this._savedState=null;this._outputConfiguration={writeOut:e=>a.stdout.write(e),writeErr:e=>a.stderr.write(e),outputError:(e,t)=>t(e),getOutHelpWidth:()=>a.stdout.isTTY?a.stdout.columns:undefined,getErrHelpWidth:()=>a.stderr.isTTY?a.stderr.columns:undefined,getOutHasColors:()=>useColor()??(a.stdout.isTTY&&a.stdout.hasColors?.()),getErrHasColors:()=>useColor()??(a.stderr.isTTY&&a.stderr.hasColors?.()),stripColor:e=>p(e)};this._hidden=false;this._helpOption=undefined;this._addImplicitHelpCommand=undefined;this._helpCommand=undefined;this._helpConfiguration={};this._helpGroupHeading=undefined;this._defaultCommandGroup=undefined;this._defaultOptionGroup=undefined}copyInheritedSettings(e){this._outputConfiguration=e._outputConfiguration;this._helpOption=e._helpOption;this._helpCommand=e._helpCommand;this._helpConfiguration=e._helpConfiguration;this._exitCallback=e._exitCallback;this._storeOptionsAsProperties=e._storeOptionsAsProperties;this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue;this._allowExcessArguments=e._allowExcessArguments;this._enablePositionalOptions=e._enablePositionalOptions;this._showHelpAfterError=e._showHelpAfterError;this._showSuggestionAfterError=e._showSuggestionAfterError;return this}_getCommandAndAncestors(){const e=[];for(let t=this;t;t=t.parent){e.push(t)}return e}command(e,t,r){let s=t;let n=r;if(typeof s==="object"&&s!==null){n=s;s=null}n=n||{};const[,i,o]=e.match(/([^ ]+) *(.*)/);const a=this.createCommand(i);if(s){a.description(s);a._executableHandler=true}if(n.isDefault)this._defaultCommandName=a._name;a._hidden=!!(n.noHelp||n.hidden);a._executableFile=n.executableFile||null;if(o)a.arguments(o);this._registerCommand(a);a.parent=this;a.copyInheritedSettings(this);if(s)return this;return a}createCommand(e){return new Command(e)}createHelp(){return Object.assign(new h,this.configureHelp())}configureHelp(e){if(e===undefined)return this._helpConfiguration;this._helpConfiguration=e;return this}configureOutput(e){if(e===undefined)return this._outputConfiguration;this._outputConfiguration={...this._outputConfiguration,...e};return this}showHelpAfterError(e=true){if(typeof e!=="string")e=!!e;this._showHelpAfterError=e;return this}showSuggestionAfterError(e=true){this._showSuggestionAfterError=!!e;return this}addCommand(e,t){if(!e._name){throw new Error(`Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()`)}t=t||{};if(t.isDefault)this._defaultCommandName=e._name;if(t.noHelp||t.hidden)e._hidden=true;this._registerCommand(e);e.parent=this;e._checkForBrokenPassThrough();return this}createArgument(e,t){return new c(e,t)}argument(e,t,r,s){const n=this.createArgument(e,t);if(typeof r==="function"){n.default(s).argParser(r)}else{n.default(r)}this.addArgument(n);return this}arguments(e){e.trim().split(/ +/).forEach((e=>{this.argument(e)}));return this}addArgument(e){const t=this.registeredArguments.slice(-1)[0];if(t?.variadic){throw new Error(`only the last argument can be variadic '${t.name()}'`)}if(e.required&&e.defaultValue!==undefined&&e.parseArg===undefined){throw new Error(`a default value for a required argument is never used: '${e.name()}'`)}this.registeredArguments.push(e);return this}helpCommand(e,t){if(typeof e==="boolean"){this._addImplicitHelpCommand=e;if(e&&this._defaultCommandGroup){this._initCommandGroup(this._getHelpCommand())}return this}const r=e??"help [command]";const[,s,n]=r.match(/([^ ]+) *(.*)/);const i=t??"display help for command";const o=this.createCommand(s);o.helpOption(false);if(n)o.arguments(n);if(i)o.description(i);this._addImplicitHelpCommand=true;this._helpCommand=o;if(e||t)this._initCommandGroup(o);return this}addHelpCommand(e,t){if(typeof e!=="object"){this.helpCommand(e,t);return this}this._addImplicitHelpCommand=true;this._helpCommand=e;this._initCommandGroup(e);return this}_getHelpCommand(){const e=this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"));if(e){if(this._helpCommand===undefined){this.helpCommand(undefined,undefined)}return this._helpCommand}return null}hook(e,t){const r=["preSubcommand","preAction","postAction"];if(!r.includes(e)){throw new Error(`Unexpected value for event passed to hook : '${e}'.\nExpecting one of '${r.join("', '")}'`)}if(this._lifeCycleHooks[e]){this._lifeCycleHooks[e].push(t)}else{this._lifeCycleHooks[e]=[t]}return this}exitOverride(e){if(e){this._exitCallback=e}else{this._exitCallback=e=>{if(e.code!=="commander.executeSubCommandAsync"){throw e}else{}}}return this}_exit(e,t,r){if(this._exitCallback){this._exitCallback(new l(e,t,r))}a.exit(e)}action(e){const listener=t=>{const r=this.registeredArguments.length;const s=t.slice(0,r);if(this._storeOptionsAsProperties){s[r]=this}else{s[r]=this.opts()}s.push(this);return e.apply(this,s)};this._actionHandler=listener;return this}createOption(e,t){return new f(e,t)}_callParseArg(e,t,r,s){try{return e.parseArg(t,r)}catch(e){if(e.code==="commander.invalidArgument"){const t=`${s} ${e.message}`;this.error(t,{exitCode:e.exitCode,code:e.code})}throw e}}_registerOption(e){const t=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(t){const r=e.long&&this._findOption(e.long)?e.long:e.short;throw new Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${r}'\n-  already used by option '${t.flags}'`)}this._initOptionGroup(e);this.options.push(e)}_registerCommand(e){const knownBy=e=>[e.name()].concat(e.aliases());const t=knownBy(e).find((e=>this._findCommand(e)));if(t){const r=knownBy(this._findCommand(t)).join("|");const s=knownBy(e).join("|");throw new Error(`cannot add command '${s}' as already have command '${r}'`)}this._initCommandGroup(e);this.commands.push(e)}addOption(e){this._registerOption(e);const t=e.name();const r=e.attributeName();if(e.negate){const t=e.long.replace(/^--no-/,"--");if(!this._findOption(t)){this.setOptionValueWithSource(r,e.defaultValue===undefined?true:e.defaultValue,"default")}}else if(e.defaultValue!==undefined){this.setOptionValueWithSource(r,e.defaultValue,"default")}const handleOptionValue=(t,s,n)=>{if(t==null&&e.presetArg!==undefined){t=e.presetArg}const i=this.getOptionValue(r);if(t!==null&&e.parseArg){t=this._callParseArg(e,t,i,s)}else if(t!==null&&e.variadic){t=e._collectValue(t,i)}if(t==null){if(e.negate){t=false}else if(e.isBoolean()||e.optional){t=true}else{t=""}}this.setOptionValueWithSource(r,t,n)};this.on("option:"+t,(t=>{const r=`error: option '${e.flags}' argument '${t}' is invalid.`;handleOptionValue(t,r,"cli")}));if(e.envVar){this.on("optionEnv:"+t,(t=>{const r=`error: option '${e.flags}' value '${t}' from env '${e.envVar}' is invalid.`;handleOptionValue(t,r,"env")}))}return this}_optionEx(e,t,r,s,n){if(typeof t==="object"&&t instanceof f){throw new Error("To add an Option object use addOption() instead of option() or requiredOption()")}const i=this.createOption(t,r);i.makeOptionMandatory(!!e.mandatory);if(typeof s==="function"){i.default(n).argParser(s)}else if(s instanceof RegExp){const e=s;s=(t,r)=>{const s=e.exec(t);return s?s[0]:r};i.default(n).argParser(s)}else{i.default(s)}return this.addOption(i)}option(e,t,r,s){return this._optionEx({},e,t,r,s)}requiredOption(e,t,r,s){return this._optionEx({mandatory:true},e,t,r,s)}combineFlagAndOptionalValue(e=true){this._combineFlagAndOptionalValue=!!e;return this}allowUnknownOption(e=true){this._allowUnknownOption=!!e;return this}allowExcessArguments(e=true){this._allowExcessArguments=!!e;return this}enablePositionalOptions(e=true){this._enablePositionalOptions=!!e;return this}passThroughOptions(e=true){this._passThroughOptions=!!e;this._checkForBrokenPassThrough();return this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions){throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}}storeOptionsAsProperties(e=true){if(this.options.length){throw new Error("call .storeOptionsAsProperties() before adding options")}if(Object.keys(this._optionValues).length){throw new Error("call .storeOptionsAsProperties() before setting option values")}this._storeOptionsAsProperties=!!e;return this}getOptionValue(e){if(this._storeOptionsAsProperties){return this[e]}return this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,undefined)}setOptionValueWithSource(e,t,r){if(this._storeOptionsAsProperties){this[e]=t}else{this._optionValues[e]=t}this._optionValueSources[e]=r;return this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;this._getCommandAndAncestors().forEach((r=>{if(r.getOptionValueSource(e)!==undefined){t=r.getOptionValueSource(e)}}));return t}_prepareUserArgs(e,t){if(e!==undefined&&!Array.isArray(e)){throw new Error("first parameter to parse must be array or undefined")}t=t||{};if(e===undefined&&t.from===undefined){if(a.versions?.electron){t.from="electron"}const e=a.execArgv??[];if(e.includes("-e")||e.includes("--eval")||e.includes("-p")||e.includes("--print")){t.from="eval"}}if(e===undefined){e=a.argv}this.rawArgs=e.slice();let r;switch(t.from){case undefined:case"node":this._scriptPath=e[1];r=e.slice(2);break;case"electron":if(a.defaultApp){this._scriptPath=e[1];r=e.slice(2)}else{r=e.slice(1)}break;case"user":r=e.slice(0);break;case"eval":r=e.slice(1);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);this._name=this._name||"program";return r}parse(e,t){this._prepareForParse();const r=this._prepareUserArgs(e,t);this._parseCommand([],r);return this}async parseAsync(e,t){this._prepareForParse();const r=this._prepareUserArgs(e,t);await this._parseCommand([],r);return this}_prepareForParse(){if(this._savedState===null){this.saveStateBeforeParse()}else{this.restoreStateBeforeParse()}}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.\n- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name;this._scriptPath=null;this.rawArgs=[];this._optionValues={...this._savedState._optionValues};this._optionValueSources={...this._savedState._optionValueSources};this.args=[];this.processedArgs=[]}_checkForMissingExecutable(e,t,r){if(o.existsSync(e))return;const s=t?`searched for local subcommand relative to directory '${t}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory";const n=`'${e}' does not exist\n - if '${r}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${s}`;throw new Error(n)}_executeSubCommand(e,t){t=t.slice();let r=false;const s=[".js",".ts",".tsx",".mjs",".cjs"];function findFile(e,t){const r=i.resolve(e,t);if(o.existsSync(r))return r;if(s.includes(i.extname(t)))return undefined;const n=s.find((e=>o.existsSync(`${r}${e}`)));if(n)return`${r}${n}`;return undefined}this._checkForMissingMandatoryOptions();this._checkForConflictingOptions();let c=e._executableFile||`${this._name}-${e._name}`;let u=this._executableDir||"";if(this._scriptPath){let e;try{e=o.realpathSync(this._scriptPath)}catch{e=this._scriptPath}u=i.resolve(i.dirname(e),u)}if(u){let t=findFile(u,c);if(!t&&!e._executableFile&&this._scriptPath){const r=i.basename(this._scriptPath,i.extname(this._scriptPath));if(r!==this._name){t=findFile(u,`${r}-${e._name}`)}}c=t||c}r=s.includes(i.extname(c));let h;if(a.platform!=="win32"){if(r){t.unshift(c);t=incrementNodeInspectorPort(a.execArgv).concat(t);h=n.spawn(a.argv[0],t,{stdio:"inherit"})}else{h=n.spawn(c,t,{stdio:"inherit"})}}else{this._checkForMissingExecutable(c,u,e._name);t.unshift(c);t=incrementNodeInspectorPort(a.execArgv).concat(t);h=n.spawn(a.execPath,t,{stdio:"inherit"})}if(!h.killed){const e=["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"];e.forEach((e=>{a.on(e,(()=>{if(h.killed===false&&h.exitCode===null){h.kill(e)}}))}))}const p=this._exitCallback;h.on("close",(e=>{e=e??1;if(!p){a.exit(e)}else{p(new l(e,"commander.executeSubCommandAsync","(close)"))}}));h.on("error",(t=>{if(t.code==="ENOENT"){this._checkForMissingExecutable(c,u,e._name)}else if(t.code==="EACCES"){throw new Error(`'${c}' not executable`)}if(!p){a.exit(1)}else{const e=new l(1,"commander.executeSubCommandAsync","(error)");e.nestedError=t;p(e)}}));this.runningCommand=h}_dispatchSubcommand(e,t,r){const s=this._findCommand(e);if(!s)this.help({error:true});s._prepareForParse();let n;n=this._chainOrCallSubCommandHook(n,s,"preSubcommand");n=this._chainOrCall(n,(()=>{if(s._executableHandler){this._executeSubCommand(s,t.concat(r))}else{return s._parseCommand(t,r)}}));return n}_dispatchHelpCommand(e){if(!e){this.help()}const t=this._findCommand(e);if(t&&!t._executableHandler){t.help()}return this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach(((e,t)=>{if(e.required&&this.args[t]==null){this.missingArgument(e.name())}}));if(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic){return}if(this.args.length>this.registeredArguments.length){this._excessArguments(this.args)}}_processArguments(){const myParseArg=(e,t,r)=>{let s=t;if(t!==null&&e.parseArg){const n=`error: command-argument value '${t}' is invalid for argument '${e.name()}'.`;s=this._callParseArg(e,t,r,n)}return s};this._checkNumberOfArguments();const e=[];this.registeredArguments.forEach(((t,r)=>{let s=t.defaultValue;if(t.variadic){if(r<this.args.length){s=this.args.slice(r);if(t.parseArg){s=s.reduce(((e,r)=>myParseArg(t,r,e)),t.defaultValue)}}else if(s===undefined){s=[]}}else if(r<this.args.length){s=this.args[r];if(t.parseArg){s=myParseArg(t,s,t.defaultValue)}}e[r]=s}));this.processedArgs=e}_chainOrCall(e,t){if(e?.then&&typeof e.then==="function"){return e.then((()=>t()))}return t()}_chainOrCallHooks(e,t){let r=e;const s=[];this._getCommandAndAncestors().reverse().filter((e=>e._lifeCycleHooks[t]!==undefined)).forEach((e=>{e._lifeCycleHooks[t].forEach((t=>{s.push({hookedCommand:e,callback:t})}))}));if(t==="postAction"){s.reverse()}s.forEach((e=>{r=this._chainOrCall(r,(()=>e.callback(e.hookedCommand,this)))}));return r}_chainOrCallSubCommandHook(e,t,r){let s=e;if(this._lifeCycleHooks[r]!==undefined){this._lifeCycleHooks[r].forEach((e=>{s=this._chainOrCall(s,(()=>e(this,t)))}))}return s}_parseCommand(e,t){const r=this.parseOptions(t);this._parseOptionsEnv();this._parseOptionsImplied();e=e.concat(r.operands);t=r.unknown;this.args=e.concat(t);if(e&&this._findCommand(e[0])){return this._dispatchSubcommand(e[0],e.slice(1),t)}if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name()){return this._dispatchHelpCommand(e[1])}if(this._defaultCommandName){this._outputHelpIfRequested(t);return this._dispatchSubcommand(this._defaultCommandName,e,t)}if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName){this.help({error:true})}this._outputHelpIfRequested(r.unknown);this._checkForMissingMandatoryOptions();this._checkForConflictingOptions();const checkForUnknownOptions=()=>{if(r.unknown.length>0){this.unknownOption(r.unknown[0])}};const s=`command:${this.name()}`;if(this._actionHandler){checkForUnknownOptions();this._processArguments();let r;r=this._chainOrCallHooks(r,"preAction");r=this._chainOrCall(r,(()=>this._actionHandler(this.processedArgs)));if(this.parent){r=this._chainOrCall(r,(()=>{this.parent.emit(s,e,t)}))}r=this._chainOrCallHooks(r,"postAction");return r}if(this.parent?.listenerCount(s)){checkForUnknownOptions();this._processArguments();this.parent.emit(s,e,t)}else if(e.length){if(this._findCommand("*")){return this._dispatchSubcommand("*",e,t)}if(this.listenerCount("command:*")){this.emit("command:*",e,t)}else if(this.commands.length){this.unknownCommand()}else{checkForUnknownOptions();this._processArguments()}}else if(this.commands.length){checkForUnknownOptions();this.help({error:true})}else{checkForUnknownOptions();this._processArguments()}}_findCommand(e){if(!e)return undefined;return this.commands.find((t=>t._name===e||t._aliases.includes(e)))}_findOption(e){return this.options.find((t=>t.is(e)))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((e=>{e.options.forEach((t=>{if(t.mandatory&&e.getOptionValue(t.attributeName())===undefined){e.missingMandatoryOptionValue(t)}}))}))}_checkForConflictingLocalOptions(){const e=this.options.filter((e=>{const t=e.attributeName();if(this.getOptionValue(t)===undefined){return false}return this.getOptionValueSource(t)!=="default"}));const t=e.filter((e=>e.conflictsWith.length>0));t.forEach((t=>{const r=e.find((e=>t.conflictsWith.includes(e.attributeName())));if(r){this._conflictingOption(t,r)}}))}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((e=>{e._checkForConflictingLocalOptions()}))}parseOptions(e){const t=[];const r=[];let s=t;function maybeOption(e){return e.length>1&&e[0]==="-"}const negativeNumberArg=e=>{if(!/^-(\d+|\d*\.\d+)(e[+-]?\d+)?$/.test(e))return false;return!this._getCommandAndAncestors().some((e=>e.options.map((e=>e.short)).some((e=>/^-\d$/.test(e)))))};let n=null;let i=null;let o=0;while(o<e.length||i){const a=i??e[o++];i=null;if(a==="--"){if(s===r)s.push(a);s.push(...e.slice(o));break}if(n&&(!maybeOption(a)||negativeNumberArg(a))){this.emit(`option:${n.name()}`,a);continue}n=null;if(maybeOption(a)){const t=this._findOption(a);if(t){if(t.required){const r=e[o++];if(r===undefined)this.optionMissingArgument(t);this.emit(`option:${t.name()}`,r)}else if(t.optional){let r=null;if(o<e.length&&(!maybeOption(e[o])||negativeNumberArg(e[o]))){r=e[o++]}this.emit(`option:${t.name()}`,r)}else{this.emit(`option:${t.name()}`)}n=t.variadic?t:null;continue}}if(a.length>2&&a[0]==="-"&&a[1]!=="-"){const e=this._findOption(`-${a[1]}`);if(e){if(e.required||e.optional&&this._combineFlagAndOptionalValue){this.emit(`option:${e.name()}`,a.slice(2))}else{this.emit(`option:${e.name()}`);i=`-${a.slice(2)}`}continue}}if(/^--[^=]+=/.test(a)){const e=a.indexOf("=");const t=this._findOption(a.slice(0,e));if(t&&(t.required||t.optional)){this.emit(`option:${t.name()}`,a.slice(e+1));continue}}if(s===t&&maybeOption(a)&&!(this.commands.length===0&&negativeNumberArg(a))){s=r}if((this._enablePositionalOptions||this._passThroughOptions)&&t.length===0&&r.length===0){if(this._findCommand(a)){t.push(a);r.push(...e.slice(o));break}else if(this._getHelpCommand()&&a===this._getHelpCommand().name()){t.push(a,...e.slice(o));break}else if(this._defaultCommandName){r.push(a,...e.slice(o));break}}if(this._passThroughOptions){s.push(a,...e.slice(o));break}s.push(a)}return{operands:t,unknown:r}}opts(){if(this._storeOptionsAsProperties){const e={};const t=this.options.length;for(let r=0;r<t;r++){const t=this.options[r].attributeName();e[t]=t===this._versionOptionName?this._version:this[t]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce(((e,t)=>Object.assign(e,t.opts())),{})}error(e,t){this._outputConfiguration.outputError(`${e}\n`,this._outputConfiguration.writeErr);if(typeof this._showHelpAfterError==="string"){this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`)}else if(this._showHelpAfterError){this._outputConfiguration.writeErr("\n");this.outputHelp({error:true})}const r=t||{};const s=r.exitCode||1;const n=r.code||"commander.error";this._exit(s,n,e)}_parseOptionsEnv(){this.options.forEach((e=>{if(e.envVar&&e.envVar in a.env){const t=e.attributeName();if(this.getOptionValue(t)===undefined||["default","config","env"].includes(this.getOptionValueSource(t))){if(e.required||e.optional){this.emit(`optionEnv:${e.name()}`,a.env[e.envVar])}else{this.emit(`optionEnv:${e.name()}`)}}}}))}_parseOptionsImplied(){const e=new d(this.options);const hasCustomOptionValue=e=>this.getOptionValue(e)!==undefined&&!["default","implied"].includes(this.getOptionValueSource(e));this.options.filter((t=>t.implied!==undefined&&hasCustomOptionValue(t.attributeName())&&e.valueFromOption(this.getOptionValue(t.attributeName()),t))).forEach((e=>{Object.keys(e.implied).filter((e=>!hasCustomOptionValue(e))).forEach((t=>{this.setOptionValueWithSource(t,e.implied[t],"implied")}))}))}missingArgument(e){const t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){const t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){const t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){const findBestOptionFromValue=e=>{const t=e.attributeName();const r=this.getOptionValue(t);const s=this.options.find((e=>e.negate&&t===e.attributeName()));const n=this.options.find((e=>!e.negate&&t===e.attributeName()));if(s&&(s.presetArg===undefined&&r===false||s.presetArg!==undefined&&r===s.presetArg)){return s}return n||e};const getErrorMessage=e=>{const t=findBestOptionFromValue(e);const r=t.attributeName();const s=this.getOptionValueSource(r);if(s==="env"){return`environment variable '${t.envVar}'`}return`option '${t.flags}'`};const r=`error: ${getErrorMessage(e)} cannot be used with ${getErrorMessage(t)}`;this.error(r,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let r=[];let s=this;do{const e=s.createHelp().visibleOptions(s).filter((e=>e.long)).map((e=>e.long));r=r.concat(e);s=s.parent}while(s&&!s._enablePositionalOptions);t=g(e,r)}const r=`error: unknown option '${e}'${t}`;this.error(r,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;const t=this.registeredArguments.length;const r=t===1?"":"s";const s=this.parent?` for '${this.name()}'`:"";const n=`error: too many arguments${s}. Expected ${t} argument${r} but got ${e.length}.`;this.error(n,{code:"commander.excessArguments"})}unknownCommand(){const e=this.args[0];let t="";if(this._showSuggestionAfterError){const r=[];this.createHelp().visibleCommands(this).forEach((e=>{r.push(e.name());if(e.alias())r.push(e.alias())}));t=g(e,r)}const r=`error: unknown command '${e}'${t}`;this.error(r,{code:"commander.unknownCommand"})}version(e,t,r){if(e===undefined)return this._version;this._version=e;t=t||"-V, --version";r=r||"output the version number";const s=this.createOption(t,r);this._versionOptionName=s.attributeName();this._registerOption(s);this.on("option:"+s.name(),(()=>{this._outputConfiguration.writeOut(`${e}\n`);this._exit(0,"commander.version",e)}));return this}description(e,t){if(e===undefined&&t===undefined)return this._description;this._description=e;if(t){this._argsDescription=t}return this}summary(e){if(e===undefined)return this._summary;this._summary=e;return this}alias(e){if(e===undefined)return this._aliases[0];let t=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler){t=this.commands[this.commands.length-1]}if(e===t._name)throw new Error("Command alias can't be the same as its name");const r=this.parent?._findCommand(e);if(r){const t=[r.name()].concat(r.aliases()).join("|");throw new Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${t}'`)}t._aliases.push(e);return this}aliases(e){if(e===undefined)return this._aliases;e.forEach((e=>this.alias(e)));return this}usage(e){if(e===undefined){if(this._usage)return this._usage;const e=this.registeredArguments.map((e=>u(e)));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?e:[]).join(" ")}this._usage=e;return this}name(e){if(e===undefined)return this._name;this._name=e;return this}helpGroup(e){if(e===undefined)return this._helpGroupHeading??"";this._helpGroupHeading=e;return this}commandsGroup(e){if(e===undefined)return this._defaultCommandGroup??"";this._defaultCommandGroup=e;return this}optionsGroup(e){if(e===undefined)return this._defaultOptionGroup??"";this._defaultOptionGroup=e;return this}_initOptionGroup(e){if(this._defaultOptionGroup&&!e.helpGroupHeading)e.helpGroup(this._defaultOptionGroup)}_initCommandGroup(e){if(this._defaultCommandGroup&&!e.helpGroup())e.helpGroup(this._defaultCommandGroup)}nameFromFilename(e){this._name=i.basename(e,i.extname(e));return this}executableDir(e){if(e===undefined)return this._executableDir;this._executableDir=e;return this}helpInformation(e){const t=this.createHelp();const r=this._getOutputContext(e);t.prepareContext({error:r.error,helpWidth:r.helpWidth,outputHasColors:r.hasColors});const s=t.formatHelp(this,t);if(r.hasColors)return s;return this._outputConfiguration.stripColor(s)}_getOutputContext(e){e=e||{};const t=!!e.error;let r;let s;let n;if(t){r=e=>this._outputConfiguration.writeErr(e);s=this._outputConfiguration.getErrHasColors();n=this._outputConfiguration.getErrHelpWidth()}else{r=e=>this._outputConfiguration.writeOut(e);s=this._outputConfiguration.getOutHasColors();n=this._outputConfiguration.getOutHelpWidth()}const write=e=>{if(!s)e=this._outputConfiguration.stripColor(e);return r(e)};return{error:t,write:write,hasColors:s,helpWidth:n}}outputHelp(e){let t;if(typeof e==="function"){t=e;e=undefined}const r=this._getOutputContext(e);const s={error:r.error,write:r.write,command:this};this._getCommandAndAncestors().reverse().forEach((e=>e.emit("beforeAllHelp",s)));this.emit("beforeHelp",s);let n=this.helpInformation({error:r.error});if(t){n=t(n);if(typeof n!=="string"&&!Buffer.isBuffer(n)){throw new Error("outputHelp callback must return a string or a Buffer")}}r.write(n);if(this._getHelpOption()?.long){this.emit(this._getHelpOption().long)}this.emit("afterHelp",s);this._getCommandAndAncestors().forEach((e=>e.emit("afterAllHelp",s)))}helpOption(e,t){if(typeof e==="boolean"){if(e){if(this._helpOption===null)this._helpOption=undefined;if(this._defaultOptionGroup){this._initOptionGroup(this._getHelpOption())}}else{this._helpOption=null}return this}this._helpOption=this.createOption(e??"-h, --help",t??"display help for command");if(e||t)this._initOptionGroup(this._helpOption);return this}_getHelpOption(){if(this._helpOption===undefined){this.helpOption(undefined,undefined)}return this._helpOption}addHelpOption(e){this._helpOption=e;this._initOptionGroup(e);return this}help(e){this.outputHelp(e);let t=Number(a.exitCode??0);if(t===0&&e&&typeof e!=="function"&&e.error){t=1}this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){const r=["beforeAll","before","after","afterAll"];if(!r.includes(e)){throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${r.join("', '")}'`)}const s=`${e}Help`;this.on(s,(e=>{let r;if(typeof t==="function"){r=t({error:e.error,command:e.command})}else{r=t}if(r){e.write(`${r}\n`)}}));return this}_outputHelpIfRequested(e){const t=this._getHelpOption();const r=t&&e.find((e=>t.is(e)));if(r){this.outputHelp();this._exit(0,"commander.helpDisplayed","(outputHelp)")}}}function incrementNodeInspectorPort(e){return e.map((e=>{if(!e.startsWith("--inspect")){return e}let t;let r="127.0.0.1";let s="9229";let n;if((n=e.match(/^(--inspect(-brk)?)$/))!==null){t=n[1]}else if((n=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null){t=n[1];if(/^\d+$/.test(n[3])){s=n[3]}else{r=n[3]}}else if((n=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null){t=n[1];r=n[3];s=n[4]}if(t&&s!=="0"){return`${t}=${r}:${parseInt(s)+1}`}return e}))}function useColor(){if(a.env.NO_COLOR||a.env.FORCE_COLOR==="0"||a.env.FORCE_COLOR==="false")return false;if(a.env.FORCE_COLOR||a.env.CLICOLOR_FORCE!==undefined)return true;return undefined}t.Command=Command;t.useColor=useColor},1135:(e,t)=>{class CommanderError extends Error{constructor(e,t,r){super(r);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.code=t;this.exitCode=e;this.nestedError=undefined}}class InvalidArgumentError extends CommanderError{constructor(e){super(1,"commander.invalidArgument",e);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name}}t.CommanderError=CommanderError;t.InvalidArgumentError=InvalidArgumentError},9754:(e,t,r)=>{const{humanReadableArgName:s}=r(9154);class Help{constructor(){this.helpWidth=undefined;this.minWidthToWrap=40;this.sortSubcommands=false;this.sortOptions=false;this.showGlobalOptions=false}prepareContext(e){this.helpWidth=this.helpWidth??e.helpWidth??80}visibleCommands(e){const t=e.commands.filter((e=>!e._hidden));const r=e._getHelpCommand();if(r&&!r._hidden){t.push(r)}if(this.sortSubcommands){t.sort(((e,t)=>e.name().localeCompare(t.name())))}return t}compareOptions(e,t){const getSortKey=e=>e.short?e.short.replace(/^-/,""):e.long.replace(/^--/,"");return getSortKey(e).localeCompare(getSortKey(t))}visibleOptions(e){const t=e.options.filter((e=>!e.hidden));const r=e._getHelpOption();if(r&&!r.hidden){const s=r.short&&e._findOption(r.short);const n=r.long&&e._findOption(r.long);if(!s&&!n){t.push(r)}else if(r.long&&!n){t.push(e.createOption(r.long,r.description))}else if(r.short&&!s){t.push(e.createOption(r.short,r.description))}}if(this.sortOptions){t.sort(this.compareOptions)}return t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];const t=[];for(let r=e.parent;r;r=r.parent){const e=r.options.filter((e=>!e.hidden));t.push(...e)}if(this.sortOptions){t.sort(this.compareOptions)}return t}visibleArguments(e){if(e._argsDescription){e.registeredArguments.forEach((t=>{t.description=t.description||e._argsDescription[t.name()]||""}))}if(e.registeredArguments.find((e=>e.description))){return e.registeredArguments}return[]}subcommandTerm(e){const t=e.registeredArguments.map((e=>s(e))).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce(((e,r)=>Math.max(e,this.displayWidth(t.styleSubcommandTerm(t.subcommandTerm(r))))),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce(((e,r)=>Math.max(e,this.displayWidth(t.styleOptionTerm(t.optionTerm(r))))),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce(((e,r)=>Math.max(e,this.displayWidth(t.styleOptionTerm(t.optionTerm(r))))),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce(((e,r)=>Math.max(e,this.displayWidth(t.styleArgumentTerm(t.argumentTerm(r))))),0)}commandUsage(e){let t=e._name;if(e._aliases[0]){t=t+"|"+e._aliases[0]}let r="";for(let t=e.parent;t;t=t.parent){r=t.name()+" "+r}return r+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){const t=[];if(e.argChoices){t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`)}if(e.defaultValue!==undefined){const r=e.required||e.optional||e.isBoolean()&&typeof e.defaultValue==="boolean";if(r){t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`)}}if(e.presetArg!==undefined&&e.optional){t.push(`preset: ${JSON.stringify(e.presetArg)}`)}if(e.envVar!==undefined){t.push(`env: ${e.envVar}`)}if(t.length>0){const r=`(${t.join(", ")})`;if(e.description){return`${e.description} ${r}`}return r}return e.description}argumentDescription(e){const t=[];if(e.argChoices){t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`)}if(e.defaultValue!==undefined){t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`)}if(t.length>0){const r=`(${t.join(", ")})`;if(e.description){return`${e.description} ${r}`}return r}return e.description}formatItemList(e,t,r){if(t.length===0)return[];return[r.styleTitle(e),...t,""]}groupItems(e,t,r){const s=new Map;e.forEach((e=>{const t=r(e);if(!s.has(t))s.set(t,[])}));t.forEach((e=>{const t=r(e);if(!s.has(t)){s.set(t,[])}s.get(t).push(e)}));return s}formatHelp(e,t){const r=t.padWidth(e,t);const s=t.helpWidth??80;function callFormatItem(e,s){return t.formatItem(e,r,s,t)}let n=[`${t.styleTitle("Usage:")} ${t.styleUsage(t.commandUsage(e))}`,""];const i=t.commandDescription(e);if(i.length>0){n=n.concat([t.boxWrap(t.styleCommandDescription(i),s),""])}const o=t.visibleArguments(e).map((e=>callFormatItem(t.styleArgumentTerm(t.argumentTerm(e)),t.styleArgumentDescription(t.argumentDescription(e)))));n=n.concat(this.formatItemList("Arguments:",o,t));const a=this.groupItems(e.options,t.visibleOptions(e),(e=>e.helpGroupHeading??"Options:"));a.forEach(((e,r)=>{const s=e.map((e=>callFormatItem(t.styleOptionTerm(t.optionTerm(e)),t.styleOptionDescription(t.optionDescription(e)))));n=n.concat(this.formatItemList(r,s,t))}));if(t.showGlobalOptions){const r=t.visibleGlobalOptions(e).map((e=>callFormatItem(t.styleOptionTerm(t.optionTerm(e)),t.styleOptionDescription(t.optionDescription(e)))));n=n.concat(this.formatItemList("Global Options:",r,t))}const c=this.groupItems(e.commands,t.visibleCommands(e),(e=>e.helpGroup()||"Commands:"));c.forEach(((e,r)=>{const s=e.map((e=>callFormatItem(t.styleSubcommandTerm(t.subcommandTerm(e)),t.styleSubcommandDescription(t.subcommandDescription(e)))));n=n.concat(this.formatItemList(r,s,t))}));return n.join("\n")}displayWidth(e){return stripColor(e).length}styleTitle(e){return e}styleUsage(e){return e.split(" ").map((e=>{if(e==="[options]")return this.styleOptionText(e);if(e==="[command]")return this.styleSubcommandText(e);if(e[0]==="["||e[0]==="<")return this.styleArgumentText(e);return this.styleCommandText(e)})).join(" ")}styleCommandDescription(e){return this.styleDescriptionText(e)}styleOptionDescription(e){return this.styleDescriptionText(e)}styleSubcommandDescription(e){return this.styleDescriptionText(e)}styleArgumentDescription(e){return this.styleDescriptionText(e)}styleDescriptionText(e){return e}styleOptionTerm(e){return this.styleOptionText(e)}styleSubcommandTerm(e){return e.split(" ").map((e=>{if(e==="[options]")return this.styleOptionText(e);if(e[0]==="["||e[0]==="<")return this.styleArgumentText(e);return this.styleSubcommandText(e)})).join(" ")}styleArgumentTerm(e){return this.styleArgumentText(e)}styleOptionText(e){return e}styleArgumentText(e){return e}styleSubcommandText(e){return e}styleCommandText(e){return e}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}preformatted(e){return/\n[^\S\r\n]/.test(e)}formatItem(e,t,r,s){const n=2;const i=" ".repeat(n);if(!r)return i+e;const o=e.padEnd(t+e.length-s.displayWidth(e));const a=2;const c=this.helpWidth??80;const u=c-t-a-n;let l;if(u<this.minWidthToWrap||s.preformatted(r)){l=r}else{const e=s.boxWrap(r,u);l=e.replace(/\n/g,"\n"+" ".repeat(t+a))}return i+o+" ".repeat(a)+l.replace(/\n/g,`\n${i}`)}boxWrap(e,t){if(t<this.minWidthToWrap)return e;const r=e.split(/\r\n|\n/);const s=/[\s]*[^\s]+/g;const n=[];r.forEach((e=>{const r=e.match(s);if(r===null){n.push("");return}let i=[r.shift()];let o=this.displayWidth(i[0]);r.forEach((e=>{const r=this.displayWidth(e);if(o+r<=t){i.push(e);o+=r;return}n.push(i.join(""));const s=e.trimStart();i=[s];o=this.displayWidth(s)}));n.push(i.join(""))}));return n.join("\n")}}function stripColor(e){const t=/\x1b\[\d*(;\d*)*m/g;return e.replace(t,"")}t.Help=Help;t.stripColor=stripColor},5240:(e,t,r)=>{const{InvalidArgumentError:s}=r(1135);class Option{constructor(e,t){this.flags=e;this.description=t||"";this.required=e.includes("<");this.optional=e.includes("[");this.variadic=/\w\.\.\.[>\]]$/.test(e);this.mandatory=false;const r=splitOptionFlags(e);this.short=r.shortFlag;this.long=r.longFlag;this.negate=false;if(this.long){this.negate=this.long.startsWith("--no-")}this.defaultValue=undefined;this.defaultValueDescription=undefined;this.presetArg=undefined;this.envVar=undefined;this.parseArg=undefined;this.hidden=false;this.argChoices=undefined;this.conflictsWith=[];this.implied=undefined;this.helpGroupHeading=undefined}default(e,t){this.defaultValue=e;this.defaultValueDescription=t;return this}preset(e){this.presetArg=e;return this}conflicts(e){this.conflictsWith=this.conflictsWith.concat(e);return this}implies(e){let t=e;if(typeof e==="string"){t={[e]:true}}this.implied=Object.assign(this.implied||{},t);return this}env(e){this.envVar=e;return this}argParser(e){this.parseArg=e;return this}makeOptionMandatory(e=true){this.mandatory=!!e;return this}hideHelp(e=true){this.hidden=!!e;return this}_collectValue(e,t){if(t===this.defaultValue||!Array.isArray(t)){return[e]}t.push(e);return t}choices(e){this.argChoices=e.slice();this.parseArg=(e,t)=>{if(!this.argChoices.includes(e)){throw new s(`Allowed choices are ${this.argChoices.join(", ")}.`)}if(this.variadic){return this._collectValue(e,t)}return e};return this}name(){if(this.long){return this.long.replace(/^--/,"")}return this.short.replace(/^-/,"")}attributeName(){if(this.negate){return camelcase(this.name().replace(/^no-/,""))}return camelcase(this.name())}helpGroup(e){this.helpGroupHeading=e;return this}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class DualOptions{constructor(e){this.positiveOptions=new Map;this.negativeOptions=new Map;this.dualOptions=new Set;e.forEach((e=>{if(e.negate){this.negativeOptions.set(e.attributeName(),e)}else{this.positiveOptions.set(e.attributeName(),e)}}));this.negativeOptions.forEach(((e,t)=>{if(this.positiveOptions.has(t)){this.dualOptions.add(t)}}))}valueFromOption(e,t){const r=t.attributeName();if(!this.dualOptions.has(r))return true;const s=this.negativeOptions.get(r).presetArg;const n=s!==undefined?s:false;return t.negate===(n===e)}}function camelcase(e){return e.split("-").reduce(((e,t)=>e+t[0].toUpperCase()+t.slice(1)))}function splitOptionFlags(e){let t;let r;const s=/^-[^-]$/;const n=/^--[^-]/;const i=e.split(/[ |,]+/).concat("guard");if(s.test(i[0]))t=i.shift();if(n.test(i[0]))r=i.shift();if(!t&&s.test(i[0]))t=i.shift();if(!t&&n.test(i[0])){t=r;r=i.shift()}if(i[0].startsWith("-")){const t=i[0];const r=`option creation failed due to '${t}' in option flags '${e}'`;if(/^-[^-][^-]/.test(t))throw new Error(`${r}\n- a short flag is a single dash and a single character\n  - either use a single dash and a single character (for a short flag)\n  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`);if(s.test(t))throw new Error(`${r}\n- too many short flags`);if(n.test(t))throw new Error(`${r}\n- too many long flags`);throw new Error(`${r}\n- unrecognised flag format`)}if(t===undefined&&r===undefined)throw new Error(`option creation failed due to no flags found in '${e}'.`);return{shortFlag:t,longFlag:r}}t.Option=Option;t.DualOptions=DualOptions},5030:(e,t)=>{const r=3;function editDistance(e,t){if(Math.abs(e.length-t.length)>r)return Math.max(e.length,t.length);const s=[];for(let t=0;t<=e.length;t++){s[t]=[t]}for(let e=0;e<=t.length;e++){s[0][e]=e}for(let r=1;r<=t.length;r++){for(let n=1;n<=e.length;n++){let i=1;if(e[n-1]===t[r-1]){i=0}else{i=1}s[n][r]=Math.min(s[n-1][r]+1,s[n][r-1]+1,s[n-1][r-1]+i);if(n>1&&r>1&&e[n-1]===t[r-2]&&e[n-2]===t[r-1]){s[n][r]=Math.min(s[n][r],s[n-2][r-2]+1)}}}return s[e.length][t.length]}function suggestSimilar(e,t){if(!t||t.length===0)return"";t=Array.from(new Set(t));const s=e.startsWith("--");if(s){e=e.slice(2);t=t.map((e=>e.slice(2)))}let n=[];let i=r;const o=.4;t.forEach((t=>{if(t.length<=1)return;const r=editDistance(e,t);const s=Math.max(e.length,t.length);const a=(s-r)/s;if(a>o){if(r<i){i=r;n=[t]}else if(r===i){n.push(t)}}}));n.sort(((e,t)=>e.localeCompare(t)));if(s){n=n.map((e=>`--${e}`))}if(n.length>1){return`\n(Did you mean one of ${n.join(", ")}?)`}if(n.length===1){return`\n(Did you mean ${n[0]}?)`}return""}t.suggestSimilar=suggestSimilar}};var r={};function __nccwpck_require__(e){var s=r[e];if(s!==undefined){return s.exports}var n=r[e]={exports:{}};var i=true;try{t[e].call(n.exports,n,n.exports,__nccwpck_require__);i=false}finally{if(i)delete r[e]}return n.exports}__nccwpck_require__.m=t;(()=>{__nccwpck_require__.d=(e,t)=>{for(var r in t){if(__nccwpck_require__.o(t,r)&&!__nccwpck_require__.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}}})();(()=>{__nccwpck_require__.f={};__nccwpck_require__.e=e=>Promise.all(Object.keys(__nccwpck_require__.f).reduce(((t,r)=>{__nccwpck_require__.f[r](e,t);return t}),[]))})();(()=>{__nccwpck_require__.u=e=>""+e+".index.js"})();(()=>{__nccwpck_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{__nccwpck_require__.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=new URL(".",import.meta.url).pathname.slice(import.meta.url.match(/^file:\/\/\/\w:/)?1:0,-1)+"/";(()=>{var e={792:0};var installChunk=t=>{var{ids:r,modules:s,runtime:n}=t;var i,o,a=0;for(i in s){if(__nccwpck_require__.o(s,i)){__nccwpck_require__.m[i]=s[i]}}if(n)n(__nccwpck_require__);for(;a<r.length;a++){o=r[a];if(__nccwpck_require__.o(e,o)&&e[o]){e[o][0]()}e[r[a]]=0}};__nccwpck_require__.f.j=(t,r)=>{var s=__nccwpck_require__.o(e,t)?e[t]:undefined;if(s!==0){if(s){r.push(s[1])}else{if(true){var n=import("./"+__nccwpck_require__.u(t)).then(installChunk,(r=>{if(e[t]!==0)e[t]=undefined;throw r}));var n=Promise.race([n,new Promise((r=>s=e[t]=[r]))]);r.push(s[1]=n)}}}}})();var s={};__nccwpck_require__.d(s,{i:()=>main});var n=__nccwpck_require__(8909);const{DM:i,gu:o,er:a,Ww:c,b7:u,Di:l,a2:h,uB:p,ef:f,c$:d,_V:g}=n;var b=__nccwpck_require__(1708);var y=__nccwpck_require__(2088);const balanced=(e,t,r)=>{const s=e instanceof RegExp?maybeMatch(e,r):e;const n=t instanceof RegExp?maybeMatch(t,r):t;const i=s!==null&&n!=null&&range(s,n,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+s.length,i[1]),post:r.slice(i[1]+n.length)}};const maybeMatch=(e,t)=>{const r=t.match(e);return r?r[0]:null};const range=(e,t,r)=>{let s,n,i,o=undefined,a;let c=r.indexOf(e);let u=r.indexOf(t,c+1);let l=c;if(c>=0&&u>0){if(e===t){return[c,u]}s=[];i=r.length;while(l>=0&&!a){if(l===c){s.push(l);c=r.indexOf(e,l+1)}else if(s.length===1){const e=s.pop();if(e!==undefined)a=[e,u]}else{n=s.pop();if(n!==undefined&&n<i){i=n;o=u}u=r.indexOf(t,l+1)}l=c<u&&c>=0?c:u}if(s.length&&o!==undefined){a=[i,o]}}return a};const w="\0SLASH"+Math.random()+"\0";const _="\0OPEN"+Math.random()+"\0";const v="\0CLOSE"+Math.random()+"\0";const E="\0COMMA"+Math.random()+"\0";const T="\0PERIOD"+Math.random()+"\0";const O=new RegExp(w,"g");const C=new RegExp(_,"g");const k=new RegExp(v,"g");const A=new RegExp(E,"g");const S=new RegExp(T,"g");const x=/\\\\/g;const $=/\\{/g;const R=/\\}/g;const P=/\\,/g;const N=/\\./g;const I=1e5;function numeric(e){return!isNaN(e)?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.replace(x,w).replace($,_).replace(R,v).replace(P,E).replace(N,T)}function unescapeBraces(e){return e.replace(O,"\\").replace(C,"{").replace(k,"}").replace(A,",").replace(S,".")}function parseCommaParts(e){if(!e){return[""]}const t=[];const r=balanced("{","}",e);if(!r){return e.split(",")}const{pre:s,body:n,post:i}=r;const o=s.split(",");o[o.length-1]+="{"+n+"}";const a=parseCommaParts(i);if(i.length){o[o.length-1]+=a.shift();o.push.apply(o,a)}t.push.apply(t,o);return t}function expand(e,t={}){if(!e){return[]}const{max:r=I}=t;if(e.slice(0,2)==="{}"){e="\\{\\}"+e.slice(2)}return expand_(escapeBraces(e),r,true).map(unescapeBraces)}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand_(e,t,r){const s=[];const n=balanced("{","}",e);if(!n)return[e];const i=n.pre;const o=n.post.length?expand_(n.post,t,false):[""];if(/\$$/.test(n.pre)){for(let e=0;e<o.length&&e<t;e++){const t=i+"{"+n.body+"}"+o[e];s.push(t)}}else{const a=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body);const c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body);const u=a||c;const l=n.body.indexOf(",")>=0;if(!u&&!l){if(n.post.match(/,(?!,).*\}/)){e=n.pre+"{"+n.body+v+n.post;return expand_(e,t,true)}return[e]}let h;if(u){h=n.body.split(/\.\./)}else{h=parseCommaParts(n.body);if(h.length===1&&h[0]!==undefined){h=expand_(h[0],t,false).map(embrace);if(h.length===1){return o.map((e=>n.pre+h[0]+e))}}}let p;if(u&&h[0]!==undefined&&h[1]!==undefined){const e=numeric(h[0]);const t=numeric(h[1]);const r=Math.max(h[0].length,h[1].length);let s=h.length===3&&h[2]!==undefined?Math.abs(numeric(h[2])):1;let n=lte;const i=t<e;if(i){s*=-1;n=gte}const o=h.some(isPadded);p=[];for(let i=e;n(i,t);i+=s){let e;if(c){e=String.fromCharCode(i);if(e==="\\"){e=""}}else{e=String(i);if(o){const t=r-e.length;if(t>0){const r=new Array(t+1).join("0");if(i<0){e="-"+r+e.slice(1)}else{e=r+e}}}}p.push(e)}}else{p=[];for(let e=0;e<h.length;e++){p.push.apply(p,expand_(h[e],t,false))}}for(let e=0;e<p.length;e++){for(let n=0;n<o.length&&s.length<t;n++){const t=i+p[e]+o[n];if(!r||u||t){s.push(t)}}}}return s}const L=1024*64;const assertValidPattern=e=>{if(typeof e!=="string"){throw new TypeError("invalid pattern")}if(e.length>L){throw new TypeError("pattern is too long")}};const F={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",true],"[:alpha:]":["\\p{L}\\p{Nl}",true],"[:ascii:]":["\\x"+"00-\\x"+"7f",false],"[:blank:]":["\\p{Zs}\\t",true],"[:cntrl:]":["\\p{Cc}",true],"[:digit:]":["\\p{Nd}",true],"[:graph:]":["\\p{Z}\\p{C}",true,true],"[:lower:]":["\\p{Ll}",true],"[:print:]":["\\p{C}",true],"[:punct:]":["\\p{P}",true],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",true],"[:upper:]":["\\p{Lu}",true],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",true],"[:xdigit:]":["A-Fa-f0-9",false]};const braceEscape=e=>e.replace(/[[\]\\-]/g,"\\$&");const regexpEscape=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const rangesToString=e=>e.join("");const parseClass=(e,t)=>{const r=t;if(e.charAt(r)!=="["){throw new Error("not in a brace expression")}const s=[];const n=[];let i=r+1;let o=false;let a=false;let c=false;let u=false;let l=r;let h="";e:while(i<e.length){const t=e.charAt(i);if((t==="!"||t==="^")&&i===r+1){u=true;i++;continue}if(t==="]"&&o&&!c){l=i+1;break}o=true;if(t==="\\"){if(!c){c=true;i++;continue}}if(t==="["&&!c){for(const[t,[o,c,u]]of Object.entries(F)){if(e.startsWith(t,i)){if(h){return["$.",false,e.length-r,true]}i+=t.length;if(u)n.push(o);else s.push(o);a=a||c;continue e}}}c=false;if(h){if(t>h){s.push(braceEscape(h)+"-"+braceEscape(t))}else if(t===h){s.push(braceEscape(t))}h="";i++;continue}if(e.startsWith("-]",i+1)){s.push(braceEscape(t+"-"));i+=2;continue}if(e.startsWith("-",i+1)){h=t;i+=2;continue}s.push(braceEscape(t));i++}if(l<i){return["",false,0,false]}if(!s.length&&!n.length){return["$.",false,e.length-r,true]}if(n.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!u){const e=s[0].length===2?s[0].slice(-1):s[0];return[regexpEscape(e),false,l-r,false]}const p="["+(u?"^":"")+rangesToString(s)+"]";const f="["+(u?"":"^")+rangesToString(n)+"]";const d=s.length&&n.length?"("+p+"|"+f+")":s.length?p:f;return[d,a,l-r,true]};const unescape_unescape=(e,{windowsPathsNoEscape:t=false,magicalBraces:r=true}={})=>{if(r){return t?e.replace(/\[([^\/\\])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")}return t?e.replace(/\[([^\/\\{}])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1")};const M=new Set(["!","?","+","*","@"]);const isExtglobType=e=>M.has(e);const D="(?!(?:^|/)\\.\\.?(?:$|/))";const G="(?!\\.)";const j=new Set(["[","."]);const B=new Set(["..","."]);const V=new Set("().*{}+?[]^$\\!");const regExpEscape=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const H="[^/]";const W=H+"*?";const U=H+"+?";class AST{type;#e;#t;#r=false;#s=[];#n;#i;#o;#a=false;#c;#u;#l=false;constructor(e,t,r={}){this.type=e;if(e)this.#t=true;this.#n=t;this.#e=this.#n?this.#n.#e:this;this.#c=this.#e===this?r:this.#e.#c;this.#o=this.#e===this?[]:this.#e.#o;if(e==="!"&&!this.#e.#a)this.#o.push(this);this.#i=this.#n?this.#n.#s.length:0}get hasMagic(){if(this.#t!==undefined)return this.#t;for(const e of this.#s){if(typeof e==="string")continue;if(e.type||e.hasMagic)return this.#t=true}return this.#t}toString(){if(this.#u!==undefined)return this.#u;if(!this.type){return this.#u=this.#s.map((e=>String(e))).join("")}else{return this.#u=this.type+"("+this.#s.map((e=>String(e))).join("|")+")"}}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString();this.#a=true;let e;while(e=this.#o.pop()){if(e.type!=="!")continue;let t=e;let r=t.#n;while(r){for(let s=t.#i+1;!r.type&&s<r.#s.length;s++){for(const t of e.#s){if(typeof t==="string"){throw new Error("string part in extglob AST??")}t.copyIn(r.#s[s])}}t=r;r=t.#n}}return this}push(...e){for(const t of e){if(t==="")continue;if(typeof t!=="string"&&!(t instanceof AST&&t.#n===this)){throw new Error("invalid part: "+t)}this.#s.push(t)}}toJSON(){const e=this.type===null?this.#s.slice().map((e=>typeof e==="string"?e:e.toJSON())):[this.type,...this.#s.map((e=>e.toJSON()))];if(this.isStart()&&!this.type)e.unshift([]);if(this.isEnd()&&(this===this.#e||this.#e.#a&&this.#n?.type==="!")){e.push({})}return e}isStart(){if(this.#e===this)return true;if(!this.#n?.isStart())return false;if(this.#i===0)return true;const e=this.#n;for(let t=0;t<this.#i;t++){const r=e.#s[t];if(!(r instanceof AST&&r.type==="!")){return false}}return true}isEnd(){if(this.#e===this)return true;if(this.#n?.type==="!")return true;if(!this.#n?.isEnd())return false;if(!this.type)return this.#n?.isEnd();const e=this.#n?this.#n.#s.length:0;return this.#i===e-1}copyIn(e){if(typeof e==="string")this.push(e);else this.push(e.clone(this))}clone(e){const t=new AST(this.type,e);for(const e of this.#s){t.copyIn(e)}return t}static#p(e,t,r,s){let n=false;let i=false;let o=-1;let a=false;if(t.type===null){let c=r;let u="";while(c<e.length){const r=e.charAt(c++);if(n||r==="\\"){n=!n;u+=r;continue}if(i){if(c===o+1){if(r==="^"||r==="!"){a=true}}else if(r==="]"&&!(c===o+2&&a)){i=false}u+=r;continue}else if(r==="["){i=true;o=c;a=false;u+=r;continue}if(!s.noext&&isExtglobType(r)&&e.charAt(c)==="("){t.push(u);u="";const n=new AST(r,t);c=AST.#p(e,n,c,s);t.push(n);continue}u+=r}t.push(u);return c}let c=r+1;let u=new AST(null,t);const l=[];let h="";while(c<e.length){const r=e.charAt(c++);if(n||r==="\\"){n=!n;h+=r;continue}if(i){if(c===o+1){if(r==="^"||r==="!"){a=true}}else if(r==="]"&&!(c===o+2&&a)){i=false}h+=r;continue}else if(r==="["){i=true;o=c;a=false;h+=r;continue}if(isExtglobType(r)&&e.charAt(c)==="("){u.push(h);h="";const t=new AST(r,u);u.push(t);c=AST.#p(e,t,c,s);continue}if(r==="|"){u.push(h);h="";l.push(u);u=new AST(null,t);continue}if(r===")"){if(h===""&&t.#s.length===0){t.#l=true}u.push(h);h="";t.push(...l,u);return c}h+=r}t.type=null;t.#t=undefined;t.#s=[e.substring(r-1)];return c}static fromGlob(e,t={}){const r=new AST(null,undefined,t);AST.#p(e,r,0,t);return r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();const e=this.toString();const[t,r,s,n]=this.toRegExpSource();const i=s||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase();if(!i){return r}const o=(this.#c.nocase?"i":"")+(n?"u":"");return Object.assign(new RegExp(`^${t}$`,o),{_src:t,_glob:e})}get options(){return this.#c}toRegExpSource(e){const t=e??!!this.#c.dot;if(this.#e===this)this.#h();if(!this.type){const r=this.isStart()&&this.isEnd()&&!this.#s.some((e=>typeof e!=="string"));const s=this.#s.map((t=>{const[s,n,i,o]=typeof t==="string"?AST.#f(t,this.#t,r):t.toRegExpSource(e);this.#t=this.#t||i;this.#r=this.#r||o;return s})).join("");let n="";if(this.isStart()){if(typeof this.#s[0]==="string"){const r=this.#s.length===1&&B.has(this.#s[0]);if(!r){const r=j;const i=t&&r.has(s.charAt(0))||s.startsWith("\\.")&&r.has(s.charAt(2))||s.startsWith("\\.\\.")&&r.has(s.charAt(4));const o=!t&&!e&&r.has(s.charAt(0));n=i?D:o?G:""}}}let i="";if(this.isEnd()&&this.#e.#a&&this.#n?.type==="!"){i="(?:$|\\/)"}const o=n+s+i;return[o,unescape_unescape(s),this.#t=!!this.#t,this.#r]}const r=this.type==="*"||this.type==="+";const s=this.type==="!"?"(?:(?!(?:":"(?:";let n=this.#d(t);if(this.isStart()&&this.isEnd()&&!n&&this.type!=="!"){const e=this.toString();this.#s=[e];this.type=null;this.#t=undefined;return[e,unescape_unescape(this.toString()),false,false]}let i=!r||e||t||!G?"":this.#d(true);if(i===n){i=""}if(i){n=`(?:${n})(?:${i})*?`}let o="";if(this.type==="!"&&this.#l){o=(this.isStart()&&!t?G:"")+U}else{const r=this.type==="!"?"))"+(this.isStart()&&!t&&!e?G:"")+W+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&i?")":this.type==="*"&&i?`)?`:`)${this.type}`;o=s+n+r}return[o,unescape_unescape(n),this.#t=!!this.#t,this.#r]}#d(e){return this.#s.map((t=>{if(typeof t==="string"){throw new Error("string type in extglob ast??")}const[r,s,n,i]=t.toRegExpSource(e);this.#r=this.#r||i;return r})).filter((e=>!(this.isStart()&&this.isEnd())||!!e)).join("|")}static#f(e,t,r=false){let s=false;let n="";let i=false;for(let o=0;o<e.length;o++){const a=e.charAt(o);if(s){s=false;n+=(V.has(a)?"\\":"")+a;continue}if(a==="\\"){if(o===e.length-1){n+="\\\\"}else{s=true}continue}if(a==="["){const[r,s,a,c]=parseClass(e,o);if(a){n+=r;i=i||s;o+=a-1;t=t||c;continue}}if(a==="*"){n+=r&&e==="*"?U:W;t=true;continue}if(a==="?"){n+=H;t=true;continue}n+=regExpEscape(a)}return[n,unescape_unescape(e),!!t,i]}}const escape_escape=(e,{windowsPathsNoEscape:t=false,magicalBraces:r=false}={})=>{if(r){return t?e.replace(/[?*()[\]{}]/g,"[$&]"):e.replace(/[?*()[\]\\{}]/g,"\\$&")}return t?e.replace(/[?*()[\]]/g,"[$&]"):e.replace(/[?*()[\]\\]/g,"\\$&")};const minimatch=(e,t,r={})=>{assertValidPattern(t);if(!r.nocomment&&t.charAt(0)==="#"){return false}return new Minimatch(t,r).match(e)};const q=/^\*+([^+@!?\*\[\(]*)$/;const starDotExtTest=e=>t=>!t.startsWith(".")&&t.endsWith(e);const starDotExtTestDot=e=>t=>t.endsWith(e);const starDotExtTestNocase=e=>{e=e.toLowerCase();return t=>!t.startsWith(".")&&t.toLowerCase().endsWith(e)};const starDotExtTestNocaseDot=e=>{e=e.toLowerCase();return t=>t.toLowerCase().endsWith(e)};const z=/^\*+\.\*+$/;const starDotStarTest=e=>!e.startsWith(".")&&e.includes(".");const starDotStarTestDot=e=>e!=="."&&e!==".."&&e.includes(".");const X=/^\.\*+$/;const dotStarTest=e=>e!=="."&&e!==".."&&e.startsWith(".");const Y=/^\*+$/;const starTest=e=>e.length!==0&&!e.startsWith(".");const starTestDot=e=>e.length!==0&&e!=="."&&e!=="..";const J=/^\?+([^+@!?\*\[\(]*)?$/;const qmarksTestNocase=([e,t=""])=>{const r=qmarksTestNoExt([e]);if(!t)return r;t=t.toLowerCase();return e=>r(e)&&e.toLowerCase().endsWith(t)};const qmarksTestNocaseDot=([e,t=""])=>{const r=qmarksTestNoExtDot([e]);if(!t)return r;t=t.toLowerCase();return e=>r(e)&&e.toLowerCase().endsWith(t)};const qmarksTestDot=([e,t=""])=>{const r=qmarksTestNoExtDot([e]);return!t?r:e=>r(e)&&e.endsWith(t)};const qmarksTest=([e,t=""])=>{const r=qmarksTestNoExt([e]);return!t?r:e=>r(e)&&e.endsWith(t)};const qmarksTestNoExt=([e])=>{const t=e.length;return e=>e.length===t&&!e.startsWith(".")};const qmarksTestNoExtDot=([e])=>{const t=e.length;return e=>e.length===t&&e!=="."&&e!==".."};const K=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";const Q={win32:{sep:"\\"},posix:{sep:"/"}};const Z=K==="win32"?Q.win32.sep:Q.posix.sep;minimatch.sep=Z;const ee=Symbol("globstar **");minimatch.GLOBSTAR=ee;const te="[^/]";const re=te+"*?";const se="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";const ne="(?:(?!(?:\\/|^)\\.).)*?";const filter=(e,t={})=>r=>minimatch(r,e,t);minimatch.filter=filter;const ext=(e,t={})=>Object.assign({},e,t);const defaults=e=>{if(!e||typeof e!=="object"||!Object.keys(e).length){return minimatch}const t=minimatch;const m=(r,s,n={})=>t(r,s,ext(e,n));return Object.assign(m,{Minimatch:class Minimatch extends t.Minimatch{constructor(t,r={}){super(t,ext(e,r))}static defaults(r){return t.defaults(ext(e,r)).Minimatch}},AST:class AST extends t.AST{constructor(t,r,s={}){super(t,r,ext(e,s))}static fromGlob(r,s={}){return t.AST.fromGlob(r,ext(e,s))}},unescape:(r,s={})=>t.unescape(r,ext(e,s)),escape:(r,s={})=>t.escape(r,ext(e,s)),filter:(r,s={})=>t.filter(r,ext(e,s)),defaults:r=>t.defaults(ext(e,r)),makeRe:(r,s={})=>t.makeRe(r,ext(e,s)),braceExpand:(r,s={})=>t.braceExpand(r,ext(e,s)),match:(r,s,n={})=>t.match(r,s,ext(e,n)),sep:t.sep,GLOBSTAR:ee})};minimatch.defaults=defaults;const braceExpand=(e,t={})=>{assertValidPattern(e);if(t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)){return[e]}return expand(e)};minimatch.braceExpand=braceExpand;const makeRe=(e,t={})=>new Minimatch(e,t).makeRe();minimatch.makeRe=makeRe;const match=(e,t,r={})=>{const s=new Minimatch(t,r);e=e.filter((e=>s.match(e)));if(s.options.nonull&&!e.length){e.push(t)}return e};minimatch.match=match;const ie=/[?*]|[+@!]\(.*?\)|\[|\]/;const esm_regExpEscape=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class Minimatch{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){assertValidPattern(e);t=t||{};this.options=t;this.pattern=e;this.platform=t.platform||K;this.isWindows=this.platform==="win32";this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===false;if(this.windowsPathsNoEscape){this.pattern=this.pattern.replace(/\\/g,"/")}this.preserveMultipleSlashes=!!t.preserveMultipleSlashes;this.regexp=null;this.negate=false;this.nonegate=!!t.nonegate;this.comment=false;this.empty=false;this.partial=!!t.partial;this.nocase=!!this.options.nocase;this.windowsNoMagicRoot=t.windowsNoMagicRoot!==undefined?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase);this.globSet=[];this.globParts=[];this.set=[];this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1){return true}for(const e of this.set){for(const t of e){if(typeof t!=="string")return true}}return false}debug(...e){}make(){const e=this.pattern;const t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=true;return}if(!e){this.empty=true;return}this.parseNegate();this.globSet=[...new Set(this.braceExpand())];if(t.debug){this.debug=(...e)=>console.error(...e)}this.debug(this.pattern,this.globSet);const r=this.globSet.map((e=>this.slashSplit(e)));this.globParts=this.preprocess(r);this.debug(this.pattern,this.globParts);let s=this.globParts.map(((e,t,r)=>{if(this.isWindows&&this.windowsNoMagicRoot){const t=e[0]===""&&e[1]===""&&(e[2]==="?"||!ie.test(e[2]))&&!ie.test(e[3]);const r=/^[a-z]:/i.test(e[0]);if(t){return[...e.slice(0,4),...e.slice(4).map((e=>this.parse(e)))]}else if(r){return[e[0],...e.slice(1).map((e=>this.parse(e)))]}}return e.map((e=>this.parse(e)))}));this.debug(this.pattern,s);this.set=s.filter((e=>e.indexOf(false)===-1));if(this.isWindows){for(let e=0;e<this.set.length;e++){const t=this.set[e];if(t[0]===""&&t[1]===""&&this.globParts[e][2]==="?"&&typeof t[3]==="string"&&/^[a-z]:$/i.test(t[3])){t[2]="?"}}}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar){for(let t=0;t<e.length;t++){for(let r=0;r<e[t].length;r++){if(e[t][r]==="**"){e[t][r]="*"}}}}const{optimizationLevel:t=1}=this.options;if(t>=2){e=this.firstPhasePreProcess(e);e=this.secondPhasePreProcess(e)}else if(t>=1){e=this.levelOneOptimize(e)}else{e=this.adjascentGlobstarOptimize(e)}return e}adjascentGlobstarOptimize(e){return e.map((e=>{let t=-1;while(-1!==(t=e.indexOf("**",t+1))){let r=t;while(e[r+1]==="**"){r++}if(r!==t){e.splice(t,r-t)}}return e}))}levelOneOptimize(e){return e.map((e=>{e=e.reduce(((e,t)=>{const r=e[e.length-1];if(t==="**"&&r==="**"){return e}if(t===".."){if(r&&r!==".."&&r!=="."&&r!=="**"){e.pop();return e}}e.push(t);return e}),[]);return e.length===0?[""]:e}))}levelTwoFileOptimize(e){if(!Array.isArray(e)){e=this.slashSplit(e)}let t=false;do{t=false;if(!this.preserveMultipleSlashes){for(let r=1;r<e.length-1;r++){const s=e[r];if(r===1&&s===""&&e[0]==="")continue;if(s==="."||s===""){t=true;e.splice(r,1);r--}}if(e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")){t=true;e.pop()}}let r=0;while(-1!==(r=e.indexOf("..",r+1))){const s=e[r-1];if(s&&s!=="."&&s!==".."&&s!=="**"){t=true;e.splice(r-1,2);r-=2}}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=false;do{t=false;for(let r of e){let s=-1;while(-1!==(s=r.indexOf("**",s+1))){let n=s;while(r[n+1]==="**"){n++}if(n>s){r.splice(s+1,n-s)}let i=r[s+1];const o=r[s+2];const a=r[s+3];if(i!=="..")continue;if(!o||o==="."||o===".."||!a||a==="."||a===".."){continue}t=true;r.splice(s,1);const c=r.slice(0);c[s]="**";e.push(c);s--}if(!this.preserveMultipleSlashes){for(let e=1;e<r.length-1;e++){const s=r[e];if(e===1&&s===""&&r[0]==="")continue;if(s==="."||s===""){t=true;r.splice(e,1);e--}}if(r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")){t=true;r.pop()}}let n=0;while(-1!==(n=r.indexOf("..",n+1))){const e=r[n-1];if(e&&e!=="."&&e!==".."&&e!=="**"){t=true;const e=n===1&&r[n+1]==="**";const s=e?["."]:[];r.splice(n-1,2,...s);if(r.length===0)r.push("");n-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++){for(let r=t+1;r<e.length;r++){const s=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(s){e[t]=[];e[r]=s;break}}}return e.filter((e=>e.length))}partsMatch(e,t,r=false){let s=0;let n=0;let i=[];let o="";while(s<e.length&&n<t.length){if(e[s]===t[n]){i.push(o==="b"?t[n]:e[s]);s++;n++}else if(r&&e[s]==="**"&&t[n]===e[s+1]){i.push(e[s]);s++}else if(r&&t[n]==="**"&&e[s]===t[n+1]){i.push(t[n]);n++}else if(e[s]==="*"&&t[n]&&(this.options.dot||!t[n].startsWith("."))&&t[n]!=="**"){if(o==="b")return false;o="a";i.push(e[s]);s++;n++}else if(t[n]==="*"&&e[s]&&(this.options.dot||!e[s].startsWith("."))&&e[s]!=="**"){if(o==="a")return false;o="b";i.push(t[n]);s++;n++}else{return false}}return e.length===t.length&&i}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=false;let r=0;for(let s=0;s<e.length&&e.charAt(s)==="!";s++){t=!t;r++}if(r)this.pattern=e.slice(r);this.negate=t}matchOne(e,t,r=false){const s=this.options;if(this.isWindows){const r=typeof e[0]==="string"&&/^[a-z]:$/i.test(e[0]);const s=!r&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]);const n=typeof t[0]==="string"&&/^[a-z]:$/i.test(t[0]);const i=!n&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]==="string"&&/^[a-z]:$/i.test(t[3]);const o=s?3:r?0:undefined;const a=i?3:n?0:undefined;if(typeof o==="number"&&typeof a==="number"){const[r,s]=[e[o],t[a]];if(r.toLowerCase()===s.toLowerCase()){t[a]=r;if(a>o){t=t.slice(a)}else if(o>a){e=e.slice(o)}}}}const{optimizationLevel:n=1}=this.options;if(n>=2){e=this.levelTwoFileOptimize(e)}this.debug("matchOne",this,{file:e,pattern:t});this.debug("matchOne",e.length,t.length);for(var i=0,o=0,a=e.length,c=t.length;i<a&&o<c;i++,o++){this.debug("matchOne loop");var u=t[o];var l=e[i];this.debug(t,u,l);if(u===false){return false}if(u===ee){this.debug("GLOBSTAR",[t,u,l]);var h=i;var p=o+1;if(p===c){this.debug("** at the end");for(;i<a;i++){if(e[i]==="."||e[i]===".."||!s.dot&&e[i].charAt(0)===".")return false}return true}while(h<a){var f=e[h];this.debug("\nglobstar while",e,h,t,p,f);if(this.matchOne(e.slice(h),t.slice(p),r)){this.debug("globstar found match!",h,a,f);return true}else{if(f==="."||f===".."||!s.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue");h++}}if(r){this.debug("\n>>> no match, partial?",e,h,t,p);if(h===a){return true}}return false}let n;if(typeof u==="string"){n=l===u;this.debug("string match",u,l,n)}else{n=u.test(l);this.debug("pattern match",u,l,n)}if(!n)return false}if(i===a&&o===c){return true}else if(i===a){return r}else if(o===c){return i===a-1&&e[i]===""}else{throw new Error("wtf?")}}braceExpand(){return braceExpand(this.pattern,this.options)}parse(e){assertValidPattern(e);const t=this.options;if(e==="**")return ee;if(e==="")return"";let r;let s=null;if(r=e.match(Y)){s=t.dot?starTestDot:starTest}else if(r=e.match(q)){s=(t.nocase?t.dot?starDotExtTestNocaseDot:starDotExtTestNocase:t.dot?starDotExtTestDot:starDotExtTest)(r[1])}else if(r=e.match(J)){s=(t.nocase?t.dot?qmarksTestNocaseDot:qmarksTestNocase:t.dot?qmarksTestDot:qmarksTest)(r)}else if(r=e.match(z)){s=t.dot?starDotStarTestDot:starDotStarTest}else if(r=e.match(X)){s=dotStarTest}const n=AST.fromGlob(e,this.options).toMMPattern();if(s&&typeof n==="object"){Reflect.defineProperty(n,"test",{value:s})}return n}makeRe(){if(this.regexp||this.regexp===false)return this.regexp;const e=this.set;if(!e.length){this.regexp=false;return this.regexp}const t=this.options;const r=t.noglobstar?re:t.dot?se:ne;const s=new Set(t.nocase?["i"]:[]);let n=e.map((e=>{const t=e.map((e=>{if(e instanceof RegExp){for(const t of e.flags.split(""))s.add(t)}return typeof e==="string"?esm_regExpEscape(e):e===ee?ee:e._src}));t.forEach(((e,s)=>{const n=t[s+1];const i=t[s-1];if(e!==ee||i===ee){return}if(i===undefined){if(n!==undefined&&n!==ee){t[s+1]="(?:\\/|"+r+"\\/)?"+n}else{t[s]=r}}else if(n===undefined){t[s-1]=i+"(?:\\/|\\/"+r+")?"}else if(n!==ee){t[s-1]=i+"(?:\\/|\\/"+r+"\\/)"+n;t[s+1]=ee}}));const n=t.filter((e=>e!==ee));if(this.partial&&n.length>=1){const e=[];for(let t=1;t<=n.length;t++){e.push(n.slice(0,t).join("/"))}return"(?:"+e.join("|")+")"}return n.join("/")})).join("|");const[i,o]=e.length>1?["(?:",")"]:["",""];n="^"+i+n+o+"$";if(this.partial){n="^(?:\\/|"+i+n.slice(1,-1)+o+")$"}if(this.negate)n="^(?!"+n+").+$";try{this.regexp=new RegExp(n,[...s].join(""))}catch(e){this.regexp=false}return this.regexp}slashSplit(e){if(this.preserveMultipleSlashes){return e.split("/")}else if(this.isWindows&&/^\/\/[^\/]+/.test(e)){return["",...e.split(/\/+/)]}else{return e.split(/\/+/)}}match(e,t=this.partial){this.debug("match",e,this.pattern);if(this.comment){return false}if(this.empty){return e===""}if(e==="/"&&t){return true}const r=this.options;if(this.isWindows){e=e.split("\\").join("/")}const s=this.slashSplit(e);this.debug(this.pattern,"split",s);const n=this.set;this.debug(this.pattern,"set",n);let i=s[s.length-1];if(!i){for(let e=s.length-2;!i&&e>=0;e--){i=s[e]}}for(let e=0;e<n.length;e++){const o=n[e];let a=s;if(r.matchBase&&o.length===1){a=[i]}const c=this.matchOne(a,o,t);if(c){if(r.flipNegate){return true}return!this.negate}}if(r.flipNegate){return false}return this.negate}static defaults(e){return minimatch.defaults(e).Minimatch}}minimatch.AST=AST;minimatch.Minimatch=Minimatch;minimatch.escape=escape_escape;minimatch.unescape=unescape_unescape;const oe=e(import.meta.url)("child_process");var ae=__nccwpck_require__(2203);async function toArray(e){const t=[];for await(const r of e){t.push(r)}return t}async function concatBufferStream(e){return Buffer.concat(await toArray(e))}async function concatStringStream(e){return(await toArray(e)).join("")}async function firstFromStream(e){for await(const t of e){return t}return null}function mergeReadables(e){const t=new Readable({objectMode:true,read(){}});let r=0;Object.entries(e).forEach((([e,s],n,i)=>{s.on("data",(r=>t.push({source:e,chunk:r}))).on("end",(()=>{r+=1;if(r===i.length){t.push(null)}})).on("error",(e=>t.destroy(e)))}));return t}async function*splitStream(e,t){let r;let s;let n="";for await(r of e){n+=r.toString();if(n.includes(t)){s=n.split(t);n=s.pop()||"";yield*s}}if(n){yield n}}async function exitCode(e){if(e.exitCode!==null){return e.exitCode}return new Promise((t=>e.once("close",t)))}async function catchProcessError(e){let t=new Error("Process exited with non-zero code");let r="";e.on("error",(e=>{t=e}));if(e.stderr){let t;for await(t of e.stderr){r+=t.toString()}}const s=await exitCode(e);if(r){t=new Error(r)}return s?t:null}async function throwProcessError(e){const t=await catchProcessError(e);if(t){throw t}}async function*outputStream(e){const{stdout:t}=e;const r=catchProcessError(e);if(t){t.on("error",(t=>{if(t.name==="AbortError"&&e.exitCode===null){e.kill("SIGKILL")}}));yield*t}const s=await r;if(s){throw s}}function output(e){return concatBufferStream(outputStream(e))}function formatArgs(...e){return e.reduce(((e,t)=>{if(t){e.push(String(t))}return e}),[])}function utils_toArray(e){return Array.isArray(e)?e:[e]}const ce="------------------------ >8 ------------------------";class GitClient{cwd;debug;constructor(e,t){this.cwd=e;this.debug=t}formatArgs(...e){const t=formatArgs(...e);if(this.debug){this.debug(t)}return t}async exec(...e){return(await output((0,oe.spawn)("git",this.formatArgs(...e),{cwd:this.cwd}))).toString().trim()}execStream(...e){return outputStream((0,oe.spawn)("git",this.formatArgs(...e),{cwd:this.cwd}))}async init(){try{await this.exec("init");return true}catch(e){return false}}async*getRawCommits(e={}){const{path:t,from:r="",to:s="HEAD",format:n="%B",ignore:i,reverse:o,merges:a,since:c}=e;const u=i?e=>!i.test(e):()=>true;const l=this.execStream("log",`--format=${n}%n${ce}`,c&&`--since=${c instanceof Date?c.toISOString():c}`,o&&"--reverse",a&&"--merges",a===false&&"--no-merges",[r,s].filter(Boolean).join(".."),...t?["--",...utils_toArray(t)]:[]);const h=splitStream(l,`${ce}\n`);let p;for await(p of h){if(u(p)){yield p}}}async*getTags(e={}){const{path:t,from:r="",to:s="HEAD",since:n}=e;const i=/tag:\s*(.+?)[,)]/gi;const o=this.execStream("log","--decorate","--no-color","--date-order",n&&`--since=${n instanceof Date?n.toISOString():n}`,[r,s].filter(Boolean).join(".."),...t?["--",...utils_toArray(t)]:[]);let a;let c;let u;for await(a of o){c=a.toString().trim().matchAll(i);for([,u]of c){yield u}}}async getLastTag(e){return firstFromStream(this.getTags(e))}async checkIgnore(e){try{await this.exec("check-ignore","--",e);return true}catch(e){return false}}async add(e){await this.exec("add","--",...utils_toArray(e))}async commit(e){const{verify:t=true,sign:r=false,files:s=[],allowEmpty:n=false,message:i}=e;await this.exec("commit",!t&&"--no-verify",r&&"-S",n&&"--allow-empty","-m",i,"--",...s)}async tag(e){let{sign:t=false,name:r,message:s}=e;if(t){s=""}await this.exec("tag",t&&"-s",s&&"-a",...s?["-m",s]:[],"--",r)}async getCurrentBranch(){const e=await this.exec("rev-parse","--abbrev-ref","HEAD");return e}async getDefaultBranch(){const e=(await this.exec("rev-parse","--abbrev-ref","origin/HEAD")).replace(/^origin\//,"");return e}async push(e,t={}){const{verify:r=true,tags:s=false,followTags:n=false,force:i=false}=t;await this.exec("push",n&&"--follow-tags",s&&"--tags",!r&&"--no-verify",i&&"--force","origin","--",e)}async verify(e,t){let r=this.exec("rev-parse","--verify",e);if(t){r=r.catch((()=>""))}return await r}async getConfig(e){return await this.exec("config","--get","--",e)}async setConfig(e,t){await this.exec("config","--",e,t)}async fetch(e={}){const{prune:t=false,unshallow:r=false,tags:s=false,all:n=false,remote:i,branch:o}=e;await this.exec("fetch",t&&"--prune",r&&"--unshallow",s&&"--tags",n&&"--all",...i&&o?["--",i,o]:[])}async createBranch(e){await this.exec("checkout","-b",e)}async deleteBranch(e){await this.exec("branch","-D","--",e)}async checkout(e){await this.exec("checkout",e)}}function packagePrefix(e){if(!e){return/^.+@/}return`${e}@`}class ConventionalGitClient extends GitClient{deps=null;loadDeps(){if(this.deps){return this.deps}this.deps=Promise.all([__nccwpck_require__.e(674).then(__nccwpck_require__.bind(__nccwpck_require__,4674)).then((({parseCommits:e})=>e)),__nccwpck_require__.e(520).then(__nccwpck_require__.bind(__nccwpck_require__,2520)).then((({filterRevertedCommits:e})=>e))]);return this.deps}async*getCommits(e={},t={}){const{filterReverts:r,...s}=e;const[n,i]=await this.loadDeps();if(r){yield*i(this.getCommits(s,t));return}const o=n(t);const a=this.getRawCommits(s);yield*o(a)}async*getSemverTags(e={}){const{prefix:t,skipUnstable:r,clean:s}=e;const n=this.getTags();const i=/\d+\.\d+\.\d+-.+/;const o=s?(e,t)=>y.clean(t||e):e=>e;let a;let c;for await(c of n){if(r&&i.test(c)){continue}if(t){const e=typeof t==="string"?c.startsWith(t):t.test(c);if(e){a=c.replace(t,"");if(y.valid(a)){c=o(c,a);if(c){yield c}}}}else if(y.valid(c)){c=o(c);if(c){yield c}}}}async getLastSemverTag(e={}){return firstFromStream(this.getSemverTags(e))}async getVersionFromTags(e={}){const t=this.getSemverTags({clean:true,...e});const r=[];for await(const e of t){r.push(e)}if(!r.length){return null}return r.sort(y.rcompare)[0]||null}}const ue=e(import.meta.url)("path");function resolvePresetNameVariants(e){if(ue.isAbsolute(e)){return[e]}let t="";let r=e.toLocaleLowerCase();if(e.startsWith("@")){const s=e.split("/");t=`${s.shift()}/`;if(t==="@conventional-changelog/"){return[e]}r=s.join("/")}if(!r.startsWith("conventional-changelog-")){r=`conventional-changelog-${r}`}const s=`${t}${r}`;if(s!==e){return[s,e]}return[e]}function getModuleDefaultExport(e){if(("__esModule"in e||Object.getPrototypeOf(e)===null)&&"default"in e){return e.default}return e}async function loadWithFallbacks(e,t){let r=null;for(const s of t){try{return getModuleDefaultExport(await e(s))}catch(e){if(!r){r=e}}}throw r}function createPresetLoader(e){return async function loadPreset(t){let r="";let s=null;if(typeof t==="string"){r=t}else if(typeof t==="object"&&typeof t.name==="string"){r=t.name;s=t}else{throw Error("Preset must be string or object with property `name`")}const n=resolvePresetNameVariants(r);let i=null;try{i=await loadWithFallbacks(e,n)}catch(e){throw new Error(`Unable to load the "${r}" preset. Please make sure it's installed.`,{cause:e})}if(typeof i!=="function"){throw new Error(`The "${r}" preset does not export a function. Maybe you are using an old version of the preset. Please upgrade.`)}return s?await i(s):await i()}}const le=createPresetLoader((e=>__nccwpck_require__(445)(e)));function isIterable(e){return e!==null&&(typeof e[Symbol.iterator]==="function"||typeof e[Symbol.asyncIterator]==="function")}function bindLogNamespace(e,t){return r=>t(e,r)}const he=["major","minor","patch"];class Bumper{gitClient;params;whatBump;tagGetter;commitsGetter;constructor(e=process.cwd()){this.gitClient=typeof e==="string"?new ConventionalGitClient(e):e;this.whatBump=null;this.params=Promise.resolve({commits:{format:"%B%n-hash-%n%H",filterReverts:true}});this.tagGetter=()=>this.getLastSemverTag();this.commitsGetter=()=>this.getCommits()}composeParams(e){this.params=Promise.all([e,this.params]).then((([e,t])=>({options:{...t.options,...e.options},tags:{...t.tags,...e.tags},commits:{...t.commits,...e.commits},parser:{...t.parser,...e.parser}})))}async getLastSemverTag(){const{tags:e}=await this.params;return await this.gitClient.getLastSemverTag(e)}async*getCommits(){const{options:e,commits:t,parser:r}=await this.params;const s={...r};if(!s.warn&&e?.warn){s.warn=bindLogNamespace("parser",e.warn)}yield*this.gitClient.getCommits({from:await this.tagGetter()||"",...t},s)}loadPreset(e,t){const r=t?createPresetLoader(t):le;const s=r(e).then((e=>{if(!e){throw Error("Preset is not loaded or have incorrect exports")}return e}));this.whatBump=async e=>{const{whatBump:t}=await s;return t(e)};this.composeParams(s);return this}config(e){this.composeParams(e);return this}options(e){this.composeParams({options:e});return this}tag(e){if(typeof e==="string"){this.tagGetter=()=>e}else{this.tagGetter=()=>this.getLastSemverTag();this.composeParams({tags:e})}return this}commits(e,t){if(isIterable(e)){this.commitsGetter=()=>e}else{this.commitsGetter=()=>this.getCommits();this.composeParams({commits:e,parser:t})}return this}async bump(e=this.whatBump){if(typeof e!=="function"){throw Error("`whatBump` must be a function")}const{gitClient:t}=this;const{options:r}=await this.params;if(!t.debug&&r?.debug){t.debug=bindLogNamespace("git-client",r.debug)}const s=this.commitsGetter();const n=[];let i;for await(i of s){n.push(i)}const o=await e(n);if(o&&"level"in o){return{...o,releaseType:he[o.level],commits:n}}return{commits:n}}}const pe=e(import.meta.url)("node:buffer");var fe=__nccwpck_require__(7117);var de=__nccwpck_require__(2830);var me=__nccwpck_require__(9997);var ge=__nccwpck_require__(6760);var be=__nccwpck_require__(8474);var ye=Object.defineProperty;var we=Object.getOwnPropertyDescriptor;var _e=Object.getOwnPropertyNames;var ve=Object.prototype.hasOwnProperty;var __esm=(e,t)=>function __init(){return e&&(t=(0,e[_e(e)[0]])(e=0)),t};var __commonJS=(e,t)=>function __require(){return t||(0,e[_e(e)[0]])((t={exports:{}}).exports,t),t.exports};var __export=(e,t)=>{for(var r in t)ye(e,r,{get:t[r],enumerable:true})};var __copyProps=(e,t,r,s)=>{if(t&&typeof t==="object"||typeof t==="function"){for(let n of _e(t))if(!ve.call(e,n)&&n!==r)ye(e,n,{get:()=>t[n],enumerable:!(s=we(t,n))||s.enumerable})}return e};var __toCommonJS=e=>__copyProps(ye({},"__esModule",{value:true}),e);function pathspec(...e){const t=new String(e);Ee.set(t,e);return t}function isPathSpec(e){return e instanceof String&&Ee.has(e)}function toPaths(e){return Ee.get(e)||[]}var Ee;var Te=__esm({"src/lib/args/pathspec.ts"(){"use strict";Ee=new WeakMap}});var Oe;var Ce=__esm({"src/lib/errors/git-error.ts"(){"use strict";Oe=class extends Error{constructor(e,t){super(t);this.task=e;Object.setPrototypeOf(this,new.target.prototype)}}}});var ke;var Ae=__esm({"src/lib/errors/git-response-error.ts"(){"use strict";Ce();ke=class extends Oe{constructor(e,t){super(void 0,t||String(e));this.git=e}}}});var Se;var xe=__esm({"src/lib/errors/task-configuration-error.ts"(){"use strict";Ce();Se=class extends Oe{constructor(e){super(void 0,e)}}}});function asFunction(e){if(typeof e!=="function"){return Re}return e}function isUserFunction(e){return typeof e==="function"&&e!==Re}function splitOn(e,t){const r=e.indexOf(t);if(r<=0){return[e,""]}return[e.substr(0,r),e.substr(r+1)]}function first(e,t=0){return isArrayLike(e)&&e.length>t?e[t]:void 0}function last(e,t=0){if(isArrayLike(e)&&e.length>t){return e[e.length-1-t]}}function isArrayLike(e){return De(e)}function toLinesWithContent(e="",t=true,r="\n"){return e.split(r).reduce(((e,r)=>{const s=t?r.trim():r;if(s){e.push(s)}return e}),[])}function forEachLineWithContent(e,t){return toLinesWithContent(e,true).map((e=>t(e)))}function folderExists(e){return(0,fe.exists)(e,fe.FOLDER)}function append(e,t){if(Array.isArray(e)){if(!e.includes(t)){e.push(t)}}else{e.add(t)}return t}function including(e,t){if(Array.isArray(e)&&!e.includes(t)){e.push(t)}return e}function remove(e,t){if(Array.isArray(e)){const r=e.indexOf(t);if(r>=0){e.splice(r,1)}}else{e.delete(t)}return t}function asArray(e){return Array.isArray(e)?e:[e]}function asCamelCase(e){return e.replace(/[\s-]+(.)/g,((e,t)=>t.toUpperCase()))}function asStringArray(e){return asArray(e).map((e=>e instanceof String?e:String(e)))}function asNumber(e,t=0){if(e==null){return t}const r=parseInt(e,10);return Number.isNaN(r)?t:r}function prefixedArray(e,t){const r=[];for(let s=0,n=e.length;s<n;s++){r.push(t,e[s])}return r}function bufferToString(e){return(Array.isArray(e)?pe.Buffer.concat(e):e).toString("utf-8")}function pick(e,t){const r={};t.forEach((t=>{if(e[t]!==void 0){r[t]=e[t]}}));return r}function delay(e=0){return new Promise((t=>setTimeout(t,e)))}function orVoid(e){if(e===false){return void 0}return e}var $e,Re,Pe;var Ne=__esm({"src/lib/utils/util.ts"(){"use strict";Ge();$e="\0";Re=()=>{};Pe=Object.prototype.toString.call.bind(Object.prototype.toString)}});function filterType(e,t,r){if(t(e)){return e}return arguments.length>2?r:void 0}function filterPrimitives(e,t){const r=isPathSpec(e)?"string":typeof e;return/number|string|boolean/.test(r)&&(!t||!t.includes(r))}function filterPlainObject(e){return!!e&&Pe(e)==="[object Object]"}function filterFunction(e){return typeof e==="function"}var Ie,Le,Fe,Me,De;var Ge=__esm({"src/lib/utils/argument-filters.ts"(){"use strict";Te();Ne();Ie=e=>Array.isArray(e);Le=e=>typeof e==="number";Fe=e=>typeof e==="string";Me=e=>Fe(e)||Array.isArray(e)&&e.every(Fe);De=e=>{if(e==null||"number|boolean|function".includes(typeof e)){return false}return typeof e.length==="number"}}});var je;var Be=__esm({"src/lib/utils/exit-codes.ts"(){"use strict";je=(e=>{e[e["SUCCESS"]=0]="SUCCESS";e[e["ERROR"]=1]="ERROR";e[e["NOT_FOUND"]=-2]="NOT_FOUND";e[e["UNCLEAN"]=128]="UNCLEAN";return e})(je||{})}});var Ve;var He=__esm({"src/lib/utils/git-output-streams.ts"(){"use strict";Ve=class _GitOutputStreams{constructor(e,t){this.stdOut=e;this.stdErr=t}asStrings(){return new _GitOutputStreams(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}});function useMatchesDefault(){throw new Error(`LineParser:useMatches not implemented`)}var We,Ue;var qe=__esm({"src/lib/utils/line-parser.ts"(){"use strict";We=class{constructor(e,t){this.matches=[];this.useMatches=useMatchesDefault;this.parse=(e,t)=>{this.resetMatches();if(!this._regExp.every(((t,r)=>this.addMatch(t,r,e(r))))){return false}return this.useMatches(t,this.prepareMatches())!==false};this._regExp=Array.isArray(e)?e:[e];if(t){this.useMatches=t}}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){const s=r&&e.exec(r);if(s){this.pushMatch(t,s)}return!!s}pushMatch(e,t){this.matches.push(...t.slice(1))}};Ue=class extends We{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){if(e>0||t.length>1){super.pushMatch(e,t)}}}}});function createInstanceConfig(...e){const t=process.cwd();const r=Object.assign({baseDir:t,...ze},...e.filter((e=>typeof e==="object"&&e)));r.baseDir=r.baseDir||t;r.trimmed=r.trimmed===true;return r}var ze;var Xe=__esm({"src/lib/utils/simple-git-options.ts"(){"use strict";ze={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:false}}});function appendTaskOptions(e,t=[]){if(!filterPlainObject(e)){return t}return Object.keys(e).reduce(((t,r)=>{const s=e[r];if(isPathSpec(s)){t.push(s)}else if(filterPrimitives(s,["boolean"])){t.push(r+"="+s)}else if(Array.isArray(s)){for(const e of s){if(!filterPrimitives(e,["string","number"])){t.push(r+"="+e)}}}else{t.push(r)}return t}),t)}function getTrailingOptions(e,t=0,r=false){const s=[];for(let r=0,n=t<0?e.length:t;r<n;r++){if("string|number".includes(typeof e[r])){s.push(String(e[r]))}}appendTaskOptions(trailingOptionsArgument(e),s);if(!r){s.push(...trailingArrayArgument(e))}return s}function trailingArrayArgument(e){const t=typeof last(e)==="function";return asStringArray(filterType(last(e,t?1:0),Ie,[]))}function trailingOptionsArgument(e){const t=filterFunction(last(e));return filterType(last(e,t?1:0),filterPlainObject)}function trailingFunctionArgument(e,t=true){const r=asFunction(last(e));return t||isUserFunction(r)?r:void 0}var Ye=__esm({"src/lib/utils/task-options.ts"(){"use strict";Ge();Ne();Te()}});function callTaskParser(e,t){return e(t.stdOut,t.stdErr)}function parseStringResponse(e,t,r,s=true){asArray(r).forEach((r=>{for(let n=toLinesWithContent(r,s),i=0,o=n.length;i<o;i++){const line=(e=0)=>{if(i+e>=o){return}return n[i+e]};t.some((({parse:t})=>t(line,e)))}}));return e}var Je=__esm({"src/lib/utils/task-parser.ts"(){"use strict";Ne()}});var Ke={};__export(Ke,{ExitCodes:()=>je,GitOutputStreams:()=>Ve,LineParser:()=>We,NOOP:()=>Re,NULL:()=>$e,RemoteLineParser:()=>Ue,append:()=>append,appendTaskOptions:()=>appendTaskOptions,asArray:()=>asArray,asCamelCase:()=>asCamelCase,asFunction:()=>asFunction,asNumber:()=>asNumber,asStringArray:()=>asStringArray,bufferToString:()=>bufferToString,callTaskParser:()=>callTaskParser,createInstanceConfig:()=>createInstanceConfig,delay:()=>delay,filterArray:()=>Ie,filterFunction:()=>filterFunction,filterHasLength:()=>De,filterNumber:()=>Le,filterPlainObject:()=>filterPlainObject,filterPrimitives:()=>filterPrimitives,filterString:()=>Fe,filterStringOrStringArray:()=>Me,filterType:()=>filterType,first:()=>first,folderExists:()=>folderExists,forEachLineWithContent:()=>forEachLineWithContent,getTrailingOptions:()=>getTrailingOptions,including:()=>including,isUserFunction:()=>isUserFunction,last:()=>last,objectToString:()=>Pe,orVoid:()=>orVoid,parseStringResponse:()=>parseStringResponse,pick:()=>pick,prefixedArray:()=>prefixedArray,remove:()=>remove,splitOn:()=>splitOn,toLinesWithContent:()=>toLinesWithContent,trailingFunctionArgument:()=>trailingFunctionArgument,trailingOptionsArgument:()=>trailingOptionsArgument});var Qe=__esm({"src/lib/utils/index.ts"(){"use strict";Ge();Be();He();qe();Xe();Ye();Je();Ne()}});var Ze={};__export(Ze,{CheckRepoActions:()=>et,checkIsBareRepoTask:()=>checkIsBareRepoTask,checkIsRepoRootTask:()=>checkIsRepoRootTask,checkIsRepoTask:()=>checkIsRepoTask});function checkIsRepoTask(e){switch(e){case"bare":return checkIsBareRepoTask();case"root":return checkIsRepoRootTask()}const t=["rev-parse","--is-inside-work-tree"];return{commands:t,format:"utf-8",onError:tt,parser:rt}}function checkIsRepoRootTask(){const e=["rev-parse","--git-dir"];return{commands:e,format:"utf-8",onError:tt,parser(e){return/^\.(git)?$/.test(e.trim())}}}function checkIsBareRepoTask(){const e=["rev-parse","--is-bare-repository"];return{commands:e,format:"utf-8",onError:tt,parser:rt}}function isNotRepoMessage(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var et,tt,rt;var st=__esm({"src/lib/tasks/check-is-repo.ts"(){"use strict";Qe();et=(e=>{e["BARE"]="bare";e["IN_TREE"]="tree";e["IS_REPO_ROOT"]="root";return e})(et||{});tt=({exitCode:e},t,r,s)=>{if(e===128&&isNotRepoMessage(t)){return r(Buffer.from("false"))}s(t)};rt=e=>e.trim()==="true"}});function cleanSummaryParser(e,t){const r=new nt(e);const s=e?ot:it;toLinesWithContent(t).forEach((e=>{const t=e.replace(s,"");r.paths.push(t);(at.test(t)?r.folders:r.files).push(t)}));return r}var nt,it,ot,at;var ct=__esm({"src/lib/responses/CleanSummary.ts"(){"use strict";Qe();nt=class{constructor(e){this.dryRun=e;this.paths=[];this.files=[];this.folders=[]}};it=/^[a-z]+\s*/i;ot=/^[a-z]+\s+[a-z]+\s*/i;at=/\/$/}});var ut={};__export(ut,{EMPTY_COMMANDS:()=>ht,adhocExecTask:()=>adhocExecTask,configurationErrorTask:()=>configurationErrorTask,isBufferTask:()=>isBufferTask,isEmptyTask:()=>isEmptyTask,straightThroughBufferTask:()=>straightThroughBufferTask,straightThroughStringTask:()=>straightThroughStringTask});function adhocExecTask(e){return{commands:ht,format:"empty",parser:e}}function configurationErrorTask(e){return{commands:ht,format:"empty",parser(){throw typeof e==="string"?new Se(e):e}}}function straightThroughStringTask(e,t=false){return{commands:e,format:"utf-8",parser(e){return t?String(e).trim():e}}}function straightThroughBufferTask(e){return{commands:e,format:"buffer",parser(e){return e}}}function isBufferTask(e){return e.format==="buffer"}function isEmptyTask(e){return e.format==="empty"||!e.commands.length}var ht;var pt=__esm({"src/lib/tasks/task.ts"(){"use strict";xe();ht=[]}});var ft={};__export(ft,{CONFIG_ERROR_INTERACTIVE_MODE:()=>dt,CONFIG_ERROR_MODE_REQUIRED:()=>mt,CONFIG_ERROR_UNKNOWN_OPTION:()=>bt,CleanOptions:()=>yt,cleanTask:()=>cleanTask,cleanWithOptionsTask:()=>cleanWithOptionsTask,isCleanOptionsArray:()=>isCleanOptionsArray});function cleanWithOptionsTask(e,t){const{cleanMode:r,options:s,valid:n}=getCleanOptions(e);if(!r){return configurationErrorTask(mt)}if(!n.options){return configurationErrorTask(bt+JSON.stringify(e))}s.push(...t);if(s.some(isInteractiveMode)){return configurationErrorTask(dt)}return cleanTask(r,s)}function cleanTask(e,t){const r=["clean",`-${e}`,...t];return{commands:r,format:"utf-8",parser(t){return cleanSummaryParser(e==="n",t)}}}function isCleanOptionsArray(e){return Array.isArray(e)&&e.every((e=>wt.has(e)))}function getCleanOptions(e){let t;let r=[];let s={cleanMode:false,options:true};e.replace(/[^a-z]i/g,"").split("").forEach((e=>{if(isCleanMode(e)){t=e;s.cleanMode=true}else{s.options=s.options&&isKnownOption(r[r.length]=`-${e}`)}}));return{cleanMode:t,options:r,valid:s}}function isCleanMode(e){return e==="f"||e==="n"}function isKnownOption(e){return/^-[a-z]$/i.test(e)&&wt.has(e.charAt(1))}function isInteractiveMode(e){if(/^-[^\-]/.test(e)){return e.indexOf("i")>0}return e==="--interactive"}var dt,mt,bt,yt,wt;var _t=__esm({"src/lib/tasks/clean.ts"(){"use strict";ct();Qe();pt();dt="Git clean interactive mode is not supported";mt='Git clean mode parameter ("n" or "f") is required';bt="Git clean unknown option found in: ";yt=(e=>{e["DRY_RUN"]="n";e["FORCE"]="f";e["IGNORED_INCLUDED"]="x";e["IGNORED_ONLY"]="X";e["EXCLUDING"]="e";e["QUIET"]="q";e["RECURSIVE"]="d";return e})(yt||{});wt=new Set(["i",...asStringArray(Object.values(yt))])}});function configListParser(e){const t=new vt;for(const r of configParser(e)){t.addValue(r.file,String(r.key),r.value)}return t}function configGetParser(e,t){let r=null;const s=[];const n=new Map;for(const i of configParser(e,t)){if(i.key!==t){continue}s.push(r=i.value);if(!n.has(i.file)){n.set(i.file,[])}n.get(i.file).push(r)}return{key:t,paths:Array.from(n.keys()),scopes:n,value:r,values:s}}function configFilePath(e){return e.replace(/^(file):/,"")}function*configParser(e,t=null){const r=e.split("\0");for(let e=0,s=r.length-1;e<s;){const s=configFilePath(r[e++]);let n=r[e++];let i=t;if(n.includes("\n")){const e=splitOn(n,"\n");i=e[0];n=e[1]}yield{file:s,key:i,value:n}}}var vt;var Et=__esm({"src/lib/responses/ConfigList.ts"(){"use strict";Qe();vt=class{constructor(){this.files=[];this.values=Object.create(null)}get all(){if(!this._all){this._all=this.files.reduce(((e,t)=>Object.assign(e,this.values[t])),{})}return this._all}addFile(e){if(!(e in this.values)){const t=last(this.files);this.values[e]=t?Object.create(this.values[t]):{};this.files.push(e)}return this.values[e]}addValue(e,t,r){const s=this.addFile(e);if(!Object.hasOwn(s,t)){s[t]=r}else if(Array.isArray(s[t])){s[t].push(r)}else{s[t]=[s[t],r]}this._all=void 0}}}});function asConfigScope(e,t){if(typeof e==="string"&&Object.hasOwn(Tt,e)){return e}return t}function addConfigTask(e,t,r,s){const n=["config",`--${s}`];if(r){n.push("--add")}n.push(e,t);return{commands:n,format:"utf-8",parser(e){return e}}}function getConfigTask(e,t){const r=["config","--null","--show-origin","--get-all",e];if(t){r.splice(1,0,`--${t}`)}return{commands:r,format:"utf-8",parser(t){return configGetParser(t,e)}}}function listConfigTask(e){const t=["config","--list","--show-origin","--null"];if(e){t.push(`--${e}`)}return{commands:t,format:"utf-8",parser(e){return configListParser(e)}}}function config_default(){return{addConfig(e,t,...r){return this._runTask(addConfigTask(e,t,r[0]===true,asConfigScope(r[1],"local")),trailingFunctionArgument(arguments))},getConfig(e,t){return this._runTask(getConfigTask(e,asConfigScope(t,void 0)),trailingFunctionArgument(arguments))},listConfig(...e){return this._runTask(listConfigTask(asConfigScope(e[0],void 0)),trailingFunctionArgument(arguments))}}}var Tt;var Ot=__esm({"src/lib/tasks/config.ts"(){"use strict";Et();Qe();Tt=(e=>{e["system"]="system";e["global"]="global";e["local"]="local";e["worktree"]="worktree";return e})(Tt||{})}});function isDiffNameStatus(e){return kt.has(e)}var Ct,kt;var At=__esm({"src/lib/tasks/diff-name-status.ts"(){"use strict";Ct=(e=>{e["ADDED"]="A";e["COPIED"]="C";e["DELETED"]="D";e["MODIFIED"]="M";e["RENAMED"]="R";e["CHANGED"]="T";e["UNMERGED"]="U";e["UNKNOWN"]="X";e["BROKEN"]="B";return e})(Ct||{});kt=new Set(Object.values(Ct))}});function grepQueryBuilder(...e){return(new Rt).param(...e)}function parseGrep(e){const t=new Set;const r={};forEachLineWithContent(e,(e=>{const[s,n,i]=e.split($e);t.add(s);(r[s]=r[s]||[]).push({line:asNumber(n),path:s,preview:i})}));return{paths:t,results:r}}function grep_default(){return{grep(e){const t=trailingFunctionArgument(arguments);const r=getTrailingOptions(arguments);for(const e of St){if(r.includes(e)){return this._runTask(configurationErrorTask(`git.grep: use of "${e}" is not supported.`),t)}}if(typeof e==="string"){e=grepQueryBuilder().param(e)}const s=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:s,format:"utf-8",parser(e){return parseGrep(e)}},t)}}}var St,xt,$t,Rt;var Pt=__esm({"src/lib/tasks/grep.ts"(){"use strict";Qe();pt();St=["-h"];xt=Symbol("grepQuery");Rt=class{constructor(){this[$t]=[]}*[($t=xt,Symbol.iterator)](){for(const e of this[xt]){yield e}}and(...e){e.length&&this[xt].push("--and","(",...prefixedArray(e,"-e"),")");return this}param(...e){this[xt].push(...prefixedArray(e,"-e"));return this}}}});var Nt={};__export(Nt,{ResetMode:()=>It,getResetMode:()=>getResetMode,resetTask:()=>resetTask});function resetTask(e,t){const r=["reset"];if(isValidResetMode(e)){r.push(`--${e}`)}r.push(...t);return straightThroughStringTask(r)}function getResetMode(e){if(isValidResetMode(e)){return e}switch(typeof e){case"string":case"undefined":return"soft"}return}function isValidResetMode(e){return typeof e==="string"&&Lt.includes(e)}var It,Lt;var Ft=__esm({"src/lib/tasks/reset.ts"(){"use strict";Qe();pt();It=(e=>{e["MIXED"]="mixed";e["SOFT"]="soft";e["HARD"]="hard";e["MERGE"]="merge";e["KEEP"]="keep";return e})(It||{});Lt=asStringArray(Object.values(It))}});function createLog(){return de("simple-git")}function prefixedLogger(e,t,r){if(!t||!String(t).replace(/\s*/,"")){return!r?e:(t,...s)=>{e(t,...s);r(t,...s)}}return(s,...n)=>{e(`%s ${s}`,t,...n);if(r){r(s,...n)}}}function childLoggerName(e,t,{namespace:r}){if(typeof e==="string"){return e}const s=t&&t.namespace||"";if(s.startsWith(r)){return s.substr(r.length+1)}return s||r}function createLogger(e,t,r,s=createLog()){const n=e&&`[${e}]`||"";const i=[];const o=typeof t==="string"?s.extend(t):t;const a=childLoggerName(filterType(t,Fe),o,s);return step(r);function sibling(t,r){return append(i,createLogger(e,a.replace(/^[^:]+/,t),r,s))}function step(t){const r=t&&`[${t}]`||"";const i=o&&prefixedLogger(o,r)||Re;const a=prefixedLogger(s,`${n} ${r}`,i);return Object.assign(o?i:a,{label:e,sibling:sibling,info:a,step:step})}}var Mt=__esm({"src/lib/git-logger.ts"(){"use strict";Qe();de.formatters.L=e=>String(De(e)?e.length:"-");de.formatters.B=e=>{if(Buffer.isBuffer(e)){return e.toString("utf8")}return Pe(e)}}});var Dt;var Gt=__esm({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";Ce();Mt();Dt=class _TasksPendingQueue{constructor(e="GitExecutor"){this.logLabel=e;this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){const t=_TasksPendingQueue.getName(e.commands[0]);const r=createLogger(this.logLabel,t);return{task:e,logger:r,name:t}}push(e){const t=this.createProgress(e);t.logger("Adding task to the queue, commands = %o",e.commands);this._queue.set(e,t);return t}fatal(e){for(const[t,{logger:r}]of Array.from(this._queue.entries())){if(t===e.task){r.info(`Failed %o`,e);r(`Fatal exception, any as-yet un-started tasks run through this executor will not be attempted`)}else{r.info(`A fatal exception occurred in a previous task, the queue has been purged: %o`,e.message)}this.complete(t)}if(this._queue.size!==0){throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}}complete(e){const t=this.withProgress(e);if(t){this._queue.delete(e)}}attempt(e){const t=this.withProgress(e);if(!t){throw new Oe(void 0,"TasksPendingQueue: attempt called for an unknown task")}t.logger("Starting task");return t}static getName(e="empty"){return`task:${e}:${++_TasksPendingQueue.counter}`}static{this.counter=0}}}});function pluginContext(e,t){return{method:first(e.commands)||"",commands:t}}function onErrorReceived(e,t){return r=>{t(`[ERROR] child process exception %o`,r);e.push(Buffer.from(String(r.stack),"ascii"))}}function onDataReceived(e,t,r,s){return n=>{r(`%s received %L bytes`,t,n);s(`%B`,n);e.push(n)}}var jt;var Bt=__esm({"src/lib/runners/git-executor-chain.ts"(){"use strict";Ce();pt();Qe();Gt();jt=class{constructor(e,t,r){this._executor=e;this._scheduler=t;this._plugins=r;this._chain=Promise.resolve();this._queue=new Dt}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){this._queue.push(e);return this._chain=this._chain.then((()=>this.attemptTask(e)))}async attemptTask(e){const t=await this._scheduler.next();const onQueueComplete=()=>this._queue.complete(e);try{const{logger:t}=this._queue.attempt(e);return await(isEmptyTask(e)?this.attemptEmptyTask(e,t):this.attemptRemoteTask(e,t))}catch(t){throw this.onFatalException(e,t)}finally{onQueueComplete();t()}}onFatalException(e,t){const r=t instanceof Oe?Object.assign(t,{task:e}):new Oe(e,t&&String(t));this._chain=Promise.resolve();this._queue.fatal(r);return r}async attemptRemoteTask(e,t){const r=this._plugins.exec("spawn.binary","",pluginContext(e,e.commands));const s=this._plugins.exec("spawn.args",[...e.commands],pluginContext(e,e.commands));const n=await this.gitResponse(e,r,s,this.outputHandler,t.step("SPAWN"));const i=await this.handleTaskData(e,s,n,t.step("HANDLE"));t(`passing response to task's parser as a %s`,e.format);if(isBufferTask(e)){return callTaskParser(e.parser,i)}return callTaskParser(e.parser,i.asStrings())}async attemptEmptyTask(e,t){t(`empty task bypassing child process to call to task's parser`);return e.parser(this)}handleTaskData(e,t,r,s){const{exitCode:n,rejection:i,stdOut:o,stdErr:a}=r;return new Promise(((c,u)=>{s(`Preparing to handle process response exitCode=%d stdOut=`,n);const{error:l}=this._plugins.exec("task.error",{error:i},{...pluginContext(e,t),...r});if(l&&e.onError){s.info(`exitCode=%s handling with custom error handler`);return e.onError(r,l,(e=>{s.info(`custom error handler treated as success`);s(`custom error returned a %s`,Pe(e));c(new Ve(Array.isArray(e)?Buffer.concat(e):e,Buffer.concat(a)))}),u)}if(l){s.info(`handling as error: exitCode=%s stdErr=%s rejection=%o`,n,a.length,i);return u(l)}s.info(`retrieving task output complete`);c(new Ve(Buffer.concat(o),Buffer.concat(a)))}))}async gitResponse(e,t,r,s,n){const i=n.sibling("output");const o=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:true},pluginContext(e,e.commands));return new Promise((a=>{const c=[];const u=[];n.info(`%s %o`,t,r);n("%O",o);let l=this._beforeSpawn(e,r);if(l){return a({stdOut:c,stdErr:u,exitCode:9901,rejection:l})}this._plugins.exec("spawn.before",void 0,{...pluginContext(e,r),kill(e){l=e||l}});const h=(0,oe.spawn)(t,r,o);h.stdout.on("data",onDataReceived(c,"stdOut",n,i.step("stdOut")));h.stderr.on("data",onDataReceived(u,"stdErr",n,i.step("stdErr")));h.on("error",onErrorReceived(u,n));if(s){n(`Passing child process stdOut/stdErr to custom outputHandler`);s(t,h.stdout,h.stderr,[...r])}this._plugins.exec("spawn.after",void 0,{...pluginContext(e,r),spawned:h,close(e,t){a({stdOut:c,stdErr:u,exitCode:e,rejection:l||t})},kill(e){if(h.killed){return}l=e;h.kill("SIGINT")}})}))}_beforeSpawn(e,t){let r;this._plugins.exec("spawn.before",void 0,{...pluginContext(e,t),kill(e){r=e||r}});return r}}}});var Vt={};__export(Vt,{GitExecutor:()=>Ht});var Ht;var Wt=__esm({"src/lib/runners/git-executor.ts"(){"use strict";Bt();Ht=class{constructor(e,t,r){this.cwd=e;this._scheduler=t;this._plugins=r;this._chain=new jt(this,this._scheduler,this._plugins)}chain(){return new jt(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function taskCallback(e,t,r=Re){const onSuccess=e=>{r(null,e)};const onError2=t=>{if(t?.task===e){r(t instanceof ke?addDeprecationNoticeToError(t):t,void 0)}};t.then(onSuccess,onError2)}function addDeprecationNoticeToError(e){let log=e=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${e} should be GitResponseError.git.${e}, this will no longer be available in version 3`);log=Re};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(descriptorReducer,{}));function descriptorReducer(t,r){if(r in e){return t}t[r]={enumerable:false,configurable:false,get(){log(r);return e.git[r]}};return t}}var Ut=__esm({"src/lib/task-callback.ts"(){"use strict";Ae();Qe()}});function changeWorkingDirectoryTask(e,t){return adhocExecTask((r=>{if(!folderExists(e)){throw new Error(`Git.cwd: cannot change to non-directory "${e}"`)}return(t||r).cwd=e}))}var qt=__esm({"src/lib/tasks/change-working-directory.ts"(){"use strict";Qe();pt()}});function checkoutTask(e){const t=["checkout",...e];if(t[1]==="-b"&&t.includes("-B")){t[1]=remove(t,"-B")}return straightThroughStringTask(t)}function checkout_default(){return{checkout(){return this._runTask(checkoutTask(getTrailingOptions(arguments,1)),trailingFunctionArgument(arguments))},checkoutBranch(e,t){return this._runTask(checkoutTask(["-b",e,t,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))},checkoutLocalBranch(e){return this._runTask(checkoutTask(["-b",e,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))}}}var zt=__esm({"src/lib/tasks/checkout.ts"(){"use strict";Qe();pt()}});function countObjectsResponse(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function count_objects_default(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(e){return parseStringResponse(countObjectsResponse(),[Xt],e)}})}}}var Xt;var Yt=__esm({"src/lib/tasks/count-objects.ts"(){"use strict";Qe();Xt=new We(/([a-z-]+): (\d+)$/,((e,[t,r])=>{const s=asCamelCase(t);if(Object.hasOwn(e,s)){e[s]=asNumber(r)}}))}});function parseCommitResult(e){const t={author:null,branch:"",commit:"",root:false,summary:{changes:0,insertions:0,deletions:0}};return parseStringResponse(t,Jt,e)}var Jt;var Kt=__esm({"src/lib/parsers/parse-commit.ts"(){"use strict";Qe();Jt=[new We(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,((e,[t,r,s])=>{e.branch=t;e.commit=s;e.root=!!r})),new We(/\s*Author:\s(.+)/i,((e,[t])=>{const r=t.split("<");const s=r.pop();if(!s||!s.includes("@")){return}e.author={email:s.substr(0,s.length-1),name:r.join("<").trim()}})),new We(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,((e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0;e.summary.insertions=parseInt(r,10)||0;e.summary.deletions=parseInt(s,10)||0})),new We(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,((e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0;const n=parseInt(r,10)||0;if(s==="-"){e.summary.deletions=n}else if(s==="+"){e.summary.insertions=n}}))]}});function commitTask(e,t,r){const s=["-c","core.abbrev=40","commit",...prefixedArray(e,"-m"),...t,...r];return{commands:s,format:"utf-8",parser:parseCommitResult}}function commit_default(){return{commit(e,...t){const r=trailingFunctionArgument(arguments);const s=rejectDeprecatedSignatures(e)||commitTask(asArray(e),asArray(filterType(t[0],Me,[])),[...asStringArray(filterType(t[1],Ie,[])),...getTrailingOptions(arguments,0,true)]);return this._runTask(s,r)}};function rejectDeprecatedSignatures(e){return!Me(e)&&configurationErrorTask(`git.commit: requires the commit message to be supplied as a string/string[]`)}}var Qt=__esm({"src/lib/tasks/commit.ts"(){"use strict";Kt();Qe();pt()}});function first_commit_default(){return{firstCommit(){return this._runTask(straightThroughStringTask(["rev-list","--max-parents=0","HEAD"],true),trailingFunctionArgument(arguments))}}}var Zt=__esm({"src/lib/tasks/first-commit.ts"(){"use strict";Qe();pt()}});function hashObjectTask(e,t){const r=["hash-object",e];if(t){r.push("-w")}return straightThroughStringTask(r,true)}var er=__esm({"src/lib/tasks/hash-object.ts"(){"use strict";pt()}});function parseInit(e,t,r){const s=String(r).trim();let n;if(n=rr.exec(s)){return new tr(e,t,false,n[1])}if(n=sr.exec(s)){return new tr(e,t,true,n[1])}let i="";const o=s.split(" ");while(o.length){const e=o.shift();if(e==="in"){i=o.join(" ");break}}return new tr(e,t,/^re/i.test(s),i)}var tr,rr,sr;var nr=__esm({"src/lib/responses/InitSummary.ts"(){"use strict";tr=class{constructor(e,t,r,s){this.bare=e;this.path=t;this.existing=r;this.gitDir=s}};rr=/^Init.+ repository in (.+)$/;sr=/^Rein.+ in (.+)$/}});function hasBareCommand(e){return e.includes(ir)}function initTask(e=false,t,r){const s=["init",...r];if(e&&!hasBareCommand(s)){s.splice(1,0,ir)}return{commands:s,format:"utf-8",parser(e){return parseInit(s.includes("--bare"),t,e)}}}var ir;var or=__esm({"src/lib/tasks/init.ts"(){"use strict";nr();ir="--bare"}});function logFormatFromCommand(e){for(let t=0;t<e.length;t++){const r=ar.exec(e[t]);if(r){return`--${r[1]}`}}return""}function isLogFormat(e){return ar.test(e)}var ar;var cr=__esm({"src/lib/args/log-format.ts"(){"use strict";ar=/^--(stat|numstat|name-only|name-status)(=|$)/}});var ur;var lr=__esm({"src/lib/responses/DiffSummary.ts"(){"use strict";ur=class{constructor(){this.changed=0;this.deletions=0;this.insertions=0;this.files=[]}}}});function getDiffParser(e=""){const t=mr[e];return e=>parseStringResponse(new ur,t,e,false)}var hr,pr,fr,dr,mr;var gr=__esm({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";cr();lr();At();Qe();hr=[new We(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,((e,[t,r,s=""])=>{e.files.push({file:t.trim(),changes:asNumber(r),insertions:s.replace(/[^+]/g,"").length,deletions:s.replace(/[^-]/g,"").length,binary:false})})),new We(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,((e,[t,r,s])=>{e.files.push({file:t.trim(),before:asNumber(r),after:asNumber(s),binary:true})})),new We(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,((e,[t,r])=>{const s=/(\d+) i/.exec(r);const n=/(\d+) d/.exec(r);e.changed=asNumber(t);e.insertions=asNumber(s?.[1]);e.deletions=asNumber(n?.[1])}))];pr=[new We(/(\d+)\t(\d+)\t(.+)$/,((e,[t,r,s])=>{const n=asNumber(t);const i=asNumber(r);e.changed++;e.insertions+=n;e.deletions+=i;e.files.push({file:s,changes:n+i,insertions:n,deletions:i,binary:false})})),new We(/-\t-\t(.+)$/,((e,[t])=>{e.changed++;e.files.push({file:t,after:0,before:0,binary:true})}))];fr=[new We(/(.+)$/,((e,[t])=>{e.changed++;e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:false})}))];dr=[new We(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,((e,[t,r,s,n,i])=>{e.changed++;e.files.push({file:i??s,changes:0,insertions:0,deletions:0,binary:false,status:orVoid(isDiffNameStatus(t)&&t),from:orVoid(!!i&&s!==i&&s),similarity:asNumber(r)})}))];mr={[""]:hr,["--stat"]:hr,["--numstat"]:pr,["--name-status"]:dr,["--name-only"]:fr}}});function lineBuilder(e,t){return t.reduce(((t,r,s)=>{t[r]=e[s]||"";return t}),Object.create({diff:null}))}function createListLogSummaryParser(e=wr,t=_r,r=""){const s=getDiffParser(r);return function(r){const n=toLinesWithContent(r.trim(),false,br).map((function(r){const n=r.split(yr);const i=lineBuilder(n[0].split(e),t);if(n.length>1&&!!n[1].trim()){i.diff=s(n[1])}return i}));return{all:n,latest:n.length&&n[0]||null,total:n.length}}}var br,yr,wr,_r;var vr=__esm({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";Qe();gr();cr();br="òòòòòò ";yr=" òò";wr=" ò ";_r=["hash","date","message","refs","author_name","author_email"]}});var Er={};__export(Er,{diffSummaryTask:()=>diffSummaryTask,validateLogFormatConfig:()=>validateLogFormatConfig});function diffSummaryTask(e){let t=logFormatFromCommand(e);const r=["diff"];if(t===""){t="--stat";r.push("--stat=4096")}r.push(...e);return validateLogFormatConfig(r)||{commands:r,format:"utf-8",parser:getDiffParser(t)}}function validateLogFormatConfig(e){const t=e.filter(isLogFormat);if(t.length>1){return configurationErrorTask(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`)}if(t.length&&e.includes("-z")){return configurationErrorTask(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}}var Tr=__esm({"src/lib/tasks/diff.ts"(){"use strict";cr();gr();pt()}});function prettyFormat(e,t){const r=[];const s=[];Object.keys(e).forEach((t=>{r.push(t);s.push(String(e[t]))}));return[r,s.join(t)]}function userOptions(e){return Object.keys(e).reduce(((t,r)=>{if(!(r in Or)){t[r]=e[r]}return t}),{})}function parseLogOptions(e={},t=[]){const r=filterType(e.splitter,Fe,wr);const s=filterPlainObject(e.format)?e.format:{hash:"%H",date:e.strictDate===false?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==false?"%aN":"%an",author_email:e.mailMap!==false?"%aE":"%ae"};const[n,i]=prettyFormat(s,r);const o=[];const a=[`--pretty=format:${br}${i}${yr}`,...t];const c=e.n||e["max-count"]||e.maxCount;if(c){a.push(`--max-count=${c}`)}if(e.from||e.to){const t=e.symmetric!==false?"...":"..";o.push(`${e.from||""}${t}${e.to||""}`)}if(Fe(e.file)){a.push("--follow",pathspec(e.file))}appendTaskOptions(userOptions(e),a);return{fields:n,splitter:r,commands:[...a,...o]}}function logTask(e,t,r){const s=createListLogSummaryParser(e,t,logFormatFromCommand(r));return{commands:["log",...r],format:"utf-8",parser:s}}function log_default(){return{log(...e){const t=trailingFunctionArgument(arguments);const r=parseLogOptions(trailingOptionsArgument(arguments),asStringArray(filterType(arguments[0],Ie,[])));const s=rejectDeprecatedSignatures(...e)||validateLogFormatConfig(r.commands)||createLogTask(r);return this._runTask(s,t)}};function createLogTask(e){return logTask(e.splitter,e.fields,e.commands)}function rejectDeprecatedSignatures(e,t){return Fe(e)&&Fe(t)&&configurationErrorTask(`git.log(string, string) should be replaced with git.log({ from: string, to: string })`)}}var Or;var Cr=__esm({"src/lib/tasks/log.ts"(){"use strict";cr();Te();vr();Qe();pt();Tr();Or=(e=>{e[e["--pretty"]=0]="--pretty";e[e["max-count"]=1]="max-count";e[e["maxCount"]=2]="maxCount";e[e["n"]=3]="n";e[e["file"]=4]="file";e[e["format"]=5]="format";e[e["from"]=6]="from";e[e["to"]=7]="to";e[e["splitter"]=8]="splitter";e[e["symmetric"]=9]="symmetric";e[e["mailMap"]=10]="mailMap";e[e["multiLine"]=11]="multiLine";e[e["strictDate"]=12]="strictDate";return e})(Or||{})}});var kr,Ar;var Sr=__esm({"src/lib/responses/MergeSummary.ts"(){"use strict";kr=class{constructor(e,t=null,r){this.reason=e;this.file=t;this.meta=r}toString(){return`${this.file}:${this.reason}`}};Ar=class{constructor(){this.conflicts=[];this.merges=[];this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){if(this.conflicts.length){return`CONFLICTS: ${this.conflicts.join(", ")}`}return"OK"}}}});var xr,$r;var Rr=__esm({"src/lib/responses/PullSummary.ts"(){"use strict";xr=class{constructor(){this.remoteMessages={all:[]};this.created=[];this.deleted=[];this.files=[];this.deletions={};this.insertions={};this.summary={changes:0,deletions:0,insertions:0}}};$r=class{constructor(){this.remote="";this.hash={local:"",remote:""};this.branch={local:"",remote:""};this.message=""}toString(){return this.message}}}});function objectEnumerationResult(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function asObjectCount(e){const t=/^\s*(\d+)/.exec(e);const r=/delta (\d+)/i.exec(e);return{count:asNumber(t&&t[1]||"0"),delta:asNumber(r&&r[1]||"0")}}var Pr;var Nr=__esm({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";Qe();Pr=[new Ue(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,((e,[t,r])=>{const s=t.toLowerCase();const n=objectEnumerationResult(e.remoteMessages);Object.assign(n,{[s]:asNumber(r)})})),new Ue(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,((e,[t,r])=>{const s=t.toLowerCase();const n=objectEnumerationResult(e.remoteMessages);Object.assign(n,{[s]:asNumber(r)})})),new Ue(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,((e,[t,r,s])=>{const n=objectEnumerationResult(e.remoteMessages);n.total=asObjectCount(t);n.reused=asObjectCount(r);n.packReused=asNumber(s)}))]}});function parseRemoteMessages(e,t){return parseStringResponse({remoteMessages:new Lr},Ir,t)}var Ir,Lr;var Fr=__esm({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";Qe();Nr();Ir=[new Ue(/^remote:\s*(.+)$/,((e,[t])=>{e.remoteMessages.all.push(t.trim());return false})),...Pr,new Ue([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],((e,[t])=>{e.remoteMessages.pullRequestUrl=t})),new Ue([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],((e,[t,r,s])=>{e.remoteMessages.vulnerabilities={count:asNumber(t),summary:r,url:s}}))];Lr=class{constructor(){this.all=[]}}}});function parsePullErrorResult(e,t){const r=parseStringResponse(new $r,Br,[e,t]);return r.message&&r}var Mr,Dr,Gr,jr,Br,Vr,Hr;var Wr=__esm({"src/lib/parsers/parse-pull.ts"(){"use strict";Rr();Qe();Fr();Mr=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/;Dr=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/;Gr=/^(create|delete) mode \d+ (.+)/;jr=[new We(Mr,((e,[t,r,s])=>{e.files.push(t);if(r){e.insertions[t]=r.length}if(s){e.deletions[t]=s.length}})),new We(Dr,((e,[t,,r,,s])=>{if(r!==void 0||s!==void 0){e.summary.changes=+t||0;e.summary.insertions=+r||0;e.summary.deletions=+s||0;return true}return false})),new We(Gr,((e,[t,r])=>{append(e.files,r);append(t==="create"?e.created:e.deleted,r)}))];Br=[new We(/^from\s(.+)$/i,((e,[t])=>void(e.remote=t))),new We(/^fatal:\s(.+)$/,((e,[t])=>void(e.message=t))),new We(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,((e,[t,r,s,n])=>{e.branch.local=s;e.hash.local=t;e.branch.remote=n;e.hash.remote=r}))];Vr=(e,t)=>parseStringResponse(new xr,jr,[e,t]);Hr=(e,t)=>Object.assign(new xr,Vr(e,t),parseRemoteMessages(e,t))}});var Ur,qr,zr;var Xr=__esm({"src/lib/parsers/parse-merge.ts"(){"use strict";Sr();Qe();Wr();Ur=[new We(/^Auto-merging\s+(.+)$/,((e,[t])=>{e.merges.push(t)})),new We(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,((e,[t,r])=>{e.conflicts.push(new kr(t,r))})),new We(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,((e,[t,r,s])=>{e.conflicts.push(new kr(t,r,{deleteRef:s}))})),new We(/^CONFLICT\s+\((.+)\):/,((e,[t])=>{e.conflicts.push(new kr(t,null))})),new We(/^Automatic merge failed;\s+(.+)$/,((e,[t])=>{e.result=t}))];qr=(e,t)=>Object.assign(zr(e,t),Hr(e,t));zr=e=>parseStringResponse(new Ar,Ur,e)}});function mergeTask(e){if(!e.length){return configurationErrorTask("Git.merge requires at least one option")}return{commands:["merge",...e],format:"utf-8",parser(e,t){const r=qr(e,t);if(r.failed){throw new ke(r)}return r}}}var Yr=__esm({"src/lib/tasks/merge.ts"(){"use strict";Ae();Xr();pt()}});function pushResultPushedItem(e,t,r){const s=r.includes("deleted");const n=r.includes("tag")||/^refs\/tags/.test(e);const i=!r.includes("new");return{deleted:s,tag:n,branch:!n,new:!i,alreadyUpdated:i,local:e,remote:t}}var Jr,Kr,Qr;var Zr=__esm({"src/lib/parsers/parse-push.ts"(){"use strict";Qe();Fr();Jr=[new We(/^Pushing to (.+)$/,((e,[t])=>{e.repo=t})),new We(/^updating local tracking ref '(.+)'/,((e,[t])=>{e.ref={...e.ref||{},local:t}})),new We(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,((e,[t,r,s])=>{e.pushed.push(pushResultPushedItem(t,r,s))})),new We(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,((e,[t,r,s])=>{e.branch={...e.branch||{},local:t,remote:r,remoteName:s}})),new We(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,((e,[t,r,s,n])=>{e.update={head:{local:t,remote:r},hash:{from:s,to:n}}}))];Kr=(e,t)=>{const r=Qr(e,t);const s=parseRemoteMessages(e,t);return{...r,...s}};Qr=(e,t)=>parseStringResponse({pushed:[]},Jr,[e,t])}});var es={};__export(es,{pushTagsTask:()=>pushTagsTask,pushTask:()=>pushTask});function pushTagsTask(e={},t){append(t,"--tags");return pushTask(e,t)}function pushTask(e={},t){const r=["push",...t];if(e.branch){r.splice(1,0,e.branch)}if(e.remote){r.splice(1,0,e.remote)}remove(r,"-v");append(r,"--verbose");append(r,"--porcelain");return{commands:r,format:"utf-8",parser:Kr}}var ts=__esm({"src/lib/tasks/push.ts"(){"use strict";Zr();Qe()}});function show_default(){return{showBuffer(){const e=["show",...getTrailingOptions(arguments,1)];if(!e.includes("--binary")){e.splice(1,0,"--binary")}return this._runTask(straightThroughBufferTask(e),trailingFunctionArgument(arguments))},show(){const e=["show",...getTrailingOptions(arguments,1)];return this._runTask(straightThroughStringTask(e),trailingFunctionArgument(arguments))}}}var rs=__esm({"src/lib/tasks/show.ts"(){"use strict";Qe();pt()}});var ss,ns;var is=__esm({"src/lib/responses/FileStatusSummary.ts"(){"use strict";ss=/^(.+)\0(.+)$/;ns=class{constructor(e,t,r){this.path=e;this.index=t;this.working_dir=r;if(t==="R"||r==="R"){const t=ss.exec(e)||[null,e,e];this.from=t[2]||"";this.path=t[1]||""}}}}});function renamedFile(e){const[t,r]=e.split($e);return{from:r||t,to:t}}function parser3(e,t,r){return[`${e}${t}`,r]}function conflicts(e,...t){return t.map((t=>parser3(e,t,((e,t)=>append(e.conflicted,t)))))}function splitLine(e,t){const r=t.trim();switch(" "){case r.charAt(2):return data(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return data(" ",r.charAt(0),r.substr(2));default:return}function data(t,r,s){const n=`${t}${r}`;const i=as.get(n);if(i){i(e,s)}if(n!=="##"&&n!=="!!"){e.files.push(new ns(s,t,r))}}}var os,as,cs;var us=__esm({"src/lib/responses/StatusSummary.ts"(){"use strict";Qe();is();os=class{constructor(){this.not_added=[];this.conflicted=[];this.created=[];this.deleted=[];this.ignored=void 0;this.modified=[];this.renamed=[];this.files=[];this.staged=[];this.ahead=0;this.behind=0;this.current=null;this.tracking=null;this.detached=false;this.isClean=()=>!this.files.length}};as=new Map([parser3(" ","A",((e,t)=>append(e.created,t))),parser3(" ","D",((e,t)=>append(e.deleted,t))),parser3(" ","M",((e,t)=>append(e.modified,t))),parser3("A"," ",((e,t)=>append(e.created,t)&&append(e.staged,t))),parser3("A","M",((e,t)=>append(e.created,t)&&append(e.staged,t)&&append(e.modified,t))),parser3("D"," ",((e,t)=>append(e.deleted,t)&&append(e.staged,t))),parser3("M"," ",((e,t)=>append(e.modified,t)&&append(e.staged,t))),parser3("M","M",((e,t)=>append(e.modified,t)&&append(e.staged,t))),parser3("R"," ",((e,t)=>{append(e.renamed,renamedFile(t))})),parser3("R","M",((e,t)=>{const r=renamedFile(t);append(e.renamed,r);append(e.modified,r.to)})),parser3("!","!",((e,t)=>{append(e.ignored=e.ignored||[],t)})),parser3("?","?",((e,t)=>append(e.not_added,t))),...conflicts("A","A","U"),...conflicts("D","D","U"),...conflicts("U","A","D","U"),["##",(e,t)=>{const r=/ahead (\d+)/;const s=/behind (\d+)/;const n=/^(.+?(?=(?:\.{3}|\s|$)))/;const i=/\.{3}(\S*)/;const o=/\son\s(\S+?)(?=\.{3}|$)/;let a=r.exec(t);e.ahead=a&&+a[1]||0;a=s.exec(t);e.behind=a&&+a[1]||0;a=n.exec(t);e.current=filterType(a?.[1],Fe,null);a=i.exec(t);e.tracking=filterType(a?.[1],Fe,null);a=o.exec(t);if(a){e.current=filterType(a?.[1],Fe,e.current)}e.detached=/\(no branch\)/.test(t)}]]);cs=function(e){const t=e.split($e);const r=new os;for(let e=0,s=t.length;e<s;){let s=t[e++].trim();if(!s){continue}if(s.charAt(0)==="R"){s+=$e+(t[e++]||"")}splitLine(r,s)}return r}}});function statusTask(e){const t=["status","--porcelain","-b","-u","--null",...e.filter((e=>!ls.includes(e)))];return{format:"utf-8",commands:t,parser(e){return cs(e)}}}var ls;var hs=__esm({"src/lib/tasks/status.ts"(){"use strict";us();ls=["--null","-z"]}});function versionResponse(e=0,t=0,r=0,s="",n=true){return Object.defineProperty({major:e,minor:t,patch:r,agent:s,installed:n},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:false,enumerable:false})}function notInstalledResponse(){return versionResponse(0,0,0,"",false)}function version_default(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:versionParser,onError(e,t,r,s){if(e.exitCode===-2){return r(Buffer.from(ps))}s(t)}})}}}function versionParser(e){if(e===ps){return notInstalledResponse()}return parseStringResponse(versionResponse(0,0,0,e),fs,e)}var ps,fs;var ds=__esm({"src/lib/tasks/version.ts"(){"use strict";Qe();ps="installed=false";fs=[new We(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,((e,[t,r,s,n=""])=>{Object.assign(e,versionResponse(asNumber(t),asNumber(r),asNumber(s),n))})),new We(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,((e,[t,r,s,n=""])=>{Object.assign(e,versionResponse(asNumber(t),asNumber(r),s,n))}))]}});var ms={};__export(ms,{SimpleGitApi:()=>gs});var gs;var bs=__esm({"src/lib/simple-git-api.ts"(){"use strict";Ut();qt();zt();Yt();Qt();Ot();Zt();Pt();er();or();Cr();Yr();ts();rs();hs();pt();ds();Qe();gs=class{constructor(e){this._executor=e}_runTask(e,t){const r=this._executor.chain();const s=r.push(e);if(t){taskCallback(e,s,t)}return Object.create(this,{then:{value:s.then.bind(s)},catch:{value:s.catch.bind(s)},_executor:{value:r}})}add(e){return this._runTask(straightThroughStringTask(["add",...asArray(e)]),trailingFunctionArgument(arguments))}cwd(e){const t=trailingFunctionArgument(arguments);if(typeof e==="string"){return this._runTask(changeWorkingDirectoryTask(e,this._executor),t)}if(typeof e?.path==="string"){return this._runTask(changeWorkingDirectoryTask(e.path,e.root&&this._executor||void 0),t)}return this._runTask(configurationErrorTask("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(hashObjectTask(e,t===true),trailingFunctionArgument(arguments))}init(e){return this._runTask(initTask(e===true,this._executor.cwd,getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}merge(){return this._runTask(mergeTask(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}mergeFromTo(e,t){if(!(Fe(e)&&Fe(t))){return this._runTask(configurationErrorTask(`Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings`))}return this._runTask(mergeTask([e,t,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments,false))}outputHandler(e){this._executor.outputHandler=e;return this}push(){const e=pushTask({remote:filterType(arguments[0],Fe),branch:filterType(arguments[1],Fe)},getTrailingOptions(arguments));return this._runTask(e,trailingFunctionArgument(arguments))}stash(){return this._runTask(straightThroughStringTask(["stash",...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))}status(){return this._runTask(statusTask(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}};Object.assign(gs.prototype,checkout_default(),commit_default(),config_default(),count_objects_default(),first_commit_default(),grep_default(),log_default(),show_default(),version_default())}});var ys={};__export(ys,{Scheduler:()=>_s});var ws,_s;var vs=__esm({"src/lib/runners/scheduler.ts"(){"use strict";Qe();Mt();ws=(()=>{let e=0;return()=>{e++;const{promise:t,done:r}=(0,me.ud)();return{promise:t,done:r,id:e}}})();_s=class{constructor(e=2){this.concurrency=e;this.logger=createLogger("","scheduler");this.pending=[];this.running=[];this.logger(`Constructed, concurrency=%s`,e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger(`Schedule attempt ignored, pending=%s running=%s concurrency=%s`,this.pending.length,this.running.length,this.concurrency);return}const e=append(this.running,this.pending.shift());this.logger(`Attempting id=%s`,e.id);e.done((()=>{this.logger(`Completing id=`,e.id);remove(this.running,e);this.schedule()}))}next(){const{promise:e,id:t}=append(this.pending,ws());this.logger(`Scheduling id=%s`,t);this.schedule();return e}}}});var Es={};__export(Es,{applyPatchTask:()=>applyPatchTask});function applyPatchTask(e,t){return straightThroughStringTask(["apply",...t,...e])}var Ts=__esm({"src/lib/tasks/apply-patch.ts"(){"use strict";pt()}});function branchDeletionSuccess(e,t){return{branch:e,hash:t,success:true}}function branchDeletionFailure(e){return{branch:e,hash:null,success:false}}var Os;var Cs=__esm({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";Os=class{constructor(){this.all=[];this.branches={};this.errors=[]}get success(){return!this.errors.length}}}});function hasBranchDeletionError(e,t){return t===1&&As.test(e)}var ks,As,Ss,xs;var $s=__esm({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";Cs();Qe();ks=/(\S+)\s+\(\S+\s([^)]+)\)/;As=/^error[^']+'([^']+)'/m;Ss=[new We(ks,((e,[t,r])=>{const s=branchDeletionSuccess(t,r);e.all.push(s);e.branches[t]=s})),new We(As,((e,[t])=>{const r=branchDeletionFailure(t);e.errors.push(r);e.all.push(r);e.branches[t]=r}))];xs=(e,t)=>parseStringResponse(new Os,Ss,[e,t])}});var Rs;var Ps=__esm({"src/lib/responses/BranchSummary.ts"(){"use strict";Rs=class{constructor(){this.all=[];this.branches={};this.current="";this.detached=false}push(e,t,r,s,n){if(e==="*"){this.detached=t;this.current=r}this.all.push(r);this.branches[r]={current:e==="*",linkedWorkTree:e==="+",name:r,commit:s,label:n}}}}});function branchStatus(e){return e?e.charAt(0):""}function parseBranchSummary(e,t=false){return parseStringResponse(new Rs,t?[Is]:Ns,e)}var Ns,Is;var Ls=__esm({"src/lib/parsers/parse-branch.ts"(){"use strict";Ps();Qe();Ns=[new We(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,((e,[t,r,s,n])=>{e.push(branchStatus(t),true,r,s,n)})),new We(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,((e,[t,r,s,n])=>{e.push(branchStatus(t),false,r,s,n)}))];Is=new We(/^(\S+)$/s,((e,[t])=>{e.push("*",false,t,"","")}))}});var Fs={};__export(Fs,{branchLocalTask:()=>branchLocalTask,branchTask:()=>branchTask,containsDeleteBranchCommand:()=>containsDeleteBranchCommand,deleteBranchTask:()=>deleteBranchTask,deleteBranchesTask:()=>deleteBranchesTask});function containsDeleteBranchCommand(e){const t=["-d","-D","--delete"];return e.some((e=>t.includes(e)))}function branchTask(e){const t=containsDeleteBranchCommand(e);const r=e.includes("--show-current");const s=["branch",...e];if(s.length===1){s.push("-a")}if(!s.includes("-v")){s.splice(1,0,"-v")}return{format:"utf-8",commands:s,parser(e,s){if(t){return xs(e,s).all[0]}return parseBranchSummary(e,r)}}}function branchLocalTask(){return{format:"utf-8",commands:["branch","-v"],parser(e){return parseBranchSummary(e)}}}function deleteBranchesTask(e,t=false){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(e,t){return xs(e,t)},onError({exitCode:e,stdOut:t},r,s,n){if(!hasBranchDeletionError(String(r),e)){return n(r)}s(t)}}}function deleteBranchTask(e,t=false){const r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(t,r){return xs(t,r).branches[e]},onError({exitCode:e,stdErr:t,stdOut:s},n,i,o){if(!hasBranchDeletionError(String(n),e)){return o(n)}throw new ke(r.parser(bufferToString(s),bufferToString(t)),String(n))}};return r}var Ms=__esm({"src/lib/tasks/branch.ts"(){"use strict";Ae();$s();Ls();Qe()}});function toPath(e){const t=e.trim().replace(/^["']|["']$/g,"");return t&&(0,ge.normalize)(t)}var Ds;var Gs=__esm({"src/lib/responses/CheckIgnore.ts"(){"use strict";Ds=e=>e.split(/\n/g).map(toPath).filter(Boolean)}});var js={};__export(js,{checkIgnoreTask:()=>checkIgnoreTask});function checkIgnoreTask(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Ds}}var Bs=__esm({"src/lib/tasks/check-ignore.ts"(){"use strict";Gs()}});var Vs={};__export(Vs,{cloneMirrorTask:()=>cloneMirrorTask,cloneTask:()=>cloneTask});function disallowedCommand(e){return/^--upload-pack(=|$)/.test(e)}function cloneTask(e,t,r){const s=["clone",...r];Fe(e)&&s.push(e);Fe(t)&&s.push(t);const n=s.find(disallowedCommand);if(n){return configurationErrorTask(`git.fetch: potential exploit argument blocked.`)}return straightThroughStringTask(s)}function cloneMirrorTask(e,t,r){append(r,"--mirror");return cloneTask(e,t,r)}var Hs=__esm({"src/lib/tasks/clone.ts"(){"use strict";pt();Qe()}});function parseFetchResult(e,t){const r={raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]};return parseStringResponse(r,Ws,[e,t])}var Ws;var Us=__esm({"src/lib/parsers/parse-fetch.ts"(){"use strict";Qe();Ws=[new We(/From (.+)$/,((e,[t])=>{e.remote=t})),new We(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,((e,[t,r])=>{e.branches.push({name:t,tracking:r})})),new We(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,((e,[t,r])=>{e.tags.push({name:t,tracking:r})})),new We(/- \[deleted]\s+\S+\s*-> (.+)$/,((e,[t])=>{e.deleted.push({tracking:t})})),new We(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,((e,[t,r,s,n])=>{e.updated.push({name:s,tracking:n,to:r,from:t})}))]}});var qs={};__export(qs,{fetchTask:()=>fetchTask});function disallowedCommand2(e){return/^--upload-pack(=|$)/.test(e)}function fetchTask(e,t,r){const s=["fetch",...r];if(e&&t){s.push(e,t)}const n=s.find(disallowedCommand2);if(n){return configurationErrorTask(`git.fetch: potential exploit argument blocked.`)}return{commands:s,format:"utf-8",parser:parseFetchResult}}var zs=__esm({"src/lib/tasks/fetch.ts"(){"use strict";Us();pt()}});function parseMoveResult(e){return parseStringResponse({moves:[]},Xs,e)}var Xs;var Ys=__esm({"src/lib/parsers/parse-move.ts"(){"use strict";Qe();Xs=[new We(/^Renaming (.+) to (.+)$/,((e,[t,r])=>{e.moves.push({from:t,to:r})}))]}});var Js={};__export(Js,{moveTask:()=>moveTask});function moveTask(e,t){return{commands:["mv","-v",...asArray(e),t],format:"utf-8",parser:parseMoveResult}}var Ks=__esm({"src/lib/tasks/move.ts"(){"use strict";Ys();Qe()}});var Qs={};__export(Qs,{pullTask:()=>pullTask});function pullTask(e,t,r){const s=["pull",...r];if(e&&t){s.splice(1,0,e,t)}return{commands:s,format:"utf-8",parser(e,t){return Hr(e,t)},onError(e,t,r,s){const n=parsePullErrorResult(bufferToString(e.stdOut),bufferToString(e.stdErr));if(n){return s(new ke(n))}s(t)}}}var Zs=__esm({"src/lib/tasks/pull.ts"(){"use strict";Ae();Wr();Qe()}});function parseGetRemotes(e){const t={};forEach(e,(([e])=>t[e]={name:e}));return Object.values(t)}function parseGetRemotesVerbose(e){const t={};forEach(e,(([e,r,s])=>{if(!Object.hasOwn(t,e)){t[e]={name:e,refs:{fetch:"",push:""}}}if(s&&r){t[e].refs[s.replace(/[^a-z]/g,"")]=r}}));return Object.values(t)}function forEach(e,t){forEachLineWithContent(e,(e=>t(e.split(/\s+/))))}var en=__esm({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";Qe()}});var tn={};__export(tn,{addRemoteTask:()=>addRemoteTask,getRemotesTask:()=>getRemotesTask,listRemotesTask:()=>listRemotesTask,remoteTask:()=>remoteTask,removeRemoteTask:()=>removeRemoteTask});function addRemoteTask(e,t,r){return straightThroughStringTask(["remote","add",...r,e,t])}function getRemotesTask(e){const t=["remote"];if(e){t.push("-v")}return{commands:t,format:"utf-8",parser:e?parseGetRemotesVerbose:parseGetRemotes}}function listRemotesTask(e){const t=[...e];if(t[0]!=="ls-remote"){t.unshift("ls-remote")}return straightThroughStringTask(t)}function remoteTask(e){const t=[...e];if(t[0]!=="remote"){t.unshift("remote")}return straightThroughStringTask(t)}function removeRemoteTask(e){return straightThroughStringTask(["remote","remove",e])}var rn=__esm({"src/lib/tasks/remote.ts"(){"use strict";en();pt()}});var sn={};__export(sn,{stashListTask:()=>stashListTask});function stashListTask(e={},t){const r=parseLogOptions(e);const s=["stash","list",...r.commands,...t];const n=createListLogSummaryParser(r.splitter,r.fields,logFormatFromCommand(s));return validateLogFormatConfig(s)||{commands:s,format:"utf-8",parser:n}}var nn=__esm({"src/lib/tasks/stash-list.ts"(){"use strict";cr();vr();Tr();Cr()}});var on={};__export(on,{addSubModuleTask:()=>addSubModuleTask,initSubModuleTask:()=>initSubModuleTask,subModuleTask:()=>subModuleTask,updateSubModuleTask:()=>updateSubModuleTask});function addSubModuleTask(e,t){return subModuleTask(["add",e,t])}function initSubModuleTask(e){return subModuleTask(["init",...e])}function subModuleTask(e){const t=[...e];if(t[0]!=="submodule"){t.unshift("submodule")}return straightThroughStringTask(t)}function updateSubModuleTask(e){return subModuleTask(["update",...e])}var an=__esm({"src/lib/tasks/sub-module.ts"(){"use strict";pt()}});function singleSorted(e,t){const r=Number.isNaN(e);const s=Number.isNaN(t);if(r!==s){return r?1:-1}return r?sorted(e,t):0}function sorted(e,t){return e===t?0:e>t?1:-1}function trimmed(e){return e.trim()}function toNumber(e){if(typeof e==="string"){return parseInt(e.replace(/^\D+/g,""),10)||0}return 0}var cn,un;var ln=__esm({"src/lib/responses/TagList.ts"(){"use strict";cn=class{constructor(e,t){this.all=e;this.latest=t}};un=function(e,t=false){const r=e.split("\n").map(trimmed).filter(Boolean);if(!t){r.sort((function(e,t){const r=e.split(".");const s=t.split(".");if(r.length===1||s.length===1){return singleSorted(toNumber(r[0]),toNumber(s[0]))}for(let e=0,t=Math.max(r.length,s.length);e<t;e++){const t=sorted(toNumber(r[e]),toNumber(s[e]));if(t){return t}}return 0}))}const s=t?r[0]:[...r].reverse().find((e=>e.indexOf(".")>=0));return new cn(r,s)}}});var hn={};__export(hn,{addAnnotatedTagTask:()=>addAnnotatedTagTask,addTagTask:()=>addTagTask,tagListTask:()=>tagListTask});function tagListTask(e=[]){const t=e.some((e=>/^--sort=/.test(e)));return{format:"utf-8",commands:["tag","-l",...e],parser(e){return un(e,t)}}}function addTagTask(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function addAnnotatedTagTask(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var pn=__esm({"src/lib/tasks/tag.ts"(){"use strict";ln()}});var fn=__commonJS({"src/git.js"(e,t){"use strict";var{GitExecutor:r}=(Wt(),__toCommonJS(Vt));var{SimpleGitApi:s}=(bs(),__toCommonJS(ms));var{Scheduler:n}=(vs(),__toCommonJS(ys));var{configurationErrorTask:i}=(pt(),__toCommonJS(ut));var{asArray:o,filterArray:a,filterPrimitives:c,filterString:u,filterStringOrStringArray:l,filterType:h,getTrailingOptions:p,trailingFunctionArgument:f,trailingOptionsArgument:d}=(Qe(),__toCommonJS(Ke));var{applyPatchTask:g}=(Ts(),__toCommonJS(Es));var{branchTask:b,branchLocalTask:y,deleteBranchesTask:w,deleteBranchTask:_}=(Ms(),__toCommonJS(Fs));var{checkIgnoreTask:v}=(Bs(),__toCommonJS(js));var{checkIsRepoTask:E}=(st(),__toCommonJS(Ze));var{cloneTask:T,cloneMirrorTask:O}=(Hs(),__toCommonJS(Vs));var{cleanWithOptionsTask:C,isCleanOptionsArray:k}=(_t(),__toCommonJS(ft));var{diffSummaryTask:A}=(Tr(),__toCommonJS(Er));var{fetchTask:S}=(zs(),__toCommonJS(qs));var{moveTask:x}=(Ks(),__toCommonJS(Js));var{pullTask:$}=(Zs(),__toCommonJS(Qs));var{pushTagsTask:R}=(ts(),__toCommonJS(es));var{addRemoteTask:P,getRemotesTask:N,listRemotesTask:I,remoteTask:L,removeRemoteTask:F}=(rn(),__toCommonJS(tn));var{getResetMode:M,resetTask:D}=(Ft(),__toCommonJS(Nt));var{stashListTask:G}=(nn(),__toCommonJS(sn));var{addSubModuleTask:j,initSubModuleTask:B,subModuleTask:V,updateSubModuleTask:H}=(an(),__toCommonJS(on));var{addAnnotatedTagTask:W,addTagTask:U,tagListTask:q}=(pn(),__toCommonJS(hn));var{straightThroughBufferTask:z,straightThroughStringTask:X}=(pt(),__toCommonJS(ut));function Git2(e,t){this._plugins=t;this._executor=new r(e.baseDir,new n(e.maxConcurrentProcesses),t);this._trimmed=e.trimmed}(Git2.prototype=Object.create(s.prototype)).constructor=Git2;Git2.prototype.customBinary=function(e){this._plugins.reconfigure("binary",e);return this};Git2.prototype.env=function(e,t){if(arguments.length===1&&typeof e==="object"){this._executor.env=e}else{(this._executor.env=this._executor.env||{})[e]=t}return this};Git2.prototype.stashList=function(e){return this._runTask(G(d(arguments)||{},a(e)&&e||[]),f(arguments))};function createCloneTask(e,t,r,s){if(typeof r!=="string"){return i(`git.${e}() requires a string 'repoPath'`)}return t(r,h(s,u),p(arguments))}Git2.prototype.clone=function(){return this._runTask(createCloneTask("clone",T,...arguments),f(arguments))};Git2.prototype.mirror=function(){return this._runTask(createCloneTask("mirror",O,...arguments),f(arguments))};Git2.prototype.mv=function(e,t){return this._runTask(x(e,t),f(arguments))};Git2.prototype.checkoutLatestTag=function(e){var t=this;return this.pull((function(){t.tags((function(r,s){t.checkout(s.latest,e)}))}))};Git2.prototype.pull=function(e,t,r,s){return this._runTask($(h(e,u),h(t,u),p(arguments)),f(arguments))};Git2.prototype.fetch=function(e,t){return this._runTask(S(h(e,u),h(t,u),p(arguments)),f(arguments))};Git2.prototype.silent=function(e){console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3");return this};Git2.prototype.tags=function(e,t){return this._runTask(q(p(arguments)),f(arguments))};Git2.prototype.rebase=function(){return this._runTask(X(["rebase",...p(arguments)]),f(arguments))};Git2.prototype.reset=function(e){return this._runTask(D(M(e),p(arguments)),f(arguments))};Git2.prototype.revert=function(e){const t=f(arguments);if(typeof e!=="string"){return this._runTask(i("Commit must be a string"),t)}return this._runTask(X(["revert",...p(arguments,0,true),e]),t)};Git2.prototype.addTag=function(e){const t=typeof e==="string"?U(e):i("Git.addTag requires a tag name");return this._runTask(t,f(arguments))};Git2.prototype.addAnnotatedTag=function(e,t){return this._runTask(W(e,t),f(arguments))};Git2.prototype.deleteLocalBranch=function(e,t,r){return this._runTask(_(e,typeof t==="boolean"?t:false),f(arguments))};Git2.prototype.deleteLocalBranches=function(e,t,r){return this._runTask(w(e,typeof t==="boolean"?t:false),f(arguments))};Git2.prototype.branch=function(e,t){return this._runTask(b(p(arguments)),f(arguments))};Git2.prototype.branchLocal=function(e){return this._runTask(y(),f(arguments))};Git2.prototype.raw=function(e){const t=!Array.isArray(e);const r=[].slice.call(t?arguments:e,0);for(let e=0;e<r.length&&t;e++){if(!c(r[e])){r.splice(e,r.length-e);break}}r.push(...p(arguments,0,true));var s=f(arguments);if(!r.length){return this._runTask(i("Raw: must supply one or more command to execute"),s)}return this._runTask(X(r,this._trimmed),s)};Git2.prototype.submoduleAdd=function(e,t,r){return this._runTask(j(e,t),f(arguments))};Git2.prototype.submoduleUpdate=function(e,t){return this._runTask(H(p(arguments,true)),f(arguments))};Git2.prototype.submoduleInit=function(e,t){return this._runTask(B(p(arguments,true)),f(arguments))};Git2.prototype.subModule=function(e,t){return this._runTask(V(p(arguments)),f(arguments))};Git2.prototype.listRemote=function(){return this._runTask(I(p(arguments)),f(arguments))};Git2.prototype.addRemote=function(e,t,r){return this._runTask(P(e,t,p(arguments)),f(arguments))};Git2.prototype.removeRemote=function(e,t){return this._runTask(F(e),f(arguments))};Git2.prototype.getRemotes=function(e,t){return this._runTask(N(e===true),f(arguments))};Git2.prototype.remote=function(e,t){return this._runTask(L(p(arguments)),f(arguments))};Git2.prototype.tag=function(e,t){const r=p(arguments);if(r[0]!=="tag"){r.unshift("tag")}return this._runTask(X(r),f(arguments))};Git2.prototype.updateServerInfo=function(e){return this._runTask(X(["update-server-info"]),f(arguments))};Git2.prototype.pushTags=function(e,t){const r=R({remote:h(e,u)},p(arguments));return this._runTask(r,f(arguments))};Git2.prototype.rm=function(e){return this._runTask(X(["rm","-f",...o(e)]),f(arguments))};Git2.prototype.rmKeepLocal=function(e){return this._runTask(X(["rm","--cached",...o(e)]),f(arguments))};Git2.prototype.catFile=function(e,t){return this._catFile("utf-8",arguments)};Git2.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)};Git2.prototype._catFile=function(e,t){var r=f(t);var s=["cat-file"];var n=t[0];if(typeof n==="string"){return this._runTask(i("Git.catFile: options must be supplied as an array of strings"),r)}if(Array.isArray(n)){s.push.apply(s,n)}const o=e==="buffer"?z(s):X(s);return this._runTask(o,r)};Git2.prototype.diff=function(e,t){const r=u(e)?i("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):X(["diff",...p(arguments)]);return this._runTask(r,f(arguments))};Git2.prototype.diffSummary=function(){return this._runTask(A(p(arguments,1)),f(arguments))};Git2.prototype.applyPatch=function(e){const t=!l(e)?i(`git.applyPatch requires one or more string patches as the first argument`):g(o(e),p([].slice.call(arguments,1)));return this._runTask(t,f(arguments))};Git2.prototype.revparse=function(){const e=["rev-parse",...p(arguments,true)];return this._runTask(X(e,true),f(arguments))};Git2.prototype.clean=function(e,t,r){const s=k(e);const n=s&&e.join("")||h(e,u)||"";const i=p([].slice.call(arguments,s?1:0));return this._runTask(C(n,i),f(arguments))};Git2.prototype.exec=function(e){const t={commands:[],format:"utf-8",parser(){if(typeof e==="function"){e()}}};return this._runTask(t)};Git2.prototype.clearQueue=function(){return this};Git2.prototype.checkIgnore=function(e,t){return this._runTask(v(o(h(e,l,[]))),f(arguments))};Git2.prototype.checkIsRepo=function(e,t){return this._runTask(E(h(e,u)),f(arguments))};t.exports=Git2}});Te();Ce();var dn=class extends Oe{constructor(e,t){super(void 0,t);this.config=e}};Ce();Ce();var mn=class extends Oe{constructor(e,t,r){super(e,r);this.task=e;this.plugin=t;Object.setPrototypeOf(this,new.target.prototype)}};Ae();xe();st();_t();Ot();At();Pt();Ft();function abortPlugin(e){if(!e){return}const t={type:"spawn.after",action(t,r){function kill(){r.kill(new mn(void 0,"abort","Abort signal received"))}e.addEventListener("abort",kill);r.spawned.on("close",(()=>e.removeEventListener("abort",kill)))}};const r={type:"spawn.before",action(t,r){if(e.aborted){r.kill(new mn(void 0,"abort","Abort already signaled"))}}};return[r,t]}function isConfigSwitch(e){return typeof e==="string"&&e.trim().toLowerCase()==="-c"}function preventProtocolOverride(e,t){if(!isConfigSwitch(e)){return}if(!/^\s*protocol(.[a-z]+)?.allow/.test(t)){return}throw new mn(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function preventUploadPack(e,t){if(/^\s*--(upload|receive)-pack/.test(e)){throw new mn(void 0,"unsafe",`Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack`)}if(t==="clone"&&/^\s*-u\b/.test(e)){throw new mn(void 0,"unsafe",`Use of clone with option -u is not permitted without enabling allowUnsafePack`)}if(t==="push"&&/^\s*--exec\b/.test(e)){throw new mn(void 0,"unsafe",`Use of push with option --exec is not permitted without enabling allowUnsafePack`)}}function blockUnsafeOperationsPlugin({allowUnsafeProtocolOverride:e=false,allowUnsafePack:t=false}={}){return{type:"spawn.args",action(r,s){r.forEach(((n,i)=>{const o=i<r.length?r[i+1]:"";e||preventProtocolOverride(n,o);t||preventUploadPack(n,s.method)}));return r}}}Qe();function commandConfigPrefixingPlugin(e){const t=prefixedArray(e,"-c");return{type:"spawn.args",action(e){return[...t,...e]}}}Qe();var gn=(0,me.yX)().promise;function completionDetectionPlugin({onClose:e=true,onExit:t=50}={}){function createEvents(){let r=-1;const s={close:(0,me.yX)(),closeTimeout:(0,me.yX)(),exit:(0,me.yX)(),exitTimeout:(0,me.yX)()};const n=Promise.race([e===false?gn:s.closeTimeout.promise,t===false?gn:s.exitTimeout.promise]);configureTimeout(e,s.close,s.closeTimeout);configureTimeout(t,s.exit,s.exitTimeout);return{close(e){r=e;s.close.done()},exit(e){r=e;s.exit.done()},get exitCode(){return r},result:n}}function configureTimeout(e,t,r){if(e===false){return}(e===true?t.promise:t.promise.then((()=>delay(e)))).then(r.done)}return{type:"spawn.after",async action(e,{spawned:t,close:r}){const s=createEvents();let n=true;let quickClose=()=>void(n=false);t.stdout?.on("data",quickClose);t.stderr?.on("data",quickClose);t.on("error",quickClose);t.on("close",(e=>s.close(e)));t.on("exit",(e=>s.exit(e)));try{await s.result;if(n){await delay(50)}r(s.exitCode)}catch(e){r(s.exitCode,e)}}}}Qe();var bn=`Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings`;var yn=`Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option`;function isBadArgument(e){return!e||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(e)}function toBinaryConfig(e,t){if(e.length<1||e.length>2){throw new mn(void 0,"binary",bn)}const r=e.some(isBadArgument);if(r){if(t){console.warn(yn)}else{throw new mn(void 0,"binary",yn)}}const[s,n]=e;return{binary:s,prefix:n}}function customBinaryPlugin(e,t=["git"],r=false){let s=toBinaryConfig(asArray(t),r);e.on("binary",(e=>{s=toBinaryConfig(asArray(e),r)}));e.append("spawn.binary",(()=>s.binary));e.append("spawn.args",(e=>s.prefix?[s.prefix,...e]:e))}Ce();function isTaskError(e){return!!(e.exitCode&&e.stdErr.length)}function getErrorMessage(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function errorDetectionHandler(e=false,t=isTaskError,r=getErrorMessage){return(s,n)=>{if(!e&&s||!t(n)){return s}return r(n)}}function errorDetectionPlugin(e){return{type:"task.error",action(t,r){const s=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});if(Buffer.isBuffer(s)){return{error:new Oe(void 0,s.toString("utf-8"))}}return{error:s}}}}Qe();var wn=class{constructor(){this.plugins=new Set;this.events=new be.EventEmitter}on(e,t){this.events.on(e,t)}reconfigure(e,t){this.events.emit(e,t)}append(e,t){const r=append(this.plugins,{type:e,action:t});return()=>this.plugins.delete(r)}add(e){const t=[];asArray(e).forEach((e=>e&&this.plugins.add(append(t,e))));return()=>{t.forEach((e=>this.plugins.delete(e)))}}exec(e,t,r){let s=t;const n=Object.freeze(Object.create(r));for(const t of this.plugins){if(t.type===e){s=t.action(s,n)}}return s}};Qe();function progressMonitorPlugin(e){const t="--progress";const r=["checkout","clone","fetch","pull","push"];const s={type:"spawn.after",action(r,s){if(!s.commands.includes(t)){return}s.spawned.stderr?.on("data",(t=>{const r=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(t.toString("utf8"));if(!r){return}e({method:s.method,stage:progressEventStage(r[1]),progress:asNumber(r[2]),processed:asNumber(r[3]),total:asNumber(r[4])})}))}};const n={type:"spawn.args",action(e,s){if(!r.includes(s.method)){return e}return including(e,t)}};return[n,s]}function progressEventStage(e){return String(e.toLowerCase().split(" ",1))||"unknown"}Qe();function spawnOptionsPlugin(e){const t=pick(e,["uid","gid"]);return{type:"spawn.options",action(e){return{...t,...e}}}}function timeoutPlugin({block:e,stdErr:t=true,stdOut:r=true}){if(e>0){return{type:"spawn.after",action(s,n){let i;function wait(){i&&clearTimeout(i);i=setTimeout(kill,e)}function stop(){n.spawned.stdout?.off("data",wait);n.spawned.stderr?.off("data",wait);n.spawned.off("exit",stop);n.spawned.off("close",stop);i&&clearTimeout(i)}function kill(){stop();n.kill(new mn(void 0,"timeout",`block timeout reached`))}r&&n.spawned.stdout?.on("data",wait);t&&n.spawned.stderr?.on("data",wait);n.spawned.on("exit",stop);n.spawned.on("close",stop);wait()}}}}Te();function suffixPathsPlugin(){return{type:"spawn.args",action(e){const t=[];let r;function append2(e){(r=r||[]).push(...e)}for(let r=0;r<e.length;r++){const s=e[r];if(isPathSpec(s)){append2(toPaths(s));continue}if(s==="--"){append2(e.slice(r+1).flatMap((e=>isPathSpec(e)&&toPaths(e)||e)));break}t.push(s)}return!r?t:[...t,"--",...r.map(String)]}}}Qe();var _n=fn();function gitInstanceFactory(e,t){const r=new wn;const s=createInstanceConfig(e&&(typeof e==="string"?{baseDir:e}:e)||{},t);if(!folderExists(s.baseDir)){throw new dn(s,`Cannot use simple-git on a directory that does not exist`)}if(Array.isArray(s.config)){r.add(commandConfigPrefixingPlugin(s.config))}r.add(blockUnsafeOperationsPlugin(s.unsafe));r.add(suffixPathsPlugin());r.add(completionDetectionPlugin(s.completion));s.abort&&r.add(abortPlugin(s.abort));s.progress&&r.add(progressMonitorPlugin(s.progress));s.timeout&&r.add(timeoutPlugin(s.timeout));s.spawnOptions&&r.add(spawnOptionsPlugin(s.spawnOptions));r.add(errorDetectionPlugin(errorDetectionHandler(true)));s.errors&&r.add(errorDetectionPlugin(s.errors));customBinaryPlugin(r,s.binary,s.unsafe?.allowUnsafeCustomBinary);return new _n(s,r)}Ae();var vn=null&&["customBinary","env","outputHandler","silent"];var En=null&&["add","addAnnotatedTag","addConfig","addRemote","addTag","applyPatch","binaryCatFile","branch","branchLocal","catFile","checkIgnore","checkIsRepo","checkout","checkoutBranch","checkoutLatestTag","checkoutLocalBranch","clean","clone","commit","cwd","deleteLocalBranch","deleteLocalBranches","diff","diffSummary","exec","fetch","getRemotes","init","listConfig","listRemote","log","merge","mergeFromTo","mirror","mv","pull","push","pushTags","raw","rebase","remote","removeRemote","reset","revert","revparse","rm","rmKeepLocal","show","stash","stashList","status","subModule","submoduleAdd","submoduleInit","submoduleUpdate","tag","tags","updateServerInfo"];function gitP(...e){let t;let r=Promise.resolve();try{t=gitInstanceFactory(...e)}catch(e){r=Promise.reject(e)}function builderReturn(){return s}function chainReturn(){return r}const s=[...vn,...En].reduce(((e,r)=>{const s=En.includes(r);const n=s?asyncWrapper(r,t):syncWrapper(r,t,e);const i=s?chainReturn:builderReturn;Object.defineProperty(e,r,{enumerable:false,configurable:false,value:t?n:i});return e}),{});return s;function asyncWrapper(e,t){return function(...s){if(typeof s[s.length]==="function"){throw new TypeError("Promise interface requires that handlers are not supplied inline, trailing function not allowed in call to "+e)}return r.then((function(){return new Promise((function(r,n){const callback=(e,t)=>{if(e){return n(toError(e))}r(t)};s.push(callback);t[e].apply(t,s)}))}))}}function syncWrapper(e,t,r){return(...s)=>{t[e](...s);return r}}}function toError(e){if(e instanceof Error){return e}if(typeof e==="string"){return new Error(e)}return new ke(e)}var Tn=gitInstanceFactory;var On=null&&gitInstanceFactory;let Cn;function __setGitClientForTest(e){Cn=e}const kn={init:e=>{Cn=Tn({baseDir:e?.cwd??process.cwd()})},fetchTags:async()=>{if(!Cn){throw new Error("Git not initialized")}try{await Cn.fetch(["--tags","--force"])}catch{}},listTags:async e=>{if(!Cn)throw new Error("Git not initialized");if(!e){const e=await Cn.tags();return e.all}const t=await Cn.raw(["tag","--merged","HEAD"]);return t.split("\n").map((e=>e.trim())).filter(Boolean)}};const An=kn;var Sn=__nccwpck_require__(1421);const xn={resolveNpmPath(){const e=process.env.npm_execpath;if(e){return e}try{const e=(0,Sn.execSync)("npm root -g",{encoding:"utf8",stdio:["ignore","pipe","ignore"]}).trim();return ge.join(e,"npm","bin","npm-cli.js")}catch(e){return process.platform==="win32"?"npm.cmd":"npm"}},resolveNpmCommand(){const e=xn.resolveNpmPath();if(e.endsWith(".js")){return{cmd:process.execPath,argsPrefix:[e]}}return{cmd:e,argsPrefix:[]}}};function npm(...e){let t={};let r=undefined;function executor(s){try{const{cmd:r,argsPrefix:s}=xn.resolveNpmCommand();const n=(0,Sn.execFileSync)(r,[...s,...e],{encoding:"utf8",...t});const i=typeof n==="string"?n:n.toString("utf8");const o=i.trim();if(!o){throw new Error("No output from npm")}return JSON.parse(o)}catch(e){if(r){return r(e)}if(arguments.length>0){return s}throw e}}executor.withOpts=function(e){t=e||{};return executor};executor.catch=function(e){r=e;return executor};return executor}const $n={fetchVersions:(e,t)=>{const r=npm("view",e,"versions","--json").withOpts({cwd:t})([]);if(Array.isArray(r)){return r.map(String)}if(typeof r==="string"){return[r]}if(r&&typeof r==="object"&&Array.isArray(r.versions)){return r.versions.map((e=>String(e)))}throw new Error("Unexpected npm view output format for versions")},pkg:(e=process.cwd())=>({get(t){return npm("pkg","get",t,"--json").withOpts({cwd:e})()}})};const Rn=$n;async function computeNextVersion(e){const t=e.cwd??b.cwd();const r=e.tagPrefix??"v";const s=e.reachableTagsOnly??true;const n=e.branch??b.env.GITHUB_REF_NAME??"unknown";if(!e.packageName?.trim())throw new Error("packageName is required");if(!e.branches?.length)throw new Error("branches must not be empty");const i=resolveBranchRule(n,e.branches);if(!i){return{channel:"latest",bump:null,lastStableTag:null,lastStableVersion:"0.0.0",nextBaseVersion:null,version:null,alreadyPublished:false}}const o=resolvePrereleaseId(n,i);const a=resolveChannel(i,o);An.init({cwd:t});await An.fetchTags();const c=await findLastStableTag(r,s);const u=c?c.slice(r.length):"0.0.0";const l=await recommendedBumpAngular({cwd:t,tagPrefix:r});if(!l){if(e.failIfNoBump){throw new Error("No recommended bump found (no Conventional Commits requiring a release).")}return{channel:a,bump:null,lastStableTag:c,lastStableVersion:u,nextBaseVersion:null,version:null,alreadyPublished:false,prereleaseId:o??undefined}}const h=y.inc(u,l);if(!h){throw new Error(`Failed to increment base version: last=${u}, bump=${l}`)}const p=new Set(Rn.fetchVersions(e.packageName,t));if(!o){const e=h;const t=p.has(e);return{channel:a,bump:l,lastStableTag:c,lastStableVersion:u,nextBaseVersion:h,version:e,alreadyPublished:t}}const f=`pre${l}`;const d=await maxPrereleaseFromTags({tagPrefix:r,nextBaseVersion:h,prereleaseId:o,reachableOnly:s});const g=maxPrereleaseFromRegistry(p,h,o);let w=Math.max(d,g)+1;let _=`${h}-${o}.${w}`;while(p.has(_)){w+=1;_=`${h}-${o}.${w}`}return{channel:a,bump:f,lastStableTag:c,lastStableVersion:u,nextBaseVersion:h,version:_,alreadyPublished:p.has(_),prereleaseCounter:w,prereleaseId:o}}function resolveBranchRule(e,t){const r=t.map((e=>normalizeRule(e)));for(const t of r){if(t.nameMatchers.some((t=>matchBranch(e,t)))){return t}}return null}function normalizeRule(e){if(typeof e==="string"){return{nameMatchers:[e]}}const t=Array.isArray(e.name)?e.name:[e.name];return{nameMatchers:t,prerelease:e.prerelease,channel:e.channel}}function matchBranch(e,t){return e===t||minimatch(e,t)}function resolvePrereleaseId(e,t){if(t.prerelease===undefined)return null;if(t.prerelease===false)return null;if(t.prerelease===true)return e;return t.prerelease}function resolveChannel(e,t){if(e.channel?.trim())return e.channel.trim();if(t)return t;return"latest"}async function findLastStableTag(e,t){const r=await An.listTags(t);let s=null;let n=null;const i=new RegExp(`^${escapeRegExp(e)}(\\d+\\.\\d+\\.\\d+)$`);for(const e of r){const t=e.match(i);if(!t){continue}const r=t[1];if(!y.valid(r)){continue}if(!n||y.gt(r,n)){n=r??null;s=e}}return s}async function maxPrereleaseFromTags(e){const{tagPrefix:t,nextBaseVersion:r,prereleaseId:s,reachableOnly:n}=e;const i=await An.listTags(n);let o=0;const a=new RegExp(`^${escapeRegExp(t)}${escapeRegExp(r)}-${escapeRegExp(s)}\\.(\\d+)$`);for(const e of i){if(!e.startsWith(`${t}${r}-${s}.`))continue;const n=e.match(a);if(!n)continue;const i=Number(n[1]);if(Number.isFinite(i)&&i>o)o=i}return o}function maxPrereleaseFromRegistry(e,t,r){let s=0;const n=new RegExp(`^${escapeRegExp(t)}-${escapeRegExp(r)}\\.(\\d+)$`);for(const t of e){const e=t.match(n);if(!e)continue;const r=Number(e[1]);if(Number.isFinite(r)&&r>s)s=r}return s}async function recommendedBumpAngular(e){const{cwd:t,tagPrefix:r}=e;const s=new Bumper(t);s.tag(r);s.loadPreset("angular");const n=await s.bump();if(n&&"releaseType"in n){return n.releaseType}return null}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function main(e=process.argv){const t=new p;t.name("next-version").description("Compute next version using Conventional Commits + git tags + npm registry (with semantic-release-like prerelease counter).").requiredOption("-p, --package <name>","npm package name used to query the registry, e.g. @scope/corelib").option("--cwd <path>","repo working directory (default: process.cwd())").option("--tag-prefix <prefix>",'git tag prefix (default: "v")',"v").option("--current-branch <name>","current branch name (default: GITHUB_REF_NAME)").option("--branches <json>","branches config as JSON array (subset of semantic-release: name/prerelease/channel)").option("--branch <name>","simple branch entry (can be repeated). Equivalent to semantic-release string entry. Example: --branch main --branch develop",collect,[]).option("--reachable-tags-only","only consider tags reachable from HEAD (default)",true).option("--all-tags","consider all tags in repo (not just merged into HEAD)",false).option("--fail-if-no-bump","exit non-zero if no bump is recommended",false).option("--json","print result as JSON",false);t.parse(e);const r=t.opts();const s=r.allTags?false:Boolean(r.reachableTagsOnly);const n=parseBranches(r.branches,r.branch);const i=await computeNextVersion({packageName:r.package,branches:n,cwd:r.cwd,tagPrefix:r.tagPrefix,branch:r.currentBranch,reachableTagsOnly:s,failIfNoBump:r.failIfNoBump});if(r.json){console.log(JSON.stringify(i,null,2));return}printPrettyResult(i)}function printPrettyResult(e){const t="─".repeat(50);console.log();console.log(t);console.log("  📦  Next Version Result");console.log(t);if(!e.version){console.log("  ⏸️  No release recommended (no bump).");console.log(t);console.log();return}const r=[["Version",e.version],["Channel",e.channel],["Bump Type",e.bump??"—"],["Last Stable Tag",e.lastStableTag??"—"],["Last Stable Version",e.lastStableVersion],["Next Base Version",e.nextBaseVersion??"—"]];if(e.prereleaseId){r.push(["Prerelease ID",e.prereleaseId])}if(e.prereleaseCounter!==undefined){r.push(["Prerelease Counter",String(e.prereleaseCounter)])}r.push(["Already Published",e.alreadyPublished?"Yes ⚠️":"No"]);const s=Math.max(...r.map((([e])=>e.length)));for(const[e,t]of r){const r=e.padEnd(s);console.log(`  ${r}  │  ${t}`)}console.log(t);console.log()}function collect(e,t){t.push(e);return t}function parseBranches(e,t){if(e?.trim()){const t=JSON.parse(e);if(!Array.isArray(t)){throw new Error("--branches must be a JSON array")}return t}if(t&&t.length>0){return t}throw new Error("No branches configuration provided. Use --branches JSON or one/more --branch entries.")}if(import.meta.url===`file://${process.argv[1]}`){main().catch((e=>{console.error(e instanceof Error?e.message:e);process.exit(1)}))}var Pn=s.i;export{Pn as main};